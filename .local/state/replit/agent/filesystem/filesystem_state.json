{"file_contents":{"design_guidelines.md":{"content":"# Gandharva Investment Management Platform - Design Guidelines\n\n## Design Approach: Reference-Based (Financial Services)\nDrawing inspiration from modern fintech leaders like Robinhood, Wealthfront, and Betterment, focusing on trust, clarity, and professional sophistication while maintaining accessibility for retail investors.\n\n## Core Design Elements\n\n### A. Color Palette\n**Light Mode:**\n- Primary: 220 85% 25% (Deep professional blue)\n- Secondary: 220 15% 96% (Light neutral background)\n- Accent: 142 76% 36% (Success green for gains)\n- Warning: 25 95% 53% (Alert red for losses)\n- Text: 220 15% 20% (Dark charcoal)\n\n**Dark Mode:**\n- Primary: 220 85% 65% (Lighter blue for contrast)\n- Secondary: 220 15% 8% (Dark background)\n- Accent: 142 76% 45% (Brighter success green)\n- Warning: 25 95% 60% (Softer alert red)\n- Text: 220 15% 90% (Light text)\n\n### B. Typography\n- **Primary Font**: Inter (Google Fonts) - Clean, professional, excellent for financial data\n- **Display Font**: Inter (weights: 400, 500, 600, 700)\n- **Monospace**: JetBrains Mono for numerical data and account numbers\n\n### C. Layout System\n**Tailwind Spacing Units**: Primarily 2, 4, 6, 8, 12, 16\n- Tight spacing (p-2, m-2) for form elements\n- Medium spacing (p-4, p-6) for cards and sections\n- Large spacing (p-8, p-12) for page layouts and hero sections\n\n### D. Component Library\n\n**Navigation:**\n- Clean horizontal nav with subtle shadows\n- Breadcrumb navigation for deep pages\n- Sidebar navigation for dashboard sections\n\n**Data Display:**\n- Card-based layout for portfolios and investments\n- Clean tables with alternating row colors\n- Interactive charts using Chart.js or similar\n- Progress bars for goal tracking\n\n**Forms:**\n- Generous padding and clear labels\n- Input validation with inline feedback\n- Multi-step forms for onboarding\n- Consistent button hierarchy\n\n**Financial Components:**\n- Portfolio performance cards with trend indicators\n- Investment recommendation tiles\n- Goal progress trackers\n- Transaction history lists with clear visual hierarchy\n\n### E. Key Design Principles\n\n**Trust & Security:**\n- Consistent use of security badges and SSL indicators\n- Clear data privacy messaging\n- Professional color scheme avoiding flashy elements\n\n**Data Clarity:**\n- High contrast for numerical data\n- Color-coded performance indicators (green/red)\n- Clean charts with minimal decoration\n- Generous whitespace around financial figures\n\n**Progressive Disclosure:**\n- Dashboard overview with drill-down capabilities\n- Expandable sections for detailed information\n- Contextual help without clutter\n\n**Accessibility:**\n- WCAG 2.1 AA compliance\n- High contrast ratios for all text\n- Screen reader friendly labels for financial data\n- Keyboard navigation support\n\n## Images\n**Hero Section:** Large, professional hero image featuring diverse professionals in a modern office setting or abstract financial growth visualization. Should convey trust and success.\n\n**Dashboard:** Small avatar placeholders for user profiles, company logos for investment holdings, and subtle background patterns for empty states.\n\n**Marketing Pages:** Professional photography of people achieving financial goals, subtle abstract graphics representing growth and security.\n\nThis design framework emphasizes clarity, trust, and professional sophistication essential for financial applications while maintaining modern usability standards.","size_bytes":3391},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"replit.md":{"content":"# Gandharva Investment Management Platform\n\n## Overview\n\nGandharva is a comprehensive investment management platform designed for financial services with three distinct user roles: Admin, Leader, and Client. The application provides portfolio tracking, transaction management, user administration, and detailed financial analytics. Built with a modern React frontend and Node.js/Express backend, it offers role-based access control and comprehensive data management capabilities for investment firms.\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n- **Framework**: React 18 with TypeScript for type safety and modern development\n- **Styling**: Tailwind CSS with shadcn/ui component library for consistent, professional design\n- **Routing**: Wouter for lightweight client-side routing\n- **State Management**: React Query (@tanstack/react-query) for server state management and caching\n- **UI Components**: Comprehensive component library based on Radix UI primitives with custom styling\n- **Theme Support**: Built-in light/dark mode theming with CSS custom properties\n- **Build Tool**: Vite for fast development and optimized production builds\n\n### Backend Architecture\n- **Runtime**: Node.js with Express.js framework\n- **Database ORM**: Drizzle ORM for type-safe database operations\n- **API Design**: RESTful API architecture with standardized endpoints\n- **File Structure**: Monorepo structure with shared schema between client and server\n- **Development**: TypeScript throughout with strict type checking\n\n### Database Design\n- **Primary Database**: PostgreSQL (via Neon serverless)\n- **Schema Management**: Drizzle Kit for migrations and schema management\n- **Core Tables**: \n  - Users (with role-based access: admin/leader/client)\n  - Branches (office locations and management)\n  - Clients (extending users with investment-specific data)\n  - Transactions (investments, withdrawals, payouts, closures)\n  - Portfolio (client investment tracking)\n\n### Role-Based Access Control\n- **Admin Role**: Full system access including user management, branch management, data imports, and system configuration\n- **Leader Role**: Team management with access to team performance metrics, referrals, and commissions\n- **Client Role**: Personal dashboard access with portfolio viewing, withdrawal requests, and payment capabilities\n\n### Design System\n- **Color Palette**: Professional financial services theme with primary blue, success green, and warning red\n- **Typography**: Inter font family for clean, readable financial data presentation\n- **Layout**: Card-based responsive design optimized for both desktop and mobile devices\n- **Component Standards**: Consistent spacing using Tailwind's systematic approach (2, 4, 6, 8, 12, 16 units)\n\n## External Dependencies\n\n### Core Framework Dependencies\n- **React Ecosystem**: React 18, React DOM, React Router (Wouter)\n- **TypeScript**: Full TypeScript implementation across frontend and backend\n- **Build Tools**: Vite for frontend bundling, ESBuild for backend compilation\n\n### UI and Styling\n- **Tailwind CSS**: Utility-first CSS framework with custom configuration\n- **Radix UI**: Comprehensive set of low-level UI primitives (@radix-ui/react-*)\n- **shadcn/ui**: High-quality component library built on Radix primitives\n- **Class Variance Authority**: Utility for creating variant-based component APIs\n- **Lucide React**: Consistent icon library for all UI elements\n\n### Backend Services\n- **Database**: Neon PostgreSQL serverless database (@neondatabase/serverless)\n- **ORM**: Drizzle ORM with PostgreSQL dialect for type-safe database operations\n- **Session Management**: Connect-pg-simple for PostgreSQL-backed session storage\n\n### Development and Tooling\n- **React Query**: Server state management and caching (@tanstack/react-query)\n- **Form Handling**: React Hook Form with Zod validation (@hookform/resolvers)\n- **Date Utilities**: date-fns for consistent date manipulation\n- **Development**: tsx for TypeScript execution, various development utilities\n\n### Chart and Data Visualization\n- **Recharts**: React charting library for financial data visualization\n- **Chart Components**: Line charts, bar charts, and trend analysis displays\n\n### Email and Communication\n- **SendGrid**: Email service integration (@sendgrid/mail) for client notifications and system communications\n\n### Payment Processing\n- **Stripe**: Payment processing integration (@stripe/stripe-js, @stripe/react-stripe-js) for client investment transactions","size_bytes":4555},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".5625rem\", /* 9px */\n        md: \".375rem\", /* 6px */\n        sm: \".1875rem\", /* 3px */\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\"\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":4050},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":971},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\n\nconst app = express();\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"â€¦\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":2066},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport multer from \"multer\";\nimport * as XLSX from \"xlsx\";\nimport { storage } from \"./storage\";\nimport { \n  insertUserSchema, \n  insertBranchSchema,\n  insertClientSchema,\n  insertTransactionSchema,\n  insertPortfolioSchema\n} from \"@shared/schema\";\nimport { z } from \"zod\";\nimport { generateSecurePassword, sendWelcomeEmail } from \"./emailService\";\n\n// Configure multer for file uploads\nconst upload = multer({ \n  storage: multer.memoryStorage(),\n  limits: { fileSize: 10 * 1024 * 1024 }, // 10MB limit\n  fileFilter: (req, file, cb) => {\n    if (file.mimetype === 'application/vnd.ms-excel' || \n        file.mimetype === 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' ||\n        file.originalname.endsWith('.xls') || \n        file.originalname.endsWith('.xlsx')) {\n      cb(null, true);\n    } else {\n      cb(new Error('Only Excel files are allowed'));\n    }\n  }\n});\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Authentication routes\n  app.post('/api/auth/login', async (req, res) => {\n    try {\n      const { email, password } = req.body;\n      \n      // Try to find user by email first, then by mobile\n      let user = await storage.getUserByEmail(email);\n      if (!user) {\n        user = await storage.getUserByMobile(email);\n      }\n      \n      if (!user || user.password !== password) {\n        return res.status(401).json({ error: 'Invalid credentials' });\n      }\n      \n      // Return user without password\n      const { password: _, ...userWithoutPassword } = user;\n      res.json({ user: userWithoutPassword, message: 'Login successful' });\n    } catch (error) {\n      res.status(500).json({ error: 'Internal server error' });\n    }\n  });\n\n  // User routes\n  app.get('/api/users', async (req, res) => {\n    try {\n      const users = await storage.getAllUsers();\n      const usersWithoutPasswords = users.map(({ password, ...user }) => user);\n      res.json(usersWithoutPasswords);\n    } catch (error) {\n      res.status(500).json({ error: 'Internal server error' });\n    }\n  });\n\n  app.get('/api/users/:id', async (req, res) => {\n    try {\n      const user = await storage.getUser(req.params.id);\n      if (!user) {\n        return res.status(404).json({ error: 'User not found' });\n      }\n      const { password, ...userWithoutPassword } = user;\n      res.json(userWithoutPassword);\n    } catch (error) {\n      res.status(500).json({ error: 'Internal server error' });\n    }\n  });\n\n  app.post('/api/users', async (req, res) => {\n    try {\n      const userData = insertUserSchema.parse(req.body);\n      \n      // Check if user with email already exists\n      const existingUserByEmail = await storage.getUserByEmail(userData.email);\n      if (existingUserByEmail) {\n        return res.status(400).json({ error: 'User with this email already exists' });\n      }\n      \n      // Check if user with mobile already exists (if mobile provided)\n      if (userData.mobile) {\n        const existingUserByMobile = await storage.getUserByMobile(userData.mobile);\n        if (existingUserByMobile) {\n          return res.status(400).json({ error: 'User with this mobile already exists' });\n        }\n      }\n      \n      const user = await storage.createUser(userData);\n      const { password, ...userWithoutPassword } = user;\n      res.status(201).json(userWithoutPassword);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ error: 'Validation error', details: error.errors });\n      }\n      res.status(500).json({ error: 'Internal server error' });\n    }\n  });\n\n  app.put('/api/users/:id', async (req, res) => {\n    try {\n      const updates = req.body;\n      const user = await storage.updateUser(req.params.id, updates);\n      if (!user) {\n        return res.status(404).json({ error: 'User not found' });\n      }\n      const { password, ...userWithoutPassword } = user;\n      res.json(userWithoutPassword);\n    } catch (error) {\n      res.status(500).json({ error: 'Internal server error' });\n    }\n  });\n\n  // Branch routes\n  app.get('/api/branches', async (req, res) => {\n    try {\n      const branches = await storage.getAllBranches();\n      res.json(branches);\n    } catch (error) {\n      res.status(500).json({ error: 'Internal server error' });\n    }\n  });\n\n  app.get('/api/branches/:id', async (req, res) => {\n    try {\n      const branch = await storage.getBranch(req.params.id);\n      if (!branch) {\n        return res.status(404).json({ error: 'Branch not found' });\n      }\n      res.json(branch);\n    } catch (error) {\n      res.status(500).json({ error: 'Internal server error' });\n    }\n  });\n\n  app.post('/api/branches', async (req, res) => {\n    try {\n      const branchData = insertBranchSchema.parse(req.body);\n      \n      // Check if branch with code already exists\n      const existingBranch = await storage.getBranchByCode(branchData.code);\n      if (existingBranch) {\n        return res.status(400).json({ error: 'Branch with this code already exists' });\n      }\n      \n      const branch = await storage.createBranch(branchData);\n      res.status(201).json(branch);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ error: 'Validation error', details: error.errors });\n      }\n      res.status(500).json({ error: 'Internal server error' });\n    }\n  });\n\n  app.put('/api/branches/:id', async (req, res) => {\n    try {\n      const updates = req.body;\n      const branch = await storage.updateBranch(req.params.id, updates);\n      if (!branch) {\n        return res.status(404).json({ error: 'Branch not found' });\n      }\n      res.json(branch);\n    } catch (error) {\n      res.status(500).json({ error: 'Internal server error' });\n    }\n  });\n\n  // Secure client creation endpoint\n  app.post('/api/clients/create', async (req, res) => {\n    try {\n      // Define schema for secure client creation (no password from client)\n      const clientCreationSchema = z.object({\n        // User data\n        firstName: z.string().min(1, 'First name is required'),\n        lastName: z.string().min(1, 'Last name is required'),\n        email: z.string().email('Invalid email address'),\n        mobile: z.string().optional(),\n        // Client data\n        clientCode: z.string().min(1, 'Client code is required'),\n        panNumber: z.string().optional(),\n        aadharNumber: z.string().optional(),\n        dateOfBirth: z.string().optional().transform(val => val ? new Date(val) : null),\n        address: z.string().optional(),\n        nomineeDetails: z.string().optional(),\n        bankDetails: z.string().optional(),\n        kycStatus: z.enum(['pending', 'verified', 'rejected']).default('pending')\n      });\n\n      const data = clientCreationSchema.parse(req.body);\n      \n      // Check if user with email already exists\n      const existingUserByEmail = await storage.getUserByEmail(data.email);\n      if (existingUserByEmail) {\n        return res.status(400).json({ error: 'User with this email already exists' });\n      }\n      \n      // Check if user with mobile already exists (if mobile provided)\n      if (data.mobile) {\n        const existingUserByMobile = await storage.getUserByMobile(data.mobile);\n        if (existingUserByMobile) {\n          return res.status(400).json({ error: 'User with this mobile already exists' });\n        }\n      }\n      \n      // Check if client code already exists\n      const existingClient = await storage.getClientByCode(data.clientCode);\n      if (existingClient) {\n        return res.status(400).json({ error: 'Client with this code already exists' });\n      }\n      \n      // Generate secure password server-side\n      const temporaryPassword = generateSecurePassword();\n      \n      // Create user first\n      const userData = {\n        firstName: data.firstName,\n        lastName: data.lastName,\n        email: data.email,\n        mobile: data.mobile || null,\n        password: temporaryPassword,\n        role: 'client' as const\n      };\n      \n      const user = await storage.createUser(userData);\n      \n      // Create client record\n      const clientData = {\n        userId: user.id,\n        clientCode: data.clientCode,\n        panNumber: data.panNumber || null,\n        aadharNumber: data.aadharNumber || null,\n        dateOfBirth: data.dateOfBirth || null,\n        address: data.address || null,\n        nomineeDetails: data.nomineeDetails || null,\n        bankDetails: data.bankDetails || null,\n        kycStatus: data.kycStatus\n      };\n      \n      const client = await storage.createClient(clientData);\n      \n      // Send welcome email with temporary password\n      const emailSent = await sendWelcomeEmail(\n        user.email,\n        `${user.firstName} ${user.lastName}`,\n        temporaryPassword\n      );\n      \n      // Return success response (no password in response)\n      const { password: _, ...userWithoutPassword } = user;\n      res.status(201).json({\n        user: userWithoutPassword,\n        client,\n        emailSent,\n        message: emailSent \n          ? 'Client created successfully. Welcome email sent with temporary password.'\n          : 'Client created successfully. Please provide temporary password manually.'\n      });\n      \n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ \n          error: 'Validation error', \n          details: error.errors.map(e => ({ field: e.path.join('.'), message: e.message }))\n        });\n      }\n      console.error('Client creation error:', error);\n      res.status(500).json({ error: 'Internal server error' });\n    }\n  });\n\n  // Client routes\n  app.get('/api/clients', async (req, res) => {\n    try {\n      const clients = await storage.getAllClients();\n      // Also fetch user details for each client\n      const clientsWithUsers = await Promise.all(\n        clients.map(async (client) => {\n          const user = await storage.getUser(client.userId);\n          return {\n            ...client,\n            user: user ? { \n              firstName: user.firstName, \n              lastName: user.lastName, \n              email: user.email, \n              mobile: user.mobile \n            } : null\n          };\n        })\n      );\n      res.json(clientsWithUsers);\n    } catch (error) {\n      res.status(500).json({ error: 'Internal server error' });\n    }\n  });\n\n  // Get client by user ID\n  app.get('/api/clients/user/:userId', async (req, res) => {\n    try {\n      const { userId } = req.params;\n      const client = await storage.getClientByUserId(userId);\n      if (!client) {\n        return res.status(404).json({ error: 'Client not found' });\n      }\n      res.json(client);\n    } catch (error) {\n      res.status(500).json({ error: 'Internal server error' });\n    }\n  });\n\n  // Get transactions for a specific client with optional type filter\n  app.get('/api/clients/:clientId/transactions', async (req, res) => {\n    try {\n      const { clientId } = req.params;\n      const { type } = req.query;\n      \n      let transactions = await storage.getTransactionsByClient(clientId);\n      \n      // Filter by type if specified\n      if (type) {\n        transactions = transactions.filter(txn => txn.type === type);\n      }\n      \n      res.json(transactions);\n    } catch (error) {\n      res.status(500).json({ error: 'Internal server error' });\n    }\n  });\n\n  app.get('/api/clients/:id', async (req, res) => {\n    try {\n      const client = await storage.getClient(req.params.id);\n      if (!client) {\n        return res.status(404).json({ error: 'Client not found' });\n      }\n      \n      // Fetch user details\n      const user = await storage.getUser(client.userId);\n      const clientWithUser = {\n        ...client,\n        user: user ? {\n          firstName: user.firstName,\n          lastName: user.lastName,\n          email: user.email,\n          mobile: user.mobile\n        } : null\n      };\n      \n      res.json(clientWithUser);\n    } catch (error) {\n      res.status(500).json({ error: 'Internal server error' });\n    }\n  });\n\n  app.post('/api/clients', async (req, res) => {\n    try {\n      const clientData = insertClientSchema.parse(req.body);\n      \n      // Check if client code already exists\n      const existingClient = await storage.getClientByCode(clientData.clientCode);\n      if (existingClient) {\n        return res.status(400).json({ error: 'Client with this code already exists' });\n      }\n      \n      const client = await storage.createClient(clientData);\n      res.status(201).json(client);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ error: 'Validation error', details: error.errors });\n      }\n      res.status(500).json({ error: 'Internal server error' });\n    }\n  });\n\n  app.put('/api/clients/:id', async (req, res) => {\n    try {\n      // Validate and transform client update data\n      const clientUpdateSchema = z.object({\n        panNumber: z.string().optional().nullable(),\n        aadharNumber: z.string().optional().nullable(),\n        dateOfBirth: z.string().optional().nullable().transform(val => {\n          if (!val || val === '') return null;\n          const date = new Date(val);\n          return isNaN(date.getTime()) ? null : date;\n        }),\n        address: z.string().optional().nullable(),\n        nomineeDetails: z.string().optional().nullable(),\n        bankDetails: z.string().optional().nullable(),\n        kycStatus: z.enum(['pending', 'verified', 'rejected']).optional()\n      });\n\n      const validatedUpdates = clientUpdateSchema.parse(req.body);\n      const client = await storage.updateClient(req.params.id, validatedUpdates);\n      if (!client) {\n        return res.status(404).json({ error: 'Client not found' });\n      }\n      res.json(client);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ error: 'Validation error', details: error.errors });\n      }\n      console.error('Client update error:', error);\n      res.status(500).json({ error: 'Internal server error' });\n    }\n  });\n\n  // Transaction routes\n  app.get('/api/transactions', async (req, res) => {\n    try {\n      const { clientId, type } = req.query;\n      let transactions = await storage.getAllTransactions();\n      \n      if (clientId) {\n        transactions = transactions.filter(t => t.clientId === clientId);\n      }\n      \n      if (type) {\n        transactions = transactions.filter(t => t.type === type);\n      }\n      \n      // Fetch client and user details for each transaction\n      const transactionsWithDetails = await Promise.all(\n        transactions.map(async (transaction) => {\n          const client = await storage.getClient(transaction.clientId);\n          let clientDetails = null;\n          if (client) {\n            const user = await storage.getUser(client.userId);\n            clientDetails = {\n              ...client,\n              user: user ? {\n                firstName: user.firstName,\n                lastName: user.lastName,\n                email: user.email,\n                mobile: user.mobile\n              } : null\n            };\n          }\n          return {\n            ...transaction,\n            client: clientDetails\n          };\n        })\n      );\n      \n      res.json(transactionsWithDetails);\n    } catch (error) {\n      res.status(500).json({ error: 'Internal server error' });\n    }\n  });\n\n  app.get('/api/transactions/:id', async (req, res) => {\n    try {\n      const transaction = await storage.getTransaction(req.params.id);\n      if (!transaction) {\n        return res.status(404).json({ error: 'Transaction not found' });\n      }\n      res.json(transaction);\n    } catch (error) {\n      res.status(500).json({ error: 'Internal server error' });\n    }\n  });\n\n  app.post('/api/transactions', async (req, res) => {\n    try {\n      const transactionData = insertTransactionSchema.parse(req.body);\n      const transaction = await storage.createTransaction(transactionData);\n      res.status(201).json(transaction);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ error: 'Validation error', details: error.errors });\n      }\n      res.status(500).json({ error: 'Internal server error' });\n    }\n  });\n\n  app.put('/api/transactions/:id', async (req, res) => {\n    try {\n      const updates = req.body;\n      const transaction = await storage.updateTransaction(req.params.id, updates);\n      if (!transaction) {\n        return res.status(404).json({ error: 'Transaction not found' });\n      }\n      res.json(transaction);\n    } catch (error) {\n      res.status(500).json({ error: 'Internal server error' });\n    }\n  });\n\n  // File upload endpoint for bulk transaction import\n  app.post('/api/transactions/upload', upload.single('file'), async (req, res) => {\n    try {\n      if (!req.file) {\n        return res.status(400).json({ error: 'No file uploaded' });\n      }\n\n      const { type } = req.body;\n      if (!type || !['investment', 'withdrawal', 'payout', 'closure'].includes(type)) {\n        return res.status(400).json({ error: 'Invalid transaction type' });\n      }\n\n      // Parse Excel file\n      const workbook = XLSX.read(req.file.buffer, { type: 'buffer' });\n      const sheetName = workbook.SheetNames[0];\n      const worksheet = workbook.Sheets[sheetName];\n      const data = XLSX.utils.sheet_to_json(worksheet);\n\n      if (!data || data.length === 0) {\n        return res.status(400).json({ error: 'No data found in the uploaded file' });\n      }\n\n      // Define expected fields for each transaction type\n      const fieldMappings = {\n        investment: [\"Client PAN No\", \"Investment Date\", \"Investment No\", \"Investment Details\", \"Amount\"],\n        withdrawal: [\"Client PAN No\", \"Withdrawal Date\", \"Withdrawal No\", \"Withdrawal Details\", \"Amount\"],\n        payout: [\"Client PAN No\", \"Payout Date\", \"Payout No\", \"Payout Details\", \"Amount\"],\n        closure: [\"Client PAN No\", \"Closure Date\", \"Closure No\", \"Closure Details\", \"Amount\"]\n      };\n\n      const expectedFields = fieldMappings[type as keyof typeof fieldMappings];\n      const errors: Array<{ row: number; message: string }> = [];\n      let processed = 0;\n\n      // Process each row\n      for (let i = 0; i < data.length; i++) {\n        const row = data[i] as any;\n        const rowIndex = i + 2; // Excel rows start from 1, plus header row\n\n        try {\n          // Validate required fields\n          const missingFields = expectedFields.filter(field => !row[field] || row[field].toString().trim() === '');\n          if (missingFields.length > 0) {\n            errors.push({ row: rowIndex, message: `Missing required fields: ${missingFields.join(', ')}` });\n            continue;\n          }\n\n          // Validate amount is a number\n          const amount = parseFloat(row.Amount);\n          if (isNaN(amount) || amount <= 0) {\n            errors.push({ row: rowIndex, message: 'Amount must be a valid positive number' });\n            continue;\n          }\n\n          // Find client by PAN\n          const clients = await storage.getAllClients();\n          const client = clients.find(c => c.panNumber === row[\"Client PAN No\"]);\n          if (!client) {\n            errors.push({ row: rowIndex, message: `Client with PAN ${row[\"Client PAN No\"]} not found` });\n            continue;\n          }\n\n          // Parse date properly - Excel dates can be serial numbers\n          const dateField = row[`${type.charAt(0).toUpperCase() + type.slice(1)} Date`];\n          let processedDate: Date;\n          \n          if (typeof dateField === 'number') {\n            // Excel serial date number - convert to proper date\n            // Excel dates start from 1900-01-01 (serial number 1)\n            // JavaScript dates start from 1970-01-01, so we need to adjust\n            processedDate = new Date((dateField - 25569) * 86400 * 1000);\n          } else if (typeof dateField === 'string') {\n            // String date - try to parse normally\n            processedDate = new Date(dateField);\n          } else {\n            // Fallback to current date if no valid date found\n            processedDate = new Date();\n          }\n          \n          // Validate the parsed date\n          if (isNaN(processedDate.getTime())) {\n            processedDate = new Date(); // Fallback to current date\n          }\n\n          // Create transaction based on type\n          const transactionData = {\n            clientId: client.id,\n            type: type,\n            amount: amount,\n            method: 'bank_transfer', // Default method for uploaded transactions\n            status: 'completed' as const,\n            description: row[`${type.charAt(0).toUpperCase() + type.slice(1)} Details`] || '',\n            referenceNumber: row[`${type.charAt(0).toUpperCase() + type.slice(1)} No`] || '',\n            processedAt: processedDate\n          };\n\n          const transaction = await storage.createTransaction(transactionData);\n\n          processed++;\n        } catch (error) {\n          errors.push({ row: rowIndex, message: `Processing error: ${(error as Error).message}` });\n        }\n      }\n\n      // Return results\n      const success = errors.length === 0;\n      const message = success \n        ? `Successfully processed ${processed} ${type} transactions` \n        : `Processed ${processed} transactions with ${errors.length} errors`;\n\n      res.json({\n        success,\n        message,\n        processed,\n        errors: errors.slice(0, 10) // Limit errors to first 10\n      });\n\n    } catch (error) {\n      console.error('File upload error:', error);\n      res.status(500).json({ error: 'Failed to process file upload' });\n    }\n  });\n\n  // Portfolio routes\n  app.get('/api/portfolios', async (req, res) => {\n    try {\n      const { clientId } = req.query;\n      let portfolios = await storage.getAllPortfolios();\n      \n      if (clientId) {\n        portfolios = portfolios.filter(p => p.clientId === clientId);\n      }\n      \n      res.json(portfolios);\n    } catch (error) {\n      res.status(500).json({ error: 'Internal server error' });\n    }\n  });\n\n  app.post('/api/portfolios', async (req, res) => {\n    try {\n      const portfolioData = insertPortfolioSchema.parse(req.body);\n      const portfolio = await storage.createPortfolio(portfolioData);\n      res.status(201).json(portfolio);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ error: 'Validation error', details: error.errors });\n      }\n      res.status(500).json({ error: 'Internal server error' });\n    }\n  });\n\n  const httpServer = createServer(app);\n\n  return httpServer;\n}\n","size_bytes":22647},"server/storage.ts":{"content":"import {\n  type User,\n  type InsertUser,\n  type Branch,\n  type InsertBranch,\n  type Client,\n  type InsertClient,\n  type Transaction,\n  type InsertTransaction,\n  type Portfolio,\n  type InsertPortfolio,\n  users,\n  branches,\n  clients,\n  transactions,\n  portfolios,\n} from \"@shared/schema\";\nimport { db } from \"./db\";\nimport { eq, and } from \"drizzle-orm\";\nimport { randomUUID } from \"crypto\";\n\n// modify the interface with any CRUD methods\n// you might need\n\nexport interface IStorage {\n  // Users\n  getUser(id: string): Promise<User | undefined>;\n  getUserByEmail(email: string): Promise<User | undefined>;\n  getUserByMobile(mobile: string): Promise<User | undefined>;\n  createUser(user: InsertUser): Promise<User>;\n  updateUser(id: string, user: Partial<InsertUser>): Promise<User | undefined>;\n  getAllUsers(): Promise<User[]>;\n\n  // Branches\n  getBranch(id: string): Promise<Branch | undefined>;\n  getBranchByCode(code: string): Promise<Branch | undefined>;\n  createBranch(branch: InsertBranch): Promise<Branch>;\n  updateBranch(\n    id: string,\n    branch: Partial<InsertBranch>,\n  ): Promise<Branch | undefined>;\n  getAllBranches(): Promise<Branch[]>;\n\n  // Clients\n  getClient(id: string): Promise<Client | undefined>;\n  getClientByUserId(userId: string): Promise<Client | undefined>;\n  getClientByCode(clientCode: string): Promise<Client | undefined>;\n  createClient(client: InsertClient): Promise<Client>;\n  updateClient(\n    id: string,\n    client: Partial<InsertClient>,\n  ): Promise<Client | undefined>;\n  getAllClients(): Promise<Client[]>;\n\n  // Transactions\n  getTransaction(id: string): Promise<Transaction | undefined>;\n  getTransactionsByClient(clientId: string): Promise<Transaction[]>;\n  createTransaction(transaction: InsertTransaction): Promise<Transaction>;\n  updateTransaction(\n    id: string,\n    transaction: Partial<InsertTransaction>,\n  ): Promise<Transaction | undefined>;\n  getAllTransactions(): Promise<Transaction[]>;\n\n  // Portfolio\n  getPortfolio(id: string): Promise<Portfolio | undefined>;\n  getPortfolioByClient(clientId: string): Promise<Portfolio[]>;\n  createPortfolio(portfolio: InsertPortfolio): Promise<Portfolio>;\n  updatePortfolio(\n    id: string,\n    portfolio: Partial<InsertPortfolio>,\n  ): Promise<Portfolio | undefined>;\n  getAllPortfolios(): Promise<Portfolio[]>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  constructor() {\n    // Initialize with mock data on first run\n    this.initializeMockData();\n  }\n\n  private async initializeMockData() {\n    try {\n      // Check if we already have data\n      const existingUsers = await db.select().from(users).limit(1);\n      if (existingUsers.length > 0) {\n        return; // Data already exists\n      }\n\n      // Create mock branches\n      const [mainBranch] = await db.insert(branches).values({\n        name: \"Main Branch\",\n        code: \"MB001\",\n        address: \"123 Business District, City\",\n        phone: \"+91-9876543210\",\n        email: \"main@gandharva.com\",\n        manager: \"John Manager\",\n      }).returning();\n\n      // Create mock users\n      const [adminUser] = await db.insert(users).values({\n        email: \"admin@gandharva.com\",\n        mobile: \"9876543210\",\n        password: \"admin123\",\n        role: \"admin\",\n        firstName: \"Admin\",\n        lastName: \"User\",\n        branchId: mainBranch.id,\n        isActive: true,\n      }).returning();\n\n      const [leaderUser] = await db.insert(users).values({\n        email: \"leader@gandharva.com\",\n        mobile: \"9876543211\",\n        password: \"leader123\",\n        role: \"leader\",\n        firstName: \"Leader\",\n        lastName: \"User\",\n        branchId: mainBranch.id,\n        isActive: true,\n      }).returning();\n\n      const [clientUser] = await db.insert(users).values({\n        email: \"client@gandharva.com\",\n        mobile: \"9876543212\",\n        password: \"client123\",\n        role: \"client\",\n        firstName: \"Client\",\n        lastName: \"User\",\n        branchId: mainBranch.id,\n        isActive: true,\n      }).returning();\n\n      // Create a sample client\n      await db.insert(clients).values({\n        userId: clientUser.id,\n        clientCode: \"CLI001\",\n        panNumber: \"ABCDE1234F\",\n        aadharNumber: \"123456789012\",\n        address: \"456 Client Street, City\",\n        kycStatus: \"verified\",\n      }).returning();\n\n      console.log(\"Mock data initialized successfully\");\n    } catch (error) {\n      console.error(\"Error initializing mock data:\", error);\n    }\n  }\n\n  // Users\n  async getUser(id: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.id, id));\n    return user || undefined;\n  }\n\n  async getUserByEmail(email: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.email, email));\n    return user || undefined;\n  }\n\n  async getUserByMobile(mobile: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.mobile, mobile));\n    return user || undefined;\n  }\n\n  async createUser(userData: InsertUser): Promise<User> {\n    const [user] = await db.insert(users).values(userData).returning();\n    return user;\n  }\n\n  async updateUser(id: string, userData: Partial<InsertUser>): Promise<User | undefined> {\n    const [user] = await db.update(users).set(userData).where(eq(users.id, id)).returning();\n    return user || undefined;\n  }\n\n  async getAllUsers(): Promise<User[]> {\n    return db.select().from(users);\n  }\n\n  // Branches\n  async getBranch(id: string): Promise<Branch | undefined> {\n    const [branch] = await db.select().from(branches).where(eq(branches.id, id));\n    return branch || undefined;\n  }\n\n  async getBranchByCode(code: string): Promise<Branch | undefined> {\n    const [branch] = await db.select().from(branches).where(eq(branches.code, code));\n    return branch || undefined;\n  }\n\n  async createBranch(branchData: InsertBranch): Promise<Branch> {\n    const [branch] = await db.insert(branches).values(branchData).returning();\n    return branch;\n  }\n\n  async updateBranch(id: string, branchData: Partial<InsertBranch>): Promise<Branch | undefined> {\n    const [branch] = await db.update(branches).set(branchData).where(eq(branches.id, id)).returning();\n    return branch || undefined;\n  }\n\n  async getAllBranches(): Promise<Branch[]> {\n    return db.select().from(branches);\n  }\n\n  // Clients\n  async getClient(id: string): Promise<Client | undefined> {\n    const [client] = await db.select().from(clients).where(eq(clients.id, id));\n    return client || undefined;\n  }\n\n  async getClientByUserId(userId: string): Promise<Client | undefined> {\n    const [client] = await db.select().from(clients).where(eq(clients.userId, userId));\n    return client || undefined;\n  }\n\n  async getClientByCode(clientCode: string): Promise<Client | undefined> {\n    const [client] = await db.select().from(clients).where(eq(clients.clientCode, clientCode));\n    return client || undefined;\n  }\n\n  async createClient(clientData: InsertClient): Promise<Client> {\n    const [client] = await db.insert(clients).values(clientData).returning();\n    return client;\n  }\n\n  async updateClient(id: string, clientData: Partial<InsertClient>): Promise<Client | undefined> {\n    const [client] = await db.update(clients).set(clientData).where(eq(clients.id, id)).returning();\n    return client || undefined;\n  }\n\n  async getAllClients(): Promise<Client[]> {\n    return db.select().from(clients);\n  }\n\n  // Transactions\n  async getTransaction(id: string): Promise<Transaction | undefined> {\n    const [transaction] = await db.select().from(transactions).where(eq(transactions.id, id));\n    return transaction || undefined;\n  }\n\n  async getTransactionsByClient(clientId: string): Promise<Transaction[]> {\n    return db.select().from(transactions).where(eq(transactions.clientId, clientId));\n  }\n\n  async createTransaction(transactionData: InsertTransaction): Promise<Transaction> {\n    const [transaction] = await db.insert(transactions).values({\n      ...transactionData,\n      method: transactionData.method || 'bank_transfer', // Provide default\n    }).returning();\n    return transaction;\n  }\n\n  async updateTransaction(id: string, transactionData: Partial<InsertTransaction>): Promise<Transaction | undefined> {\n    const [transaction] = await db.update(transactions).set(transactionData).where(eq(transactions.id, id)).returning();\n    return transaction || undefined;\n  }\n\n  async getAllTransactions(): Promise<Transaction[]> {\n    return db.select().from(transactions);\n  }\n\n  // Portfolios\n  async getPortfolio(id: string): Promise<Portfolio | undefined> {\n    const [portfolio] = await db.select().from(portfolios).where(eq(portfolios.id, id));\n    return portfolio || undefined;\n  }\n\n  async getPortfolioByClient(clientId: string): Promise<Portfolio[]> {\n    return db.select().from(portfolios).where(eq(portfolios.clientId, clientId));\n  }\n\n  async createPortfolio(portfolioData: InsertPortfolio): Promise<Portfolio> {\n    const [portfolio] = await db.insert(portfolios).values(portfolioData).returning();\n    return portfolio;\n  }\n\n  async updatePortfolio(id: string, portfolioData: Partial<InsertPortfolio>): Promise<Portfolio | undefined> {\n    const [portfolio] = await db.update(portfolios).set(portfolioData).where(eq(portfolios.id, id)).returning();\n    return portfolio || undefined;\n  }\n\n  async getAllPortfolios(): Promise<Portfolio[]> {\n    return db.select().from(portfolios);\n  }\n}\n\nexport class MemStorage implements IStorage {\n  private users: Map<string, User>;\n  private branches: Map<string, Branch>;\n  private clients: Map<string, Client>;\n  private transactions: Map<string, Transaction>;\n  private portfolios: Map<string, Portfolio>;\n\n  constructor() {\n    this.users = new Map();\n    this.branches = new Map();\n    this.clients = new Map();\n    this.transactions = new Map();\n    this.portfolios = new Map();\n\n    // Initialize with some mock data\n    this.initializeMockData();\n  }\n\n  private async initializeMockData() {\n    // Create mock branches\n    const mainBranch = await this.createBranch({\n      name: \"Main Branch\",\n      code: \"MB001\",\n      address: \"123 Business District, City\",\n      phone: \"+91-9876543210\",\n      email: \"main@gandharva.com\",\n      manager: \"John Manager\",\n    });\n\n    // Create mock users\n    const adminUser = await this.createUser({\n      email: \"admin@gandharva.com\",\n      mobile: \"9876543210\",\n      password: \"admin123\",\n      role: \"admin\",\n      firstName: \"Admin\",\n      lastName: \"User\",\n      branchId: mainBranch.id,\n      isActive: true,\n    });\n\n    const leaderUser = await this.createUser({\n      email: \"leader@gandharva.com\",\n      mobile: \"9876543211\",\n      password: \"leader123\",\n      role: \"leader\",\n      firstName: \"Leader\",\n      lastName: \"User\",\n      branchId: mainBranch.id,\n      isActive: true,\n    });\n\n    const clientUser = await this.createUser({\n      email: \"client@gandharva.com\",\n      mobile: \"9876543212\",\n      password: \"client123\",\n      role: \"client\",\n      firstName: \"John\",\n      lastName: \"Client\",\n      branchId: mainBranch.id,\n      isActive: true,\n    });\n\n    // Create mock client profile\n    const mockClient = await this.createClient({\n      userId: clientUser.id,\n      clientCode: \"CL001\",\n      panNumber: \"XXXXX0001X\",\n      aadharNumber: \"123456789012\",\n      address: \"456 Client Street, City\",\n      kycStatus: \"verified\",\n      totalInvestment: \"50000.00\",\n      currentValue: \"52500.00\",\n    });\n\n    // Create mock transactions\n    await this.createTransaction({\n      clientId: mockClient.id,\n      type: \"investment\",\n      amount: \"25000.00\",\n      method: \"bank_transfer\",\n      status: \"completed\",\n      description: \"Initial investment\",\n      referenceNumber: \"TXN001\",\n      processedBy: adminUser.id,\n    });\n\n    await this.createTransaction({\n      clientId: mockClient.id,\n      type: \"investment\",\n      amount: \"25000.00\",\n      method: \"upi\",\n      status: \"completed\",\n      description: \"Additional investment\",\n      referenceNumber: \"TXN002\",\n      processedBy: leaderUser.id,\n    });\n  }\n\n  // User methods\n  async getUser(id: string): Promise<User | undefined> {\n    return this.users.get(id);\n  }\n\n  async getUserByEmail(email: string): Promise<User | undefined> {\n    return Array.from(this.users.values()).find((user) => user.email === email);\n  }\n\n  async getUserByMobile(mobile: string): Promise<User | undefined> {\n    return Array.from(this.users.values()).find(\n      (user) => user.mobile === mobile,\n    );\n  }\n\n  async createUser(insertUser: InsertUser): Promise<User> {\n    const id = randomUUID();\n    const user: User = {\n      ...insertUser,\n      mobile: insertUser.mobile || null,\n      branchId: insertUser.branchId || null,\n      isActive: insertUser.isActive ?? true,\n      id,\n      createdAt: new Date(),\n    };\n    this.users.set(id, user);\n    return user;\n  }\n\n  async updateUser(\n    id: string,\n    updateUser: Partial<InsertUser>,\n  ): Promise<User | undefined> {\n    const user = this.users.get(id);\n    if (!user) return undefined;\n    const updated = { ...user, ...updateUser };\n    this.users.set(id, updated);\n    return updated;\n  }\n\n  async getAllUsers(): Promise<User[]> {\n    return Array.from(this.users.values());\n  }\n\n  // Branch methods\n  async getBranch(id: string): Promise<Branch | undefined> {\n    return this.branches.get(id);\n  }\n\n  async getBranchByCode(code: string): Promise<Branch | undefined> {\n    return Array.from(this.branches.values()).find(\n      (branch) => branch.code === code,\n    );\n  }\n\n  async createBranch(insertBranch: InsertBranch): Promise<Branch> {\n    const id = randomUUID();\n    const branch: Branch = {\n      ...insertBranch,\n      phone: insertBranch.phone || null,\n      email: insertBranch.email || null,\n      manager: insertBranch.manager || null,\n      id,\n      createdAt: new Date(),\n    };\n    this.branches.set(id, branch);\n    return branch;\n  }\n\n  async updateBranch(\n    id: string,\n    updateBranch: Partial<InsertBranch>,\n  ): Promise<Branch | undefined> {\n    const branch = this.branches.get(id);\n    if (!branch) return undefined;\n    const updated = { ...branch, ...updateBranch };\n    this.branches.set(id, updated);\n    return updated;\n  }\n\n  async getAllBranches(): Promise<Branch[]> {\n    return Array.from(this.branches.values());\n  }\n\n  // Client methods\n  async getClient(id: string): Promise<Client | undefined> {\n    return this.clients.get(id);\n  }\n\n  async getClientByUserId(userId: string): Promise<Client | undefined> {\n    return Array.from(this.clients.values()).find(\n      (client) => client.userId === userId,\n    );\n  }\n\n  async getClientByCode(clientCode: string): Promise<Client | undefined> {\n    return Array.from(this.clients.values()).find(\n      (client) => client.clientCode === clientCode,\n    );\n  }\n\n  async createClient(insertClient: InsertClient): Promise<Client> {\n    const id = randomUUID();\n    const client: Client = {\n      ...insertClient,\n      panNumber: insertClient.panNumber || null,\n      aadharNumber: insertClient.aadharNumber || null,\n      dateOfBirth: insertClient.dateOfBirth || null,\n      address: insertClient.address || null,\n      nomineeDetails: insertClient.nomineeDetails || null,\n      bankDetails: insertClient.bankDetails || null,\n      kycStatus: insertClient.kycStatus || \"pending\",\n      totalInvestment: insertClient.totalInvestment || \"0\",\n      currentValue: insertClient.currentValue || \"0\",\n      id,\n      createdAt: new Date(),\n    };\n    this.clients.set(id, client);\n    return client;\n  }\n\n  async updateClient(\n    id: string,\n    updateClient: Partial<InsertClient>,\n  ): Promise<Client | undefined> {\n    const client = this.clients.get(id);\n    if (!client) return undefined;\n    const updated = { ...client, ...updateClient };\n    this.clients.set(id, updated);\n    return updated;\n  }\n\n  async getAllClients(): Promise<Client[]> {\n    return Array.from(this.clients.values());\n  }\n\n  // Transaction methods\n  async getTransaction(id: string): Promise<Transaction | undefined> {\n    return this.transactions.get(id);\n  }\n\n  async getTransactionsByClient(clientId: string): Promise<Transaction[]> {\n    return Array.from(this.transactions.values()).filter(\n      (txn) => txn.clientId === clientId,\n    );\n  }\n\n  async createTransaction(\n    insertTransaction: InsertTransaction,\n  ): Promise<Transaction> {\n    const id = randomUUID();\n    const transaction: Transaction = {\n      ...insertTransaction,\n      status: insertTransaction.status || \"pending\",\n      description: insertTransaction.description || null,\n      referenceNumber: insertTransaction.referenceNumber || null,\n      processedBy: insertTransaction.processedBy || null,\n      id,\n      createdAt: new Date(),\n      processedAt: insertTransaction.status === \"completed\" ? new Date() : null,\n    };\n    this.transactions.set(id, transaction);\n    return transaction;\n  }\n\n  async updateTransaction(\n    id: string,\n    updateTransaction: Partial<InsertTransaction>,\n  ): Promise<Transaction | undefined> {\n    const transaction = this.transactions.get(id);\n    if (!transaction) return undefined;\n    const updated = { ...transaction, ...updateTransaction };\n    if (updated.status === \"completed\" && !updated.processedAt) {\n      updated.processedAt = new Date();\n    }\n    this.transactions.set(id, updated);\n    return updated;\n  }\n\n  async getAllTransactions(): Promise<Transaction[]> {\n    return Array.from(this.transactions.values());\n  }\n\n  // Portfolio methods\n  async getPortfolio(id: string): Promise<Portfolio | undefined> {\n    return this.portfolios.get(id);\n  }\n\n  async getPortfolioByClient(clientId: string): Promise<Portfolio[]> {\n    return Array.from(this.portfolios.values()).filter(\n      (portfolio) => portfolio.clientId === clientId,\n    );\n  }\n\n  async createPortfolio(insertPortfolio: InsertPortfolio): Promise<Portfolio> {\n    const id = randomUUID();\n    const portfolio: Portfolio = {\n      ...insertPortfolio,\n      quantity: insertPortfolio.quantity || null,\n      currentPrice: insertPortfolio.currentPrice || null,\n      currentValue: insertPortfolio.currentValue || null,\n      gainLoss: insertPortfolio.gainLoss || null,\n      gainLossPercentage: insertPortfolio.gainLossPercentage || null,\n      id,\n      updatedAt: new Date(),\n    };\n    this.portfolios.set(id, portfolio);\n    return portfolio;\n  }\n\n  async updatePortfolio(\n    id: string,\n    updatePortfolio: Partial<InsertPortfolio>,\n  ): Promise<Portfolio | undefined> {\n    const portfolio = this.portfolios.get(id);\n    if (!portfolio) return undefined;\n    const updated = { ...portfolio, ...updatePortfolio, updatedAt: new Date() };\n    this.portfolios.set(id, updated);\n    return updated;\n  }\n\n  async getAllPortfolios(): Promise<Portfolio[]> {\n    return Array.from(this.portfolios.values());\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","size_bytes":18871},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2263},"shared/schema.ts":{"content":"import { sql, relations } from \"drizzle-orm\";\nimport { pgTable, text, varchar, decimal, timestamp, integer, boolean } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\n// Branches table\nexport const branches = pgTable(\"branches\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: text(\"name\").notNull(),\n  code: text(\"code\").notNull().unique(),\n  address: text(\"address\").notNull(),\n  phone: text(\"phone\"),\n  email: text(\"email\"),\n  manager: text(\"manager\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Users table with roles\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  email: text(\"email\").notNull().unique(),\n  mobile: text(\"mobile\").unique(),\n  password: text(\"password\").notNull(),\n  role: text(\"role\").notNull(), // 'admin', 'leader', 'client'\n  firstName: text(\"first_name\").notNull(),\n  lastName: text(\"last_name\").notNull(),\n  branchId: varchar(\"branch_id\").references(() => branches.id),\n  isActive: boolean(\"is_active\").default(true),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Clients table (extends users)\nexport const clients = pgTable(\"clients\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").references(() => users.id).notNull(),\n  clientCode: text(\"client_code\").notNull().unique(),\n  panNumber: text(\"pan_number\"),\n  aadharNumber: text(\"aadhar_number\"),\n  dateOfBirth: timestamp(\"date_of_birth\"),\n  address: text(\"address\"),\n  nomineeDetails: text(\"nominee_details\"),\n  bankDetails: text(\"bank_details\"),\n  kycStatus: text(\"kyc_status\").default('pending'), // 'pending', 'verified', 'rejected'\n  totalInvestment: decimal(\"total_investment\", { precision: 15, scale: 2 }).default('0'),\n  currentValue: decimal(\"current_value\", { precision: 15, scale: 2 }).default('0'),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Transactions table\nexport const transactions = pgTable(\"transactions\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  clientId: varchar(\"client_id\").references(() => clients.id).notNull(),\n  type: text(\"type\").notNull(), // 'investment', 'withdrawal', 'payout', 'closure'\n  amount: decimal(\"amount\", { precision: 15, scale: 2 }).notNull(),\n  method: text(\"method\").notNull(), // 'cash', 'bank_transfer', 'upi', 'cheque'\n  status: text(\"status\").notNull().default('pending'), // 'pending', 'completed', 'failed', 'cancelled'\n  description: text(\"description\"),\n  referenceNumber: text(\"reference_number\"),\n  processedBy: varchar(\"processed_by\").references(() => users.id),\n  processedAt: timestamp(\"processed_at\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Portfolio table for client investments\nexport const portfolios = pgTable(\"portfolios\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  clientId: varchar(\"client_id\").references(() => clients.id).notNull(),\n  instrumentType: text(\"instrument_type\").notNull(), // 'equity', 'mutual_fund', 'bond', 'fd'\n  instrumentName: text(\"instrument_name\").notNull(),\n  quantity: decimal(\"quantity\", { precision: 15, scale: 4 }),\n  purchasePrice: decimal(\"purchase_price\", { precision: 15, scale: 2 }).notNull(),\n  currentPrice: decimal(\"current_price\", { precision: 15, scale: 2 }),\n  totalInvested: decimal(\"total_invested\", { precision: 15, scale: 2 }).notNull(),\n  currentValue: decimal(\"current_value\", { precision: 15, scale: 2 }),\n  gainLoss: decimal(\"gain_loss\", { precision: 15, scale: 2 }),\n  gainLossPercentage: decimal(\"gain_loss_percentage\", { precision: 5, scale: 2 }),\n  purchaseDate: timestamp(\"purchase_date\").notNull(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Insert schemas\nexport const insertBranchSchema = createInsertSchema(branches).omit({ id: true, createdAt: true });\nexport const insertUserSchema = createInsertSchema(users).omit({ id: true, createdAt: true });\nexport const insertClientSchema = createInsertSchema(clients).omit({ id: true, createdAt: true });\nexport const insertTransactionSchema = createInsertSchema(transactions).omit({ id: true, createdAt: true, processedAt: true });\nexport const insertPortfolioSchema = createInsertSchema(portfolios).omit({ id: true, updatedAt: true });\n\n// Relations\nexport const branchesRelations = relations(branches, ({ many }) => ({\n  users: many(users),\n}));\n\nexport const usersRelations = relations(users, ({ one, many }) => ({\n  branch: one(branches, {\n    fields: [users.branchId],\n    references: [branches.id],\n  }),\n  client: one(clients),\n  processedTransactions: many(transactions, { relationName: \"processedBy\" }),\n}));\n\nexport const clientsRelations = relations(clients, ({ one, many }) => ({\n  user: one(users, {\n    fields: [clients.userId],\n    references: [users.id],\n  }),\n  transactions: many(transactions),\n  portfolios: many(portfolios),\n}));\n\nexport const transactionsRelations = relations(transactions, ({ one }) => ({\n  client: one(clients, {\n    fields: [transactions.clientId],\n    references: [clients.id],\n  }),\n  processedByUser: one(users, {\n    fields: [transactions.processedBy],\n    references: [users.id],\n    relationName: \"processedBy\",\n  }),\n}));\n\nexport const portfoliosRelations = relations(portfolios, ({ one }) => ({\n  client: one(clients, {\n    fields: [portfolios.clientId],\n    references: [clients.id],\n  }),\n}));\n\n// Types\nexport type Branch = typeof branches.$inferSelect;\nexport type InsertBranch = z.infer<typeof insertBranchSchema>;\nexport type User = typeof users.$inferSelect;\nexport type InsertUser = z.infer<typeof insertUserSchema>;\nexport type Client = typeof clients.$inferSelect;\nexport type InsertClient = z.infer<typeof insertClientSchema>;\nexport type Transaction = typeof transactions.$inferSelect;\nexport type InsertTransaction = z.infer<typeof insertTransactionSchema>;\nexport type Portfolio = typeof portfolios.$inferSelect;\nexport type InsertPortfolio = z.infer<typeof insertPortfolioSchema>;\n","size_bytes":6019},"client/src/App.tsx":{"content":"import { useState } from \"react\";\nimport { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { AuthProvider, useAuth } from \"@/contexts/AuthContext\";\nimport { SidebarProvider, SidebarTrigger } from \"@/components/ui/sidebar\";\nimport { AppSidebar } from \"@/components/app-sidebar\";\nimport { ThemeProvider } from \"@/components/ThemeProvider\";\nimport { ThemeToggle } from \"@/components/ThemeToggle\";\nimport { LoginForm } from \"@/components/LoginForm\";\nimport { WithdrawalForm } from \"@/components/WithdrawalForm\";\nimport { PaymentForm } from \"@/components/PaymentForm\";\nimport { TransactionTable } from \"@/components/DataTable\";\nimport { ClientTable } from \"@/components/ClientTable\";\nimport { BranchForm } from \"@/components/BranchForm\";\nimport { RolesPage } from \"@/components/RolesPage\";\nimport { UsersPage } from \"@/components/UsersPage\";\nimport Dashboard from \"@/pages/Dashboard\";\nimport ImportPage from \"@/pages/ImportPage\";\nimport ReportsPage from \"@/pages/ReportsPage\";\nimport InvestmentPage from \"@/pages/InvestmentPage\";\nimport WithdrawalPage from \"@/pages/WithdrawalPage\";\nimport PayoutPage from \"@/pages/PayoutPage\";\nimport ClosurePage from \"@/pages/ClosurePage\";\nimport MyInvestmentsPage from \"@/pages/client/MyInvestmentsPage\";\nimport MyWithdrawalsPage from \"@/pages/client/MyWithdrawalsPage\";\nimport MyPayoutsPage from \"@/pages/client/MyPayoutsPage\";\nimport MyClosuresPage from \"@/pages/client/MyClosuresPage\";\nimport NotFound from \"@/pages/not-found\";\n\nfunction Router({ userRole, isLoggedIn }: { userRole: \"admin\" | \"leader\" | \"client\", isLoggedIn: boolean }) {\n  const { client } = useAuth();\n  const clientId = client?.id;\n\n  //todo: remove mock functionality - replace with real transaction and client data\n  const mockTransactions = [\n    { date: \"2024-01-15\", clientName: \"John Doe\", type: \"investment\", amount: 50000, status: \"completed\" },\n    { date: \"2024-01-14\", clientName: \"Jane Smith\", type: \"payout\", amount: 5000, status: \"pending\" },\n    { date: \"2024-01-13\", clientName: \"Bob Wilson\", type: \"withdrawal\", amount: 25000, status: \"completed\" },\n    { date: \"2024-01-12\", clientName: \"Alice Johnson\", type: \"investment\", amount: 75000, status: \"completed\" },\n  ];\n\n  const mockClients = [\n    { name: \"John Doe\", email: \"john@example.com\", mobile: \"+91-9876543210\", branch: \"Mumbai\", totalInvestment: 150000, joinDate: \"2023-06-15\" },\n    { name: \"Jane Smith\", email: \"jane@example.com\", mobile: \"+91-9876543211\", branch: \"Delhi\", totalInvestment: 85000, joinDate: \"2023-08-22\" },\n    { name: \"Bob Wilson\", email: \"bob@example.com\", mobile: \"+91-9876543212\", branch: \"Bangalore\", totalInvestment: 120000, joinDate: \"2023-04-10\" },\n    { name: \"Alice Johnson\", email: \"alice@example.com\", mobile: \"+91-9876543213\", branch: \"Chennai\", totalInvestment: 95000, joinDate: \"2023-09-05\" },\n  ];\n\n  if (!isLoggedIn) {\n    return <Route path=\"/\" component={() => <LoginForm />} />;\n  }\n\n  return (\n    <Switch>\n      <Route path=\"/\" component={() => <Dashboard userRole={userRole} />} />\n      <Route path=\"/dashboard\" component={() => <Dashboard userRole={userRole} />} />\n      \n      {/* Admin Routes */}\n      {userRole === \"admin\" && (\n        <>\n          <Route path=\"/branches\" component={() => <BranchForm />} />\n          <Route path=\"/clients\" component={() => <ClientTable />} />\n          <Route path=\"/roles\" component={() => <RolesPage />} />\n          <Route path=\"/users\" component={() => <UsersPage />} />\n          <Route path=\"/import\" component={() => <ImportPage />} />\n          <Route path=\"/investments\" component={() => <InvestmentPage />} />\n          <Route path=\"/withdrawals\" component={() => <WithdrawalPage />} />\n          <Route path=\"/payouts\" component={() => <PayoutPage />} />\n          <Route path=\"/closures\" component={() => <ClosurePage />} />\n        </>\n      )}\n      \n      {/* Client Routes */}\n      {userRole === \"client\" && (\n        <>\n          <Route path=\"/my-investments\" component={() => <MyInvestmentsPage clientId={clientId || \"\"} />} />\n          <Route path=\"/my-withdrawals\" component={() => <MyWithdrawalsPage clientId={clientId || \"\"} />} />\n          <Route path=\"/my-payouts\" component={() => <MyPayoutsPage clientId={clientId || \"\"} />} />\n          <Route path=\"/my-closures\" component={() => <MyClosuresPage clientId={clientId || \"\"} />} />\n          <Route path=\"/withdraw\" component={() => <WithdrawalForm />} />\n          <Route path=\"/payments\" component={() => <PaymentForm />} />\n        </>\n      )}\n      \n      {/* Common Routes */}\n      <Route path=\"/reports\" component={() => <ReportsPage />} />\n      \n      {/* Fallback to 404 */}\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction AppContent() {\n  const { user, isLoggedIn, login } = useAuth();\n\n  const handleLogin = async (email: string, password: string, role: string) => {\n    try {\n      await login(email, password);\n    } catch (error) {\n      console.error(\"Login error:\", error);\n      alert(error instanceof Error ? error.message : \"Network error. Please try again.\");\n    }\n  };\n\n  // Custom sidebar width for better content display\n  const style = {\n    \"--sidebar-width\": \"20rem\",       // 320px for better content\n    \"--sidebar-width-icon\": \"4rem\",   // default icon width\n  };\n\n  return (\n    <ThemeProvider defaultTheme=\"light\">\n      <TooltipProvider>\n        {!isLoggedIn ? (\n          <LoginForm onLogin={handleLogin} />\n        ) : (\n          <SidebarProvider style={style as React.CSSProperties}>\n            <div className=\"flex h-screen w-full\">\n              <AppSidebar userRole={user?.role || \"admin\"} onLogout={() => {}} />\n              <div className=\"flex flex-col flex-1\">\n                <header className=\"flex items-center justify-between p-4 border-b\">\n                  <SidebarTrigger data-testid=\"button-sidebar-toggle\" />\n                  <ThemeToggle />\n                </header>\n                <main className=\"flex-1 overflow-auto p-6\">\n                  <Router userRole={user?.role || \"admin\"} isLoggedIn={isLoggedIn} />\n                </main>\n              </div>\n            </div>\n          </SidebarProvider>\n        )}\n        <Toaster />\n      </TooltipProvider>\n    </ThemeProvider>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <AuthProvider>\n        <AppContent />\n      </AuthProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","size_bytes":6619},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* LIGHT MODE */\n:root {\n  --button-outline: rgba(0,0,0, .10);\n  --badge-outline: rgba(0,0,0, .05);\n\n  /* Automatic computation of border around primary / danger buttons */\n  --opaque-button-border-intensity: -8; /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(0,0,0, .03);\n  --elevate-2: rgba(0,0,0, .08);\n\n  --background: 220 15% 98%;\n  --foreground: 220 15% 20%;\n  --border: 220 15% 88%;\n  --card: 220 15% 96%;\n  --card-foreground: 220 15% 20%;\n  --card-border: 220 15% 90%;\n  --sidebar: 220 15% 94%;\n  --sidebar-foreground: 220 15% 20%;\n  --sidebar-border: 220 15% 86%;\n  --sidebar-primary: 220 85% 25%;\n  --sidebar-primary-foreground: 220 15% 98%;\n  --sidebar-accent: 220 15% 88%;\n  --sidebar-accent-foreground: 220 15% 20%;\n  --sidebar-ring: 220 85% 25%;\n  --popover: 220 15% 92%;\n  --popover-foreground: 220 15% 20%;\n  --popover-border: 220 15% 84%;\n  --primary: 220 85% 25%;\n  --primary-foreground: 220 15% 98%;\n  --secondary: 220 15% 90%;\n  --secondary-foreground: 220 15% 20%;\n  --muted: 220 10% 85%;\n  --muted-foreground: 220 15% 35%;\n  --accent: 220 10% 88%;\n  --accent-foreground: 220 15% 20%;\n  --destructive: 25 95% 53%;\n  --destructive-foreground: 25 15% 98%;\n  --input: 220 15% 75%;\n  --ring: 220 85% 25%;\n  --chart-1: 220 85% 25%;\n  --chart-2: 142 76% 36%;\n  --chart-3: 25 95% 53%;\n  --chart-4: 280 60% 45%;\n  --chart-5: 45 85% 55%;\n\n  --font-sans: Inter, sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: JetBrains Mono, monospace;\n  --radius: .5rem; /* 8px */\n  --shadow-2xs: 0px 2px 0px 0px hsl(220 15% 20% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(220 15% 20% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(220 15% 20% / 0.00), 0px 1px 2px -1px hsl(220 15% 20% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(220 15% 20% / 0.00), 0px 1px 2px -1px hsl(220 15% 20% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(220 15% 20% / 0.00), 0px 2px 4px -1px hsl(220 15% 20% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(220 15% 20% / 0.00), 0px 4px 6px -1px hsl(220 15% 20% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(220 15% 20% / 0.00), 0px 8px 10px -1px hsl(220 15% 20% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(220 15% 20% / 0.00);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n  /* Automatically computed borders - intensity can be controlled by the user by the --opaque-button-border-intensity setting */\n\n  /* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n.dark {\n  --button-outline: rgba(255,255,255, .10);\n  --badge-outline: rgba(255,255,255, .05);\n\n  --opaque-button-border-intensity: 9;  /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(255,255,255, .04);\n  --elevate-2: rgba(255,255,255, .09);\n\n  --background: 220 15% 8%;\n  --foreground: 220 15% 90%;\n  --border: 220 15% 18%;\n  --card: 220 15% 12%;\n  --card-foreground: 220 15% 90%;\n  --card-border: 220 15% 20%;\n  --sidebar: 220 15% 10%;\n  --sidebar-foreground: 220 15% 90%;\n  --sidebar-border: 220 15% 16%;\n  --sidebar-primary: 220 85% 65%;\n  --sidebar-primary-foreground: 220 15% 8%;\n  --sidebar-accent: 220 15% 16%;\n  --sidebar-accent-foreground: 220 15% 90%;\n  --sidebar-ring: 220 85% 65%;\n  --popover: 220 15% 14%;\n  --popover-foreground: 220 15% 90%;\n  --popover-border: 220 15% 22%;\n  --primary: 220 85% 25%;\n  --primary-foreground: 220 15% 98%;\n  --secondary: 220 15% 18%;\n  --secondary-foreground: 220 15% 90%;\n  --muted: 220 10% 15%;\n  --muted-foreground: 220 15% 65%;\n  --accent: 220 10% 16%;\n  --accent-foreground: 220 15% 90%;\n  --destructive: 25 95% 60%;\n  --destructive-foreground: 25 15% 98%;\n  --input: 220 15% 25%;\n  --ring: 220 85% 65%;\n  --chart-1: 220 85% 65%;\n  --chart-2: 142 76% 45%;\n  --chart-3: 25 95% 60%;\n  --chart-4: 280 60% 65%;\n  --chart-5: 45 85% 65%;\n\n  --shadow-2xs: 0px 2px 0px 0px hsl(220 15% 90% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(220 15% 90% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(220 15% 90% / 0.00), 0px 1px 2px -1px hsl(220 15% 90% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(220 15% 90% / 0.00), 0px 1px 2px -1px hsl(220 15% 90% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(220 15% 90% / 0.00), 0px 2px 4px -1px hsl(220 15% 90% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(220 15% 90% / 0.00), 0px 4px 6px -1px hsl(220 15% 90% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(220 15% 90% / 0.00), 0px 8px 10px -1px hsl(220 15% 90% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(220 15% 90% / 0.00);\n\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n/**\n * Using the elevate system.\n * Automatic contrast adjustment.\n *\n * <element className=\"hover-elevate\" />\n * <element className=\"active-elevate-2\" />\n *\n * // Using the tailwind utility when a data attribute is \"on\"\n * <element className=\"toggle-elevate data-[state=on]:toggle-elevated\" />\n * // Or manually controlling the toggle state\n * <element className=\"toggle-elevate toggle-elevated\" />\n *\n * Elevation systems have to handle many states.\n * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)\n * - toggled or not\n * - focused or not (this is not handled with these utilities)\n *\n * Even without handling focused or not, this is six possible combinations that\n * need to be distinguished from eachother visually.\n */\n@layer utilities {\n\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of\n   * buttons/badges can remove the automatic brightness adjustment on interactions\n   * and program their own. */\n  .no-default-hover-elevate {}\n\n  .no-default-active-elevate {}\n\n\n  /**\n   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.\n   * This way they can stack/compound. Both will overlap the parent's borders!\n   * So borders will be automatically adjusted both on toggle, and hover/active,\n   * and they will be compounded.\n   */\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: -1;\n    /* sits behind content but above backdrop */\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  /* Does not work on elements with overflow:hidden! */\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: 999;\n    /* sits in front of content */\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n}","size_bytes":9824},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"client/src/components/BranchForm.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Building2, Plus, Edit, Trash2, Loader2 } from \"lucide-react\";\nimport { queryClient } from \"@/lib/queryClient\";\n\ninterface Branch {\n  id: string;\n  code: string;\n  name: string;\n  address: string;\n  phone?: string | null;\n  email?: string | null;\n  manager?: string | null;\n  createdAt: Date | null;\n}\n\nexport function BranchForm() {\n  const [isEditing, setIsEditing] = useState(false);\n  const [formData, setFormData] = useState<Partial<Branch>>({});\n\n  // Fetch branches from API\n  const { data: branches = [], isLoading, error } = useQuery({\n    queryKey: ['/api/branches'],\n    queryFn: async () => {\n      const response = await fetch('/api/branches');\n      if (!response.ok) {\n        throw new Error('Failed to fetch branches');\n      }\n      return response.json();\n    }\n  });\n\n  // Create branch mutation\n  const createBranchMutation = useMutation({\n    mutationFn: async (branchData: Partial<Branch>) => {\n      const response = await fetch('/api/branches', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(branchData),\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Failed to create branch');\n      }\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/branches'] });\n      setFormData({});\n      setIsEditing(false);\n    },\n    onError: (error: Error) => {\n      alert(error.message);\n    }\n  });\n\n  // Update branch mutation\n  const updateBranchMutation = useMutation({\n    mutationFn: async ({ id, ...branchData }: Partial<Branch> & { id: string }) => {\n      const response = await fetch(`/api/branches/${id}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(branchData),\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Failed to update branch');\n      }\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/branches'] });\n      setFormData({});\n      setIsEditing(false);\n    },\n    onError: (error: Error) => {\n      alert(error.message);\n    }\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (isEditing && formData.id) {\n      updateBranchMutation.mutate(formData as Branch & { id: string });\n    } else {\n      createBranchMutation.mutate(formData);\n    }\n  };\n\n  const handleEdit = (branch: Branch) => {\n    setFormData(branch);\n    setIsEditing(true);\n  };\n\n  const handleDelete = (id: string) => {\n    if (confirm('Are you sure you want to delete this branch?')) {\n      // Note: Delete API endpoint would need to be implemented\n      console.log(\"Branch delete functionality - API endpoint needed:\", id);\n      alert('Delete functionality will be implemented when DELETE API endpoint is added');\n    }\n  };\n\n  const columns = [\n    { key: \"code\", label: \"Code\" },\n    { key: \"name\", label: \"Name\" },\n    { key: \"address\", label: \"Address\" },\n    { key: \"email\", label: \"Email\" },\n    { key: \"phone\", label: \"Phone\" },\n    { key: \"manager\", label: \"Manager\" },\n    {\n      key: \"actions\",\n      label: \"Actions\",\n      exportable: false,\n      render: (_: any, row: Branch) => (\n        <div className=\"flex gap-2\">\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={() => handleEdit(row)}\n            data-testid={`button-edit-${row.id}`}\n          >\n            <Edit className=\"h-4 w-4\" />\n          </Button>\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={() => handleDelete(row.id)}\n            data-testid={`button-delete-${row.id}`}\n          >\n            <Trash2 className=\"h-4 w-4\" />\n          </Button>\n        </div>\n      )\n    }\n  ];\n\n\n  if (error) {\n    return (\n      <Card>\n        <CardContent className=\"p-6 text-center\">\n          <p className=\"text-red-600\">Error loading application: {(error as Error).message}</p>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Branch Form */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Building2 className=\"h-5 w-5\" />\n            {isEditing ? \"Edit Branch\" : \"Add New Branch\"}\n          </CardTitle>\n          <CardDescription>\n            Manage branch information and locations\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleSubmit} className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"code\">Code *</Label>\n              <Input\n                id=\"code\"\n                data-testid=\"input-branch-code\"\n                value={formData.code || \"\"}\n                onChange={(e) => setFormData({...formData, code: e.target.value})}\n                required\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"name\">Name *</Label>\n              <Input\n                id=\"name\"\n                data-testid=\"input-branch-name\"\n                value={formData.name || \"\"}\n                onChange={(e) => setFormData({...formData, name: e.target.value})}\n                required\n              />\n            </div>\n\n            <div className=\"space-y-2 md:col-span-2\">\n              <Label htmlFor=\"address\">Address *</Label>\n              <Input\n                id=\"address\"\n                data-testid=\"input-branch-address\"\n                value={formData.address || \"\"}\n                onChange={(e) => setFormData({...formData, address: e.target.value})}\n                required\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"manager\">Manager</Label>\n              <Input\n                id=\"manager\"\n                data-testid=\"input-branch-manager\"\n                value={formData.manager || \"\"}\n                onChange={(e) => setFormData({...formData, manager: e.target.value})}\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"email\">Email</Label>\n              <Input\n                id=\"email\"\n                type=\"email\"\n                data-testid=\"input-branch-email\"\n                value={formData.email || \"\"}\n                onChange={(e) => setFormData({...formData, email: e.target.value})}\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"phone\">Phone Number</Label>\n              <Input\n                id=\"phone\"\n                data-testid=\"input-branch-phone\"\n                value={formData.phone || \"\"}\n                onChange={(e) => setFormData({...formData, phone: e.target.value})}\n              />\n            </div>\n\n            <div className=\"md:col-span-2\">\n              <Button \n                type=\"submit\" \n                data-testid=\"button-save-branch\"\n                disabled={createBranchMutation.isPending || updateBranchMutation.isPending}\n              >\n                {(createBranchMutation.isPending || updateBranchMutation.isPending) ? (\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                ) : (\n                  <Plus className=\"h-4 w-4 mr-2\" />\n                )}\n                {isEditing ? \"Update Branch\" : \"Add Branch\"}\n              </Button>\n              {isEditing && (\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  className=\"ml-2\"\n                  onClick={() => {\n                    setFormData({});\n                    setIsEditing(false);\n                  }}\n                  data-testid=\"button-cancel-branch\"\n                >\n                  Cancel\n                </Button>\n              )}\n            </div>\n          </form>\n        </CardContent>\n      </Card>\n\n      {/* Branches List */}\n      {isLoading ? (\n        <Card>\n          <CardContent className=\"p-6 text-center\">\n            <Loader2 className=\"h-6 w-6 animate-spin mx-auto\" />\n            <p className=\"mt-2\">Loading branches...</p>\n          </CardContent>\n        </Card>\n      ) : error ? (\n        <Card>\n          <CardContent className=\"p-6 text-center\">\n            <p className=\"text-red-600\">Error loading branches: {(error as Error).message}</p>\n          </CardContent>\n        </Card>\n      ) : (\n        <Card className=\"hover-elevate\">\n          <CardHeader>\n            <CardTitle>Branch Directory</CardTitle>\n            <CardDescription>Manage all branch locations and information</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead>\n                  <tr className=\"border-b\">\n                    {columns.map((column) => (\n                      <th key={column.key} className=\"text-left p-2 font-medium\">\n                        {column.label}\n                      </th>\n                    ))}\n                  </tr>\n                </thead>\n                <tbody>\n                  {branches.map((branch: Branch, index: number) => (\n                    <tr key={branch.id} className=\"border-b hover:bg-muted/50\">\n                      {columns.map((column) => (\n                        <td key={column.key} className=\"p-2\">\n                          {column.render ? column.render(branch[column.key as keyof Branch], branch) : (branch[column.key as keyof Branch] || 'N/A')}\n                        </td>\n                      ))}\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n              \n              {branches.length === 0 && (\n                <div className=\"text-center py-8 text-muted-foreground\">\n                  No branches found.\n                </div>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n}","size_bytes":10507},"client/src/components/ClientDetailsModal.tsx":{"content":"import { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { User, Mail, Phone, MapPin, CreditCard, FileText, Calendar, DollarSign, Edit2, Save, X } from \"lucide-react\";\nimport { useState } from \"react\";\nimport * as React from \"react\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\ninterface Client {\n  id: string;\n  userId: string;\n  clientCode: string;\n  panNumber?: string | null;\n  aadharNumber?: string | null;\n  dateOfBirth?: Date | null;\n  address?: string | null;\n  nomineeDetails?: string | null;\n  bankDetails?: string | null;\n  kycStatus: string;\n  totalInvestment: string;\n  currentValue: string;\n  createdAt: Date | null;\n  user?: {\n    firstName: string;\n    lastName: string;\n    email: string;\n    mobile?: string | null;\n  } | null;\n}\n\ninterface ClientDetailsModalProps {\n  client: Client | null;\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nexport function ClientDetailsModal({ client, isOpen, onClose }: ClientDetailsModalProps) {\n  // Move all hooks before any conditional returns\n  const [isEditing, setIsEditing] = useState(false);\n  const [editData, setEditData] = useState<any>({});\n  const queryClient = useQueryClient();\n  const { toast } = useToast();\n  \n  // Reset editing state when modal closes or client changes\n  React.useEffect(() => {\n    if (!isOpen) {\n      setIsEditing(false);\n      setEditData({});\n    }\n  }, [isOpen, client?.id]);\n\n  const updateMutation = useMutation({\n    mutationFn: async (updates: any) => {\n      const response = await apiRequest('PUT', `/api/clients/${client?.id}`, updates);\n      return await response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/clients'] });\n      toast({\n        title: \"Success\",\n        description: \"Client details updated successfully\",\n      });\n      setIsEditing(false);\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to update client details\",\n        variant: \"destructive\",\n      });\n    }\n  });\n  \n  if (!client) return null;\n\n  // Initialize edit data when client changes or edit mode starts\n  const startEditing = () => {\n    setEditData({\n      panNumber: client.panNumber || '',\n      aadharNumber: client.aadharNumber || '',\n      dateOfBirth: client.dateOfBirth ? new Date(client.dateOfBirth).toISOString().split('T')[0] : '',\n      address: client.address || '',\n      nomineeDetails: client.nomineeDetails || '',\n      bankDetails: client.bankDetails || '',\n      kycStatus: client.kycStatus\n    });\n    setIsEditing(true);\n  };\n\n  const handleSave = () => {\n    const updates = {\n      ...editData,\n      dateOfBirth: editData.dateOfBirth ? new Date(editData.dateOfBirth) : null\n    };\n    updateMutation.mutate(updates);\n  };\n\n  const handleCancel = () => {\n    setEditData({});\n    setIsEditing(false);\n  };\n\n  const getKycStatusColor = (status: string) => {\n    switch (status) {\n      case 'verified':\n        return 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200';\n      case 'pending':\n        return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200';\n      case 'rejected':\n        return 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200';\n      default:\n        return 'bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200';\n    }\n  };\n\n  const formatCurrency = (amount: string) => {\n    return new Intl.NumberFormat('en-IN', {\n      style: 'currency',\n      currency: 'INR',\n    }).format(parseFloat(amount));\n  };\n\n  const formatDate = (date: Date | null | string) => {\n    if (!date) return 'N/A';\n    return new Date(date).toLocaleDateString('en-IN', {\n      day: '2-digit',\n      month: 'short',\n      year: 'numeric'\n    });\n  };\n\n  const gainLoss = parseFloat(client.currentValue) - parseFloat(client.totalInvestment);\n  const gainLossPercentage = parseFloat(client.totalInvestment) > 0 \n    ? ((gainLoss / parseFloat(client.totalInvestment)) * 100).toFixed(2)\n    : '0.00';\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\" data-testid=\"modal-client-details\">\n        <DialogHeader>\n          <div className=\"flex items-center justify-between\">\n            <DialogTitle className=\"flex items-center gap-2\">\n              <User className=\"h-5 w-5\" />\n              Client Details - {client.user?.firstName} {client.user?.lastName}\n            </DialogTitle>\n            <div className=\"flex gap-2\">\n              {isEditing ? (\n                <>\n                  <Button\n                    size=\"sm\"\n                    variant=\"outline\"\n                    onClick={handleCancel}\n                    disabled={updateMutation.isPending}\n                    data-testid=\"button-cancel-edit\"\n                  >\n                    <X className=\"h-4 w-4 mr-2\" />\n                    Cancel\n                  </Button>\n                  <Button\n                    size=\"sm\"\n                    onClick={handleSave}\n                    disabled={updateMutation.isPending}\n                    data-testid=\"button-save-client\"\n                  >\n                    <Save className=\"h-4 w-4 mr-2\" />\n                    {updateMutation.isPending ? 'Saving...' : 'Save'}\n                  </Button>\n                </>\n              ) : (\n                <Button\n                  size=\"sm\"\n                  variant=\"outline\"\n                  onClick={startEditing}\n                  data-testid=\"button-edit-client\"\n                >\n                  <Edit2 className=\"h-4 w-4 mr-2\" />\n                  Edit Details\n                </Button>\n              )}\n            </div>\n          </div>\n        </DialogHeader>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          {/* Personal Information */}\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <User className=\"h-4 w-4\" />\n                Personal Information\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <p className=\"text-sm font-medium text-muted-foreground\">First Name</p>\n                  <p className=\"text-sm\" data-testid=\"text-first-name\">{client.user?.firstName || 'N/A'}</p>\n                </div>\n                <div>\n                  <p className=\"text-sm font-medium text-muted-foreground\">Last Name</p>\n                  <p className=\"text-sm\" data-testid=\"text-last-name\">{client.user?.lastName || 'N/A'}</p>\n                </div>\n              </div>\n              \n              <div className=\"flex items-center gap-2\">\n                <Mail className=\"h-4 w-4 text-muted-foreground\" />\n                <div>\n                  <p className=\"text-sm font-medium text-muted-foreground\">Email</p>\n                  <p className=\"text-sm\" data-testid=\"text-email\">{client.user?.email || 'N/A'}</p>\n                </div>\n              </div>\n              \n              <div className=\"flex items-center gap-2\">\n                <Phone className=\"h-4 w-4 text-muted-foreground\" />\n                <div>\n                  <p className=\"text-sm font-medium text-muted-foreground\">Mobile</p>\n                  <p className=\"text-sm\" data-testid=\"text-mobile\">{client.user?.mobile || 'N/A'}</p>\n                </div>\n              </div>\n              \n              <div className=\"flex items-center gap-2\">\n                <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n                <div className=\"flex-1\">\n                  <Label className=\"text-sm font-medium text-muted-foreground\">Date of Birth</Label>\n                  {isEditing ? (\n                    <Input\n                      type=\"date\"\n                      value={editData.dateOfBirth || ''}\n                      onChange={(e) => setEditData(prev => ({ ...prev, dateOfBirth: e.target.value }))}\n                      data-testid=\"input-dob\"\n                      className=\"mt-1\"\n                    />\n                  ) : (\n                    <p className=\"text-sm\" data-testid=\"text-dob\">{formatDate(client.dateOfBirth)}</p>\n                  )}\n                </div>\n              </div>\n              \n              <div className=\"flex items-center gap-2\">\n                <MapPin className=\"h-4 w-4 text-muted-foreground\" />\n                <div className=\"flex-1\">\n                  <Label className=\"text-sm font-medium text-muted-foreground\">Address</Label>\n                  {isEditing ? (\n                    <Textarea\n                      value={editData.address || ''}\n                      onChange={(e) => setEditData(prev => ({ ...prev, address: e.target.value }))}\n                      data-testid=\"input-address\"\n                      className=\"mt-1\"\n                      rows={3}\n                    />\n                  ) : (\n                    <p className=\"text-sm\" data-testid=\"text-address\">{client.address || 'N/A'}</p>\n                  )}\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Account Information */}\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <CreditCard className=\"h-4 w-4\" />\n                Account Information\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div>\n                <p className=\"text-sm font-medium text-muted-foreground\">Client Code</p>\n                <p className=\"text-sm font-mono\" data-testid=\"text-client-code\">{client.clientCode}</p>\n              </div>\n              \n              <div>\n                <Label className=\"text-sm font-medium text-muted-foreground\">PAN Number</Label>\n                {isEditing ? (\n                  <Input\n                    value={editData.panNumber || ''}\n                    onChange={(e) => setEditData(prev => ({ ...prev, panNumber: e.target.value }))}\n                    data-testid=\"input-pan\"\n                    className=\"mt-1 font-mono\"\n                    placeholder=\"Enter PAN number\"\n                  />\n                ) : (\n                  <p className=\"text-sm font-mono\" data-testid=\"text-pan\">{client.panNumber || 'N/A'}</p>\n                )}\n              </div>\n              \n              <div>\n                <Label className=\"text-sm font-medium text-muted-foreground\">Aadhar Number</Label>\n                {isEditing ? (\n                  <Input\n                    value={editData.aadharNumber || ''}\n                    onChange={(e) => setEditData(prev => ({ ...prev, aadharNumber: e.target.value }))}\n                    data-testid=\"input-aadhar\"\n                    className=\"mt-1 font-mono\"\n                    placeholder=\"Enter Aadhar number\"\n                  />\n                ) : (\n                  <p className=\"text-sm font-mono\" data-testid=\"text-aadhar\">{client.aadharNumber || 'N/A'}</p>\n                )}\n              </div>\n              \n              <div>\n                <Label className=\"text-sm font-medium text-muted-foreground\">KYC Status</Label>\n                {isEditing ? (\n                  <Select \n                    value={editData.kycStatus || client.kycStatus} \n                    onValueChange={(value) => setEditData(prev => ({ ...prev, kycStatus: value }))}\n                  >\n                    <SelectTrigger className=\"mt-1\" data-testid=\"select-kyc-status\">\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"pending\">Pending</SelectItem>\n                      <SelectItem value=\"verified\">Verified</SelectItem>\n                      <SelectItem value=\"rejected\">Rejected</SelectItem>\n                    </SelectContent>\n                  </Select>\n                ) : (\n                  <Badge className={getKycStatusColor(client.kycStatus)} data-testid=\"badge-kyc-status\">\n                    {client.kycStatus.charAt(0).toUpperCase() + client.kycStatus.slice(1)}\n                  </Badge>\n                )}\n              </div>\n              \n              <div>\n                <p className=\"text-sm font-medium text-muted-foreground\">Account Created</p>\n                <p className=\"text-sm\" data-testid=\"text-created-date\">{formatDate(client.createdAt)}</p>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Investment Summary */}\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <DollarSign className=\"h-4 w-4\" />\n                Investment Summary\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <p className=\"text-sm font-medium text-muted-foreground\">Total Invested</p>\n                  <p className=\"text-lg font-semibold\" data-testid=\"text-total-investment\">\n                    {formatCurrency(client.totalInvestment)}\n                  </p>\n                </div>\n                <div>\n                  <p className=\"text-sm font-medium text-muted-foreground\">Current Value</p>\n                  <p className=\"text-lg font-semibold\" data-testid=\"text-current-value\">\n                    {formatCurrency(client.currentValue)}\n                  </p>\n                </div>\n              </div>\n              \n              <Separator />\n              \n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <p className=\"text-sm font-medium text-muted-foreground\">Gain/Loss</p>\n                  <p className={`text-lg font-semibold ${gainLoss >= 0 ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'}`} \n                     data-testid=\"text-gain-loss\">\n                    {gainLoss >= 0 ? '+' : ''}{formatCurrency(gainLoss.toString())}\n                  </p>\n                </div>\n                <div>\n                  <p className=\"text-sm font-medium text-muted-foreground\">Gain/Loss %</p>\n                  <p className={`text-lg font-semibold ${gainLoss >= 0 ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'}`}\n                     data-testid=\"text-gain-loss-percentage\">\n                    {gainLoss >= 0 ? '+' : ''}{gainLossPercentage}%\n                  </p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Additional Details */}\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <FileText className=\"h-4 w-4\" />\n                Additional Details\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div>\n                <p className=\"text-sm font-medium text-muted-foreground\">Nominee Details</p>\n                <p className=\"text-sm\" data-testid=\"text-nominee\">{client.nomineeDetails || 'N/A'}</p>\n              </div>\n              \n              <div>\n                <p className=\"text-sm font-medium text-muted-foreground\">Bank Details</p>\n                <p className=\"text-sm\" data-testid=\"text-bank-details\">{client.bankDetails || 'N/A'}</p>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}","size_bytes":16165},"client/src/components/ClientTable.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Search, Eye, Loader2, Plus } from \"lucide-react\";\nimport { ClientDetailsModal } from \"./ClientDetailsModal\";\nimport { AddClientModal } from \"./AddClientModal\";\n\ninterface Client {\n  id: string;\n  userId: string;\n  clientCode: string;\n  panNumber?: string | null;\n  aadharNumber?: string | null;\n  dateOfBirth?: Date | null;\n  address?: string | null;\n  nomineeDetails?: string | null;\n  bankDetails?: string | null;\n  kycStatus: string;\n  totalInvestment: string;\n  currentValue: string;\n  createdAt: Date | null;\n  user?: {\n    firstName: string;\n    lastName: string;\n    email: string;\n    mobile?: string | null;\n  } | null;\n}\n\nexport function ClientTable() {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [selectedClient, setSelectedClient] = useState<Client | null>(null);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [isAddModalOpen, setIsAddModalOpen] = useState(false);\n\n  const { data: clients = [], isLoading, error } = useQuery({\n    queryKey: ['/api/clients'],\n    queryFn: async () => {\n      const response = await fetch('/api/clients');\n      if (!response.ok) {\n        throw new Error('Failed to fetch clients');\n      }\n      return response.json();\n    }\n  });\n\n  const filteredClients = clients.filter((client: Client) => {\n    if (!searchTerm) return true;\n    const searchLower = searchTerm.toLowerCase();\n    return (\n      client.clientCode.toLowerCase().includes(searchLower) ||\n      client.user?.firstName?.toLowerCase().includes(searchLower) ||\n      client.user?.lastName?.toLowerCase().includes(searchLower) ||\n      client.user?.email?.toLowerCase().includes(searchLower) ||\n      client.user?.mobile?.includes(searchTerm)\n    );\n  });\n\n  const handleViewClient = (client: Client) => {\n    setSelectedClient(client);\n    setIsModalOpen(true);\n  };\n\n  const getKycStatusColor = (status: string) => {\n    switch (status) {\n      case 'verified':\n        return 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200';\n      case 'pending':\n        return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200';\n      case 'rejected':\n        return 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200';\n      default:\n        return 'bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200';\n    }\n  };\n\n  const formatCurrency = (amount: string) => {\n    return new Intl.NumberFormat('en-IN', {\n      style: 'currency',\n      currency: 'INR',\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0,\n    }).format(parseFloat(amount));\n  };\n\n  const formatDate = (date: Date | null | string) => {\n    if (!date) return 'N/A';\n    return new Date(date).toLocaleDateString('en-IN', {\n      day: '2-digit',\n      month: 'short',\n      year: 'numeric'\n    });\n  };\n\n  if (error) {\n    return (\n      <Card>\n        <CardContent className=\"p-6 text-center\">\n          <p className=\"text-red-600\">Error loading clients: {(error as Error).message}</p>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <>\n      <Card className=\"hover-elevate\">\n        <CardHeader>\n          <div className=\"flex flex-col gap-2 md:flex-row md:items-center md:justify-between\">\n            <CardTitle>Client Directory</CardTitle>\n            <div className=\"flex gap-2 w-full md:w-auto\">\n              <div className=\"relative flex-1 md:w-80\">\n                <Search className=\"absolute left-2 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground\" />\n                <Input\n                  placeholder=\"Search clients...\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  className=\"pl-8\"\n                  data-testid=\"input-search\"\n                />\n              </div>\n              <Button \n                onClick={() => setIsAddModalOpen(true)}\n                data-testid=\"button-add-client\"\n                className=\"gap-2 shrink-0\"\n              >\n                <Plus className=\"h-4 w-4\" />\n                Add Client\n              </Button>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent>\n          {isLoading ? (\n            <div className=\"flex items-center justify-center py-8\">\n              <Loader2 className=\"h-6 w-6 animate-spin\" />\n              <span className=\"ml-2\">Loading clients...</span>\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead>\n                  <tr className=\"border-b\">\n                    <th className=\"text-left p-2 font-medium\">Client Code</th>\n                    <th className=\"text-left p-2 font-medium\">Name</th>\n                    <th className=\"text-left p-2 font-medium\">Email</th>\n                    <th className=\"text-left p-2 font-medium\">Mobile</th>\n                    <th className=\"text-left p-2 font-medium\">KYC Status</th>\n                    <th className=\"text-left p-2 font-medium\">Total Investment</th>\n                    <th className=\"text-left p-2 font-medium\">Current Value</th>\n                    <th className=\"text-left p-2 font-medium\">Join Date</th>\n                    <th className=\"text-left p-2 font-medium\">Actions</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {filteredClients.map((client: Client, index: number) => (\n                    <tr key={client.id} className=\"border-b hover:bg-muted/50\">\n                      <td className=\"p-2 font-mono text-sm\" data-testid={`text-client-code-${index}`}>\n                        {client.clientCode}\n                      </td>\n                      <td className=\"p-2\" data-testid={`text-client-name-${index}`}>\n                        {client.user ? `${client.user.firstName} ${client.user.lastName}` : 'N/A'}\n                      </td>\n                      <td className=\"p-2 text-sm text-muted-foreground\" data-testid={`text-client-email-${index}`}>\n                        {client.user?.email || 'N/A'}\n                      </td>\n                      <td className=\"p-2 text-sm\" data-testid={`text-client-mobile-${index}`}>\n                        {client.user?.mobile || 'N/A'}\n                      </td>\n                      <td className=\"p-2\">\n                        <Badge className={getKycStatusColor(client.kycStatus)} data-testid={`badge-kyc-${index}`}>\n                          {client.kycStatus.charAt(0).toUpperCase() + client.kycStatus.slice(1)}\n                        </Badge>\n                      </td>\n                      <td className=\"p-2 font-medium\" data-testid={`text-investment-${index}`}>\n                        {formatCurrency(client.totalInvestment)}\n                      </td>\n                      <td className=\"p-2 font-medium\" data-testid={`text-current-value-${index}`}>\n                        {formatCurrency(client.currentValue)}\n                      </td>\n                      <td className=\"p-2 text-sm text-muted-foreground\" data-testid={`text-join-date-${index}`}>\n                        {formatDate(client.createdAt)}\n                      </td>\n                      <td className=\"p-2\">\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => handleViewClient(client)}\n                          data-testid={`button-view-${index}`}\n                        >\n                          <Eye className=\"h-4 w-4\" />\n                        </Button>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n              \n              {filteredClients.length === 0 && !isLoading && (\n                <div className=\"text-center py-8 text-muted-foreground\">\n                  {searchTerm ? 'No clients found matching your search.' : 'No clients found.'}\n                </div>\n              )}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      <ClientDetailsModal\n        client={selectedClient}\n        isOpen={isModalOpen}\n        onClose={() => {\n          setIsModalOpen(false);\n          setSelectedClient(null);\n        }}\n      />\n\n      <AddClientModal\n        isOpen={isAddModalOpen}\n        onClose={() => setIsAddModalOpen(false)}\n      />\n    </>\n  );\n}","size_bytes":8615},"client/src/components/DashboardStats.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { TrendingUp, TrendingDown, Users, DollarSign, ArrowUpRight, ArrowDownRight } from \"lucide-react\";\n\ninterface StatCardProps {\n  title: string;\n  value: string | number;\n  change?: number;\n  icon: React.ComponentType<any>;\n  trend?: \"up\" | \"down\" | \"neutral\";\n}\n\nfunction StatCard({ title, value, change, icon: Icon, trend = \"neutral\" }: StatCardProps) {\n  const formatValue = (val: string | number) => {\n    if (typeof val === \"number\") {\n      return val.toLocaleString();\n    }\n    return val;\n  };\n\n  return (\n    <Card className=\"hover-elevate\">\n      <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n        <CardTitle className=\"text-sm font-medium\">{title}</CardTitle>\n        <Icon className=\"h-4 w-4 text-muted-foreground\" />\n      </CardHeader>\n      <CardContent>\n        <div className=\"text-2xl font-bold\" data-testid={`stat-${title.toLowerCase().replace(/\\\\s+/g, '-')}`}>\n          {formatValue(value)}\n        </div>\n        {change !== undefined && (\n          <div className=\"flex items-center text-xs text-muted-foreground\">\n            {trend === \"up\" && <ArrowUpRight className=\"h-3 w-3 mr-1 text-chart-2\" />}\n            {trend === \"down\" && <ArrowDownRight className=\"h-3 w-3 mr-1 text-chart-3\" />}\n            <span className={trend === \"up\" ? \"text-chart-2\" : trend === \"down\" ? \"text-chart-3\" : \"\"}>\n              {change > 0 ? \"+\" : \"\"}{change}%\n            </span>\n            <span className=\"ml-1\">from last month</span>\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n\ninterface DashboardStatsProps {\n  userRole: \"admin\" | \"leader\" | \"client\";\n}\n\nexport function DashboardStats({ userRole }: DashboardStatsProps) {\n  //todo: remove mock functionality - replace with real data from API\n  const getStatsForRole = () => {\n    if (userRole === \"admin\") {\n      return [\n        { title: \"Total Clients\", value: 1247, change: 12.5, icon: Users, trend: \"up\" as const },\n        { title: \"Total Investments\", value: \"â‚¹2.4M\", change: 8.2, icon: TrendingUp, trend: \"up\" as const },\n        { title: \"Active Withdrawals\", value: 23, change: -2.1, icon: TrendingDown, trend: \"down\" as const },\n        { title: \"This Month Payouts\", value: \"â‚¹45K\", change: 15.3, icon: DollarSign, trend: \"up\" as const },\n      ];\n    }\n    \n    if (userRole === \"leader\") {\n      return [\n        { title: \"My Clients\", value: 42, change: 5.7, icon: Users, trend: \"up\" as const },\n        { title: \"Team Investments\", value: \"â‚¹186K\", change: 12.1, icon: TrendingUp, trend: \"up\" as const },\n        { title: \"Referrals This Month\", value: 8, change: 14.3, icon: Users, trend: \"up\" as const },\n        { title: \"Commission Earned\", value: \"â‚¹3.2K\", change: 9.8, icon: DollarSign, trend: \"up\" as const },\n      ];\n    }\n    \n    // Client stats\n    return [\n      { title: \"Total Investment\", value: \"â‚¹85K\", change: 0, icon: TrendingUp, trend: \"neutral\" as const },\n      { title: \"Total Payout\", value: \"â‚¹12.5K\", change: 0, icon: DollarSign, trend: \"neutral\" as const },\n      { title: \"Active Referrals\", value: 3, change: 0, icon: Users, trend: \"neutral\" as const },\n      { title: \"Pending Withdrawals\", value: 1, change: 0, icon: TrendingDown, trend: \"neutral\" as const },\n    ];\n  };\n\n  const stats = getStatsForRole();\n\n  return (\n    <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n      {stats.map((stat) => (\n        <StatCard\n          key={stat.title}\n          title={stat.title}\n          value={stat.value}\n          change={stat.change !== 0 ? stat.change : undefined}\n          icon={stat.icon}\n          trend={stat.trend}\n        />\n      ))}\n    </div>\n  );\n}","size_bytes":3742},"client/src/components/DataTable.tsx":{"content":"import { useState } from \"react\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Search, Filter, Download, Eye } from \"lucide-react\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { ClientDetailsModal } from \"./ClientDetailsModal\";\nimport { format } from \"date-fns\";\n\ninterface Column {\n  key: string;\n  label: string;\n  render?: (value: any, row: any) => React.ReactNode;\n  exportValue?: (row: any) => string | number;\n  exportable?: boolean;\n}\n\ninterface DataTableProps {\n  title: string;\n  description?: string;\n  columns: Column[];\n  data: any[];\n  searchable?: boolean;\n  filterable?: boolean;\n  exportable?: boolean;\n  onViewDetails?: (row: any) => void;\n}\n\n// Export function for CSV download\nconst exportToCSV = (title: string, columns: Column[], data: any[]) => {\n  // Filter out non-exportable columns (like actions)\n  const exportableColumns = columns.filter(col => col.exportable !== false && col.key !== 'actions');\n  \n  const headers = exportableColumns.map(col => col.label);\n  const csvData = data.map(row => \n    exportableColumns.map(col => {\n      // Use custom export value if provided\n      if (col.exportValue) {\n        return col.exportValue(row);\n      }\n      \n      // Get the raw value\n      const value = row[col.key];\n      \n      // Handle different value types\n      if (value === null || value === undefined) {\n        return '';\n      }\n      \n      // Handle dates\n      if (value instanceof Date) {\n        return format(value, 'yyyy-MM-dd');\n      }\n      \n      // Handle numbers (preserve formatting)\n      if (typeof value === 'number') {\n        return value;\n      }\n      \n      // Convert everything else to string\n      return String(value);\n    })\n  );\n\n  const csvContent = [headers, ...csvData].map(row => \n    row.map((field: any) => `\"${String(field).replace(/\"/g, '\"\"')}\"`).join(',')\n  ).join('\\n');\n\n  const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n  const url = window.URL.createObjectURL(blob);\n  const a = document.createElement('a');\n  a.href = url;\n  a.download = `${title.toLowerCase().replace(/\\s+/g, '_')}_${format(new Date(), 'yyyy-MM-dd')}.csv`;\n  document.body.appendChild(a);\n  a.click();\n  document.body.removeChild(a);\n  window.URL.revokeObjectURL(url);\n};\n\nexport function DataTable({ \n  title, \n  description, \n  columns, \n  data, \n  searchable = true,\n  filterable = false,\n  exportable = false,\n  onViewDetails \n}: DataTableProps) {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [filterValue, setFilterValue] = useState(\"\");\n\n  const filteredData = data.filter(row => {\n    const matchesSearch = !searchTerm || Object.values(row).some(value => \n      String(value).toLowerCase().includes(searchTerm.toLowerCase())\n    );\n    const matchesFilter = !filterValue || filterValue === \"all\" || row.status === filterValue;\n    return matchesSearch && matchesFilter;\n  });\n\n  return (\n    <Card className=\"hover-elevate\">\n      <CardHeader>\n        <div className=\"flex flex-col gap-2 md:flex-row md:items-center md:justify-between\">\n          <div>\n            <CardTitle>{title}</CardTitle>\n            {description && <CardDescription>{description}</CardDescription>}\n          </div>\n          <div className=\"flex gap-2\">\n            {exportable && (\n              <Button \n                variant=\"outline\" \n                size=\"sm\" \n                data-testid=\"button-export\"\n                onClick={() => exportToCSV(title, columns, filteredData)}\n                disabled={filteredData.length === 0}\n              >\n                <Download className=\"h-4 w-4 mr-2\" />\n                Export CSV\n              </Button>\n            )}\n          </div>\n        </div>\n        \n        {(searchable || filterable) && (\n          <div className=\"flex gap-2 mt-4\">\n            {searchable && (\n              <div className=\"relative flex-1\">\n                <Search className=\"absolute left-2 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground\" />\n                <Input\n                  placeholder=\"Search...\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  className=\"pl-8\"\n                  data-testid=\"input-search\"\n                />\n              </div>\n            )}\n            {filterable && (\n              <Select value={filterValue} onValueChange={setFilterValue}>\n                <SelectTrigger className=\"w-48\" data-testid=\"select-filter\">\n                  <Filter className=\"h-4 w-4 mr-2\" />\n                  <SelectValue placeholder=\"Filter by status\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All</SelectItem>\n                  <SelectItem value=\"active\">Active</SelectItem>\n                  <SelectItem value=\"pending\">Pending</SelectItem>\n                  <SelectItem value=\"completed\">Completed</SelectItem>\n                </SelectContent>\n              </Select>\n            )}\n          </div>\n        )}\n      </CardHeader>\n      \n      <CardContent>\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead>\n              <tr className=\"border-b\">\n                {columns.map((column) => (\n                  <th key={column.key} className=\"text-left p-2 font-medium text-muted-foreground\">\n                    {column.label}\n                  </th>\n                ))}\n                <th className=\"text-left p-2 font-medium text-muted-foreground\">Actions</th>\n              </tr>\n            </thead>\n            <tbody>\n              {filteredData.map((row, index) => (\n                <tr key={index} className=\"border-b hover-elevate\">\n                  {columns.map((column) => (\n                    <td key={column.key} className=\"p-2\" data-testid={`cell-${column.key}-${index}`}>\n                      {column.render ? column.render(row[column.key], row) : row[column.key]}\n                    </td>\n                  ))}\n                  <td className=\"p-2\">\n                    <Button \n                      variant=\"ghost\" \n                      size=\"sm\"\n                      data-testid={`button-view-${index}`}\n                      onClick={() => onViewDetails ? onViewDetails(row) : console.log('View details for:', row)}\n                    >\n                      <Eye className=\"h-4 w-4\" />\n                    </Button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n          \n          {filteredData.length === 0 && (\n            <div className=\"text-center py-8 text-muted-foreground\">\n              No data found\n            </div>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n\n// Specialized tables for different data types\nexport function TransactionTable({ transactions }: { transactions: any[] }) {\n  const columns: Column[] = [\n    { key: \"date\", label: \"Date\" },\n    { key: \"clientName\", label: \"Client\" },\n    { \n      key: \"type\", \n      label: \"Type\", \n      render: (value) => (\n        <Badge variant={value === \"investment\" ? \"default\" : value === \"payout\" ? \"secondary\" : \"outline\"}>\n          {value}\n        </Badge>\n      ),\n      exportValue: (row) => row.type\n    },\n    { \n      key: \"amount\", \n      label: \"Amount\", \n      render: (value) => `â‚¹${value.toLocaleString()}`,\n      exportValue: (row) => row.amount\n    },\n    { \n      key: \"status\", \n      label: \"Status\", \n      render: (value) => (\n        <Badge variant={value === \"completed\" ? \"default\" : value === \"pending\" ? \"secondary\" : \"destructive\"}>\n          {value}\n        </Badge>\n      ),\n      exportValue: (row) => row.status\n    }\n  ];\n\n  return (\n    <DataTable\n      title=\"Recent Transactions\"\n      description=\"Latest investment and payout activities\"\n      columns={columns}\n      data={transactions}\n      searchable={true}\n      filterable={true}\n      exportable={true}\n    />\n  );\n}\n\nexport function ClientTable({ clients }: { clients: any[] }) {\n  const [selectedClient, setSelectedClient] = useState<any>(null);\n  const [showDetails, setShowDetails] = useState(false);\n\n  const handleViewDetails = (client: any) => {\n    setSelectedClient(client);\n    setShowDetails(true);\n  };\n\n  const columns: Column[] = [\n    { key: \"name\", label: \"Name\" },\n    { key: \"email\", label: \"Email\" },\n    { key: \"mobile\", label: \"Mobile\" },\n    { key: \"branch\", label: \"Branch\" },\n    { \n      key: \"totalInvestment\", \n      label: \"Investment\", \n      render: (value) => `â‚¹${value.toLocaleString()}`,\n      exportValue: (row) => row.totalInvestment\n    },\n    { key: \"joinDate\", label: \"Joined\" }\n  ];\n\n  return (\n    <>\n      <DataTable\n        title=\"Client Directory\"\n        description=\"Manage client information and portfolios\"\n        columns={columns}\n        data={clients}\n        searchable={true}\n        exportable={true}\n        onViewDetails={handleViewDetails}\n      />\n      <ClientDetailsModal\n        client={selectedClient}\n        open={showDetails}\n        onClose={() => setShowDetails(false)}\n      />\n    </>\n  );\n}","size_bytes":9336},"client/src/components/FileUpload.tsx":{"content":"import { useState } from \"react\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Upload, FileText, AlertCircle, CheckCircle, Loader2, Download } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nconst TRANSACTION_TYPES = [\n  { value: \"investment\", label: \"Investment\", fields: [\"Client PAN No\", \"Investment Date\", \"Investment No\", \"Investment Details\", \"Amount\"] },\n  { value: \"withdrawal\", label: \"Withdrawal\", fields: [\"Client PAN No\", \"Withdrawal Date\", \"Withdrawal No\", \"Withdrawal Details\", \"Amount\"] },\n  { value: \"payout\", label: \"Payout\", fields: [\"Client PAN No\", \"Payout Date\", \"Payout No\", \"Payout Details\", \"Amount\"] },\n  { value: \"closure\", label: \"Closure\", fields: [\"Client PAN No\", \"Closure Date\", \"Closure No\", \"Closure Details\", \"Amount\"] }\n];\n\ninterface UploadResult {\n  success: boolean;\n  message: string;\n  processed: number;\n  errors: Array<{ row: number; message: string }>;\n}\n\nexport function FileUpload() {\n  const [selectedType, setSelectedType] = useState<string>(\"\");\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [uploadResult, setUploadResult] = useState<UploadResult | null>(null);\n  const { toast } = useToast();\n\n  const uploadMutation = useMutation({\n    mutationFn: async ({ file, type }: { file: File; type: string }) => {\n      const formData = new FormData();\n      formData.append('file', file);\n      formData.append('type', type);\n      \n      const response = await fetch('/api/transactions/upload', {\n        method: 'POST',\n        body: formData,\n      });\n      \n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Upload failed');\n      }\n      \n      return response.json();\n    },\n    onSuccess: (data: UploadResult) => {\n      setUploadResult(data);\n      if (data.success) {\n        toast({\n          title: \"Upload Successful\",\n          description: `${data.processed} transactions processed successfully`,\n        });\n      } else {\n        toast({\n          title: \"Upload Completed with Errors\",\n          description: data.message,\n          variant: \"destructive\",\n        });\n      }\n      setSelectedFile(null);\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Upload Failed\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      // Validate file type\n      const validTypes = [\n        'application/vnd.ms-excel',\n        'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'\n      ];\n      \n      if (!validTypes.includes(file.type) && !file.name.endsWith('.xls') && !file.name.endsWith('.xlsx')) {\n        toast({\n          title: \"Invalid File Type\",\n          description: \"Please select an Excel file (.xls or .xlsx)\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n      \n      setSelectedFile(file);\n      setUploadResult(null);\n    }\n  };\n\n  const handleUpload = () => {\n    if (!selectedFile || !selectedType) {\n      toast({\n        title: \"Missing Information\",\n        description: \"Please select both a file and transaction type\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    \n    uploadMutation.mutate({ file: selectedFile, type: selectedType });\n  };\n\n  const downloadTemplate = (type: string) => {\n    const selectedTypeData = TRANSACTION_TYPES.find(t => t.value === type);\n    if (!selectedTypeData) return;\n\n    // Create CSV template\n    const headers = selectedTypeData.fields.join(',');\n    const sampleRow = selectedTypeData.fields.map(field => {\n      switch (field) {\n        case 'Client PAN No': return 'ABCDE1234F';\n        case 'Amount': return '50000';\n        default: return field.includes('Date') ? '2024-01-15' : `Sample ${field}`;\n      }\n    }).join(',');\n    \n    const csvContent = `${headers}\\n${sampleRow}`;\n    const blob = new Blob([csvContent], { type: 'text/csv' });\n    const url = window.URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `${type}_template.csv`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    window.URL.revokeObjectURL(url);\n  };\n\n  const selectedTypeData = TRANSACTION_TYPES.find(t => t.value === selectedType);\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold tracking-tight\">Bulk Transaction Import</h1>\n        <p className=\"text-muted-foreground\">\n          Upload Excel files to import transaction data in bulk\n        </p>\n      </div>\n\n      {/* Upload Form */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Upload className=\"h-5 w-5\" />\n            Upload Transaction File\n          </CardTitle>\n          <CardDescription>\n            Select transaction type and upload your Excel file\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"transactionType\">Transaction Type *</Label>\n              <Select \n                value={selectedType} \n                onValueChange={setSelectedType}\n              >\n                <SelectTrigger data-testid=\"select-transaction-type\">\n                  <SelectValue placeholder=\"Select transaction type\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {TRANSACTION_TYPES.map((type) => (\n                    <SelectItem key={type.value} value={type.value}>\n                      {type.label}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"fileUpload\">Excel File *</Label>\n              <Input\n                id=\"fileUpload\"\n                type=\"file\"\n                accept=\".xls,.xlsx\"\n                onChange={handleFileChange}\n                data-testid=\"input-file-upload\"\n              />\n            </div>\n          </div>\n\n          {selectedFile && (\n            <div className=\"flex items-center gap-2 p-2 bg-muted rounded\">\n              <FileText className=\"h-4 w-4\" />\n              <span className=\"text-sm\">{selectedFile.name}</span>\n              <Badge variant=\"outline\">\n                {(selectedFile.size / 1024 / 1024).toFixed(2)} MB\n              </Badge>\n            </div>\n          )}\n\n          <div className=\"flex gap-2\">\n            <Button \n              onClick={handleUpload}\n              disabled={!selectedFile || !selectedType || uploadMutation.isPending}\n              data-testid=\"button-upload-file\"\n            >\n              {uploadMutation.isPending ? (\n                <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n              ) : (\n                <Upload className=\"h-4 w-4 mr-2\" />\n              )}\n              {uploadMutation.isPending ? \"Uploading...\" : \"Upload File\"}\n            </Button>\n\n            {selectedType && (\n              <Button\n                variant=\"outline\"\n                onClick={() => downloadTemplate(selectedType)}\n                data-testid=\"button-download-template\"\n              >\n                <Download className=\"h-4 w-4 mr-2\" />\n                Download Template\n              </Button>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Field Requirements */}\n      {selectedTypeData && (\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-lg\">Required Fields for {selectedTypeData.label}</CardTitle>\n            <CardDescription>\n              Your Excel file must contain these columns in this exact order\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2\">\n              {selectedTypeData.fields.map((field, index) => (\n                <Badge key={field} variant=\"outline\" className=\"justify-center p-2\">\n                  {index + 1}. {field}\n                </Badge>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Upload Results */}\n      {uploadResult && (\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              {uploadResult.success ? (\n                <CheckCircle className=\"h-5 w-5 text-green-600\" />\n              ) : (\n                <AlertCircle className=\"h-5 w-5 text-red-600\" />\n              )}\n              Upload Results\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center justify-between\">\n                <span>Status:</span>\n                <Badge variant={uploadResult.success ? \"default\" : \"destructive\"}>\n                  {uploadResult.success ? \"Success\" : \"Completed with Errors\"}\n                </Badge>\n              </div>\n              \n              <div className=\"flex items-center justify-between\">\n                <span>Processed Records:</span>\n                <Badge variant=\"outline\">{uploadResult.processed}</Badge>\n              </div>\n\n              {uploadResult.message && (\n                <div className=\"p-3 bg-muted rounded\">\n                  <p className=\"text-sm\">{uploadResult.message}</p>\n                </div>\n              )}\n\n              {uploadResult.errors && uploadResult.errors.length > 0 && (\n                <div className=\"space-y-2\">\n                  <h4 className=\"font-medium text-red-600\">Errors:</h4>\n                  <div className=\"max-h-32 overflow-y-auto space-y-1\">\n                    {uploadResult.errors.map((error, index) => (\n                      <div key={index} className=\"text-sm p-2 bg-red-50 dark:bg-red-900/20 rounded\">\n                        <span className=\"font-medium\">Row {error.row}:</span> {error.message}\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n}","size_bytes":10721},"client/src/components/LoginForm.tsx":{"content":"import { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { Link } from \"wouter\";\n\ninterface LoginFormProps {\n  onLogin?: (email: string, password: string, role: string) => void;\n}\n\nexport function LoginForm({ onLogin }: LoginFormProps) {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [role, setRole] = useState(\"\");\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    // Determine role based on email/mobile if not explicitly selected\n    let determinedRole = role;\n    if (!role) {\n      //todo: remove mock functionality - replace with real user lookup\n      const adminEmails = [\"admin@gandharva.com\", \"9876543210\"];\n      const leaderEmails = [\"leader@gandharva.com\", \"9876543211\"];\n      \n      if (adminEmails.includes(email)) {\n        determinedRole = \"admin\";\n      } else if (leaderEmails.includes(email)) {\n        determinedRole = \"leader\";\n      } else {\n        determinedRole = \"client\";\n      }\n    }\n    \n    console.log(\"Login attempted with:\", { email, password, role: determinedRole });\n    onLogin?.(email, password, determinedRole);\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-background p-4\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"space-y-1\">\n          <CardTitle className=\"text-2xl text-center font-semibold\">\n            Welcome to Gandharva\n          </CardTitle>\n          <CardDescription className=\"text-center\">\n            Enter your credentials to access your investment portfolio\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"email\" data-testid=\"label-email\">Email or Mobile</Label>\n              <Input\n                id=\"email\"\n                data-testid=\"input-email\"\n                type=\"text\"\n                placeholder=\"Enter your email or mobile number\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                required\n              />\n            </div>\n            \n            <div className=\"space-y-2\">\n              <Label htmlFor=\"password\" data-testid=\"label-password\">Password</Label>\n              <Input\n                id=\"password\"\n                data-testid=\"input-password\"\n                type=\"password\"\n                placeholder=\"Enter your password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                required\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"role\" data-testid=\"label-role\">Login As</Label>\n              <Select value={role} onValueChange={setRole} required>\n                <SelectTrigger data-testid=\"select-role\">\n                  <SelectValue placeholder=\"Select your role\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"admin\">Administrator</SelectItem>\n                  <SelectItem value=\"leader\">Leader</SelectItem>\n                  <SelectItem value=\"client\">Client</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            <Button \n              type=\"submit\" \n              className=\"w-full\"\n              data-testid=\"button-login\"\n            >\n              Sign In\n            </Button>\n          </form>\n\n          <Separator className=\"my-4\" />\n          \n          <div className=\"text-center space-y-2\">\n            <Link href=\"/forgot-password\">\n              <Button variant=\"link\" className=\"p-0 h-auto text-sm\" data-testid=\"link-forgot-password\">\n                Forgot your password?\n              </Button>\n            </Link>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","size_bytes":4282},"client/src/components/PaymentForm.tsx":{"content":"import { useState } from \"react\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { CreditCard, Smartphone, CheckCircle, Clock } from \"lucide-react\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\n\ninterface PaymentRecord {\n  id: string;\n  amount: number;\n  method: \"netbanking\" | \"upi\";\n  status: \"completed\" | \"pending\" | \"failed\";\n  date: string;\n  receiptNumber: string;\n}\n\nexport function PaymentForm() {\n  const [amount, setAmount] = useState(\"\");\n  const [method, setMethod] = useState(\"\");\n  const [isProcessing, setIsProcessing] = useState(false);\n\n  //todo: remove mock functionality - replace with real payment records\n  const [payments, setPayments] = useState<PaymentRecord[]>([\n    {\n      id: \"1\",\n      amount: 50000,\n      method: \"netbanking\",\n      status: \"completed\",\n      date: \"2024-01-12\",\n      receiptNumber: \"RCP001234\"\n    },\n    {\n      id: \"2\",\n      amount: 25000,\n      method: \"upi\",\n      status: \"pending\",\n      date: \"2024-01-15\",\n      receiptNumber: \"RCP001235\"\n    }\n  ]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsProcessing(true);\n    \n    // Simulate payment processing\n    setTimeout(() => {\n      const newPayment: PaymentRecord = {\n        id: Date.now().toString(),\n        amount: parseFloat(amount),\n        method: method as \"netbanking\" | \"upi\",\n        status: \"completed\",\n        date: new Date().toISOString().split('T')[0],\n        receiptNumber: `RCP${Date.now().toString().slice(-6)}`\n      };\n      \n      setPayments([newPayment, ...payments]);\n      setAmount(\"\");\n      setMethod(\"\");\n      setIsProcessing(false);\n      \n      console.log(\"Payment processed:\", newPayment);\n    }, 2000);\n  };\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case \"completed\": return <CheckCircle className=\"h-4 w-4 text-chart-2\" />;\n      case \"failed\": return <CheckCircle className=\"h-4 w-4 text-chart-3\" />;\n      default: return <Clock className=\"h-4 w-4 text-muted-foreground\" />;\n    }\n  };\n\n  const getStatusVariant = (status: string): \"default\" | \"secondary\" | \"destructive\" => {\n    switch (status) {\n      case \"completed\": return \"default\";\n      case \"failed\": return \"destructive\";\n      default: return \"secondary\";\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Payment Form */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <CreditCard className=\"h-5 w-5\" />\n            Make Investment Payment\n          </CardTitle>\n          <CardDescription>\n            Invest using Net Banking or UPI for instant portfolio updates\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"investment-amount\">Investment Amount (â‚¹)</Label>\n              <Input\n                id=\"investment-amount\"\n                data-testid=\"input-investment-amount\"\n                type=\"number\"\n                placeholder=\"Enter investment amount\"\n                value={amount}\n                onChange={(e) => setAmount(e.target.value)}\n                min=\"5000\"\n                required\n              />\n              <p className=\"text-xs text-muted-foreground\">\n                Minimum investment amount: â‚¹5,000\n              </p>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"payment-method\">Payment Method</Label>\n              <Select value={method} onValueChange={setMethod} required>\n                <SelectTrigger data-testid=\"select-payment-method\">\n                  <SelectValue placeholder=\"Choose payment method\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"netbanking\">\n                    <div className=\"flex items-center gap-2\">\n                      <CreditCard className=\"h-4 w-4\" />\n                      Net Banking\n                    </div>\n                  </SelectItem>\n                  <SelectItem value=\"upi\">\n                    <div className=\"flex items-center gap-2\">\n                      <Smartphone className=\"h-4 w-4\" />\n                      UPI\n                    </div>\n                  </SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            <Button \n              type=\"submit\" \n              disabled={isProcessing}\n              data-testid=\"button-submit-payment\"\n              className=\"w-full\"\n            >\n              {isProcessing ? \"Processing Payment...\" : \"Proceed to Payment\"}\n            </Button>\n          </form>\n        </CardContent>\n      </Card>\n\n      {/* Payment History */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Payment History</CardTitle>\n          <CardDescription>\n            Your recent investment payments and receipts\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            {payments.length === 0 ? (\n              <p className=\"text-center text-muted-foreground py-8\">\n                No payment history found\n              </p>\n            ) : (\n              payments.map((payment) => (\n                <div \n                  key={payment.id} \n                  className=\"flex items-center justify-between p-4 border rounded-lg hover-elevate\"\n                  data-testid={`payment-record-${payment.id}`}\n                >\n                  <div className=\"space-y-1\">\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"font-medium\">â‚¹{payment.amount.toLocaleString()}</span>\n                      <Badge variant={getStatusVariant(payment.status)}>\n                        {getStatusIcon(payment.status)}\n                        <span className=\"ml-1 capitalize\">{payment.status}</span>\n                      </Badge>\n                    </div>\n                    <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                      {payment.method === \"netbanking\" ? (\n                        <CreditCard className=\"h-3 w-3\" />\n                      ) : (\n                        <Smartphone className=\"h-3 w-3\" />\n                      )}\n                      <span className=\"capitalize\">{payment.method}</span>\n                    </div>\n                    <div className=\"flex gap-4 text-xs text-muted-foreground\">\n                      <span>Receipt #: {payment.receiptNumber}</span>\n                      <span>Date: {payment.date}</span>\n                    </div>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","size_bytes":7071},"client/src/components/RolesPage.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { UserCheck, Shield, Users, Crown } from \"lucide-react\";\n\ninterface Role {\n  id: string;\n  name: string;\n  description: string;\n  permissions: string[];\n  userCount: number;\n}\n\nexport function RolesPage() {\n  //todo: remove mock functionality - replace with real role data\n  const roles: Role[] = [\n    {\n      id: \"1\",\n      name: \"Admin\",\n      description: \"Full system access with all administrative privileges\",\n      permissions: [\n        \"Manage Branches\", \"Manage Clients\", \"Manage Users\", \"Import Data\",\n        \"View All Transactions\", \"Generate Reports\", \"System Configuration\"\n      ],\n      userCount: 3\n    },\n    {\n      id: \"2\", \n      name: \"Leader\",\n      description: \"Team management with access to team performance data\",\n      permissions: [\n        \"View Team Clients\", \"View Team Performance\", \"Generate Team Reports\",\n        \"Track Referrals\", \"View Commissions\"\n      ],\n      userCount: 12\n    },\n    {\n      id: \"3\",\n      name: \"Client\", \n      description: \"Individual client access to personal investment portfolio\",\n      permissions: [\n        \"View Personal Dashboard\", \"Request Withdrawals\", \"Make Payments\",\n        \"Submit Referrals\", \"View Personal Reports\", \"Update Profile\"\n      ],\n      userCount: 1247\n    }\n  ];\n\n  const getRoleIcon = (roleName: string) => {\n    switch (roleName.toLowerCase()) {\n      case \"admin\": return <Crown className=\"h-6 w-6 text-primary\" />;\n      case \"leader\": return <Shield className=\"h-6 w-6 text-chart-2\" />;\n      case \"client\": return <Users className=\"h-6 w-6 text-muted-foreground\" />;\n      default: return <UserCheck className=\"h-6 w-6\" />;\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold tracking-tight\">Role Management</h1>\n        <p className=\"text-muted-foreground\">\n          View and understand system roles and their permissions\n        </p>\n      </div>\n\n      <div className=\"grid gap-6 md:grid-cols-1 lg:grid-cols-3\">\n        {roles.map((role) => (\n          <Card key={role.id} className=\"hover-elevate\" data-testid={`role-card-${role.name.toLowerCase()}`}>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-3\">\n                {getRoleIcon(role.name)}\n                <div>\n                  <div className=\"text-xl\">{role.name}</div>\n                  <Badge variant=\"secondary\" className=\"mt-1\">\n                    {role.userCount} users\n                  </Badge>\n                </div>\n              </CardTitle>\n              <CardDescription>{role.description}</CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div>\n                <h4 className=\"font-medium mb-3 text-sm text-muted-foreground uppercase tracking-wide\">\n                  Permissions\n                </h4>\n                <div className=\"space-y-2\">\n                  {role.permissions.map((permission, index) => (\n                    <div \n                      key={index} \n                      className=\"flex items-center gap-2 text-sm\"\n                      data-testid={`permission-${permission.toLowerCase().replace(/\\\\s+/g, '-')}`}\n                    >\n                      <div className=\"w-1.5 h-1.5 rounded-full bg-chart-1\"></div>\n                      <span>{permission}</span>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n    </div>\n  );\n}","size_bytes":3624},"client/src/components/ThemeProvider.tsx":{"content":"import { createContext, useContext, useEffect, useState } from \"react\";\n\ntype Theme = \"light\" | \"dark\";\n\ntype ThemeProviderContext = {\n  theme: Theme;\n  setTheme: (theme: Theme) => void;\n};\n\nconst ThemeProviderContext = createContext<ThemeProviderContext | undefined>(\n  undefined\n);\n\nexport function ThemeProvider({\n  children,\n  defaultTheme = \"light\",\n}: {\n  children: React.ReactNode;\n  defaultTheme?: Theme;\n}) {\n  const [theme, setTheme] = useState<Theme>(() => {\n    if (typeof window !== \"undefined\") {\n      return (localStorage.getItem(\"theme\") as Theme) || defaultTheme;\n    }\n    return defaultTheme;\n  });\n\n  useEffect(() => {\n    const root = window.document.documentElement;\n    root.classList.remove(\"light\", \"dark\");\n    root.classList.add(theme);\n    localStorage.setItem(\"theme\", theme);\n  }, [theme]);\n\n  return (\n    <ThemeProviderContext.Provider value={{ theme, setTheme }}>\n      {children}\n    </ThemeProviderContext.Provider>\n  );\n}\n\nexport const useTheme = () => {\n  const context = useContext(ThemeProviderContext);\n  if (context === undefined) {\n    throw new Error(\"useTheme must be used within a ThemeProvider\");\n  }\n  return context;\n};","size_bytes":1168},"client/src/components/ThemeToggle.tsx":{"content":"import { Moon, Sun } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { useTheme } from \"./ThemeProvider\";\n\nexport function ThemeToggle() {\n  const { theme, setTheme } = useTheme();\n\n  return (\n    <Button\n      data-testid=\"button-theme-toggle\"\n      variant=\"outline\"\n      size=\"icon\"\n      onClick={() => setTheme(theme === \"light\" ? \"dark\" : \"light\")}\n    >\n      <Sun className=\"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0\" />\n      <Moon className=\"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100\" />\n      <span className=\"sr-only\">Toggle theme</span>\n    </Button>\n  );\n}","size_bytes":694},"client/src/components/TrendChart.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from \"recharts\";\n\ninterface TrendData {\n  month: string;\n  value: number;\n}\n\ninterface TrendChartProps {\n  title: string;\n  description?: string;\n  data: TrendData[];\n  dataKey?: string;\n  color?: string;\n}\n\nexport function TrendChart({ \n  title, \n  description, \n  data, \n  dataKey = \"value\", \n  color = \"hsl(var(--chart-1))\" \n}: TrendChartProps) {\n  return (\n    <Card className=\"hover-elevate\">\n      <CardHeader>\n        <CardTitle>{title}</CardTitle>\n        {description && <CardDescription>{description}</CardDescription>}\n      </CardHeader>\n      <CardContent>\n        <ResponsiveContainer width=\"100%\" height={300}>\n          <LineChart data={data}>\n            <CartesianGrid strokeDasharray=\"3 3\" className=\"stroke-muted\" />\n            <XAxis \n              dataKey=\"month\" \n              className=\"fill-muted-foreground\"\n              fontSize={12}\n            />\n            <YAxis \n              className=\"fill-muted-foreground\"\n              fontSize={12}\n            />\n            <Tooltip \n              contentStyle={{ \n                backgroundColor: \"hsl(var(--popover))\",\n                border: \"1px solid hsl(var(--border))\",\n                borderRadius: \"6px\"\n              }}\n            />\n            <Line \n              type=\"monotone\" \n              dataKey={dataKey} \n              stroke={color}\n              strokeWidth={2}\n              dot={{ fill: color, strokeWidth: 2, r: 4 }}\n              activeDot={{ r: 6 }}\n            />\n          </LineChart>\n        </ResponsiveContainer>\n      </CardContent>\n    </Card>\n  );\n}\n\ninterface DashboardChartsProps {\n  userRole: \"admin\" | \"leader\" | \"client\";\n}\n\nexport function DashboardCharts({ userRole }: DashboardChartsProps) {\n  //todo: remove mock functionality - replace with real trend data from API\n  const getChartsForRole = () => {\n    const months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n    \n    if (userRole === \"admin\") {\n      return [\n        {\n          title: \"New Clients Trend\",\n          description: \"Monthly new client acquisitions\",\n          data: months.map(month => ({ \n            month, \n            value: Math.floor(Math.random() * 50) + 30 \n          })),\n          color: \"hsl(var(--chart-1))\"\n        },\n        {\n          title: \"Investment Trend\",\n          description: \"Monthly investment volume in â‚¹\",\n          data: months.map(month => ({ \n            month, \n            value: Math.floor(Math.random() * 200000) + 100000 \n          })),\n          color: \"hsl(var(--chart-2))\"\n        }\n      ];\n    }\n    \n    if (userRole === \"leader\") {\n      return [\n        {\n          title: \"Team Performance\",\n          description: \"Monthly team investment performance\",\n          data: months.map(month => ({ \n            month, \n            value: Math.floor(Math.random() * 50000) + 20000 \n          })),\n          color: \"hsl(var(--chart-2))\"\n        },\n        {\n          title: \"Referral Trend\",\n          description: \"Monthly referrals brought in\",\n          data: months.map(month => ({ \n            month, \n            value: Math.floor(Math.random() * 10) + 2 \n          })),\n          color: \"hsl(var(--chart-1))\"\n        }\n      ];\n    }\n    \n    // Client charts\n    return [\n      {\n        title: \"Investment Growth\",\n        description: \"Your investment growth over time\",\n        data: months.map((month, i) => ({ \n          month, \n          value: 10000 + (i * 2000) + Math.floor(Math.random() * 5000) \n        })),\n        color: \"hsl(var(--chart-2))\"\n      },\n      {\n        title: \"Payout History\",\n        description: \"Monthly payouts received\",\n        data: months.map(month => ({ \n          month, \n          value: Math.floor(Math.random() * 2000) + 500 \n        })),\n        color: \"hsl(var(--chart-1))\"\n      }\n    ];\n  };\n\n  const charts = getChartsForRole();\n\n  return (\n    <div className=\"grid gap-4 md:grid-cols-2\">\n      {charts.map((chart) => (\n        <TrendChart\n          key={chart.title}\n          title={chart.title}\n          description={chart.description}\n          data={chart.data}\n          color={chart.color}\n        />\n      ))}\n    </div>\n  );\n}","size_bytes":4358},"client/src/components/UsersPage.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Users, Plus, Edit, Trash2, UserCheck, Loader2 } from \"lucide-react\";\nimport { queryClient } from \"@/lib/queryClient\";\n\ninterface User {\n  id: string;\n  email: string;\n  mobile?: string | null;\n  firstName: string;\n  lastName: string;\n  role: string;\n  branchId?: string | null;\n  isActive?: boolean | null;\n  createdAt: Date | null;\n}\n\nexport function UsersPage() {\n  const [isEditing, setIsEditing] = useState(false);\n  const [formData, setFormData] = useState<Partial<User>>({});\n  const [password, setPassword] = useState(\"\");\n\n  // Fetch users from API\n  const { data: users = [], isLoading, error } = useQuery({\n    queryKey: ['/api/users'],\n    queryFn: async () => {\n      const response = await fetch('/api/users');\n      if (!response.ok) {\n        throw new Error('Failed to fetch users');\n      }\n      return response.json();\n    }\n  });\n\n  // Create user mutation\n  const createUserMutation = useMutation({\n    mutationFn: async (userData: any) => {\n      const response = await fetch('/api/users', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(userData),\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Failed to create user');\n      }\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/users'] });\n      setFormData({});\n      setPassword(\"\");\n      setIsEditing(false);\n    },\n    onError: (error: Error) => {\n      alert(error.message);\n    }\n  });\n\n  // Update user mutation\n  const updateUserMutation = useMutation({\n    mutationFn: async ({ id, ...userData }: any) => {\n      const response = await fetch(`/api/users/${id}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(userData),\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Failed to update user');\n      }\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/users'] });\n      setFormData({});\n      setPassword(\"\");\n      setIsEditing(false);\n    },\n    onError: (error: Error) => {\n      alert(error.message);\n    }\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    const userData = {\n      ...formData,\n      password: password || 'defaultpass123' // Default password for new users\n    };\n    \n    if (isEditing && formData.id) {\n      // Don't include password in updates unless specifically changed\n      const updateData = password ? userData : formData;\n      updateUserMutation.mutate(updateData);\n    } else {\n      createUserMutation.mutate(userData);\n    }\n  };\n\n  const handleEdit = (user: User) => {\n    setFormData(user);\n    setIsEditing(true);\n  };\n\n  const handleDelete = (id: string) => {\n    if (confirm('Are you sure you want to delete this user?')) {\n      console.log(\"User delete functionality - API endpoint needed:\", id);\n      alert('Delete functionality will be implemented when DELETE API endpoint is added');\n    }\n  };\n\n  const columns = [\n    { \n      key: \"name\", \n      label: \"Name\",\n      render: (_: any, user: User) => `${user.firstName} ${user.lastName}`,\n      exportValue: (user: User) => `${user.firstName} ${user.lastName}`\n    },\n    { key: \"email\", label: \"Email\" },\n    { key: \"mobile\", label: \"Mobile\" },\n    { \n      key: \"role\", \n      label: \"Role\",\n      render: (value: string) => (\n        <Badge variant={value === \"admin\" ? \"default\" : value === \"leader\" ? \"secondary\" : \"outline\"}>\n          {value.charAt(0).toUpperCase() + value.slice(1)}\n        </Badge>\n      ),\n      exportValue: (user: User) => user.role.charAt(0).toUpperCase() + user.role.slice(1)\n    },\n    { \n      key: \"isActive\", \n      label: \"Status\",\n      render: (value: boolean) => (\n        <Badge variant={value ? \"default\" : \"destructive\"}>\n          {value ? \"Active\" : \"Inactive\"}\n        </Badge>\n      ),\n      exportValue: (user: User) => user.isActive ? \"Active\" : \"Inactive\"\n    },\n    {\n      key: \"actions\",\n      label: \"Actions\",\n      exportable: false,\n      render: (_: any, user: User) => (\n        <div className=\"flex gap-2\">\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={() => handleEdit(user)}\n            data-testid={`button-edit-${user.id}`}\n          >\n            <Edit className=\"h-4 w-4\" />\n          </Button>\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={() => handleDelete(user.id)}\n            data-testid={`button-delete-${user.id}`}\n          >\n            <Trash2 className=\"h-4 w-4\" />\n          </Button>\n        </div>\n      )\n    }\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold tracking-tight\">User Management</h1>\n        <p className=\"text-muted-foreground\">\n          Create and manage user accounts across the platform\n        </p>\n      </div>\n\n      {/* User Form */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <UserCheck className=\"h-5 w-5\" />\n            {isEditing ? \"Edit User\" : \"Add New User\"}\n          </CardTitle>\n          <CardDescription>\n            Create or modify user accounts and permissions\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleSubmit} className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"firstName\">First Name *</Label>\n              <Input\n                id=\"firstName\"\n                data-testid=\"input-user-firstname\"\n                value={formData.firstName || \"\"}\n                onChange={(e) => setFormData({...formData, firstName: e.target.value})}\n                required\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"lastName\">Last Name *</Label>\n              <Input\n                id=\"lastName\"\n                data-testid=\"input-user-lastname\"\n                value={formData.lastName || \"\"}\n                onChange={(e) => setFormData({...formData, lastName: e.target.value})}\n                required\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"userEmail\">Email Address *</Label>\n              <Input\n                id=\"userEmail\"\n                type=\"email\"\n                data-testid=\"input-user-email\"\n                value={formData.email || \"\"}\n                onChange={(e) => setFormData({...formData, email: e.target.value})}\n                required\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"userMobile\">Mobile Number</Label>\n              <Input\n                id=\"userMobile\"\n                data-testid=\"input-user-mobile\"\n                value={formData.mobile || \"\"}\n                onChange={(e) => setFormData({...formData, mobile: e.target.value})}\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"userPassword\">Password {!isEditing && '*'}</Label>\n              <Input\n                id=\"userPassword\"\n                type=\"password\"\n                data-testid=\"input-user-password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                required={!isEditing}\n                placeholder={isEditing ? \"Leave blank to keep current password\" : \"Enter password\"}\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"userRole\">Role *</Label>\n              <Select \n                value={formData.role || \"\"} \n                onValueChange={(value) => setFormData({...formData, role: value})}\n              >\n                <SelectTrigger data-testid=\"select-user-role\">\n                  <SelectValue placeholder=\"Select user role\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"admin\">Administrator</SelectItem>\n                  <SelectItem value=\"leader\">Leader</SelectItem>\n                  <SelectItem value=\"client\">Client</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"userStatus\">Status *</Label>\n              <Select \n                value={formData.isActive !== undefined ? formData.isActive.toString() : \"true\"} \n                onValueChange={(value) => setFormData({...formData, isActive: value === \"true\"})}\n              >\n                <SelectTrigger data-testid=\"select-user-status\">\n                  <SelectValue placeholder=\"Select status\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"true\">Active</SelectItem>\n                  <SelectItem value=\"false\">Inactive</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"md:col-span-2\">\n              <Button \n                type=\"submit\" \n                data-testid=\"button-save-user\"\n                disabled={createUserMutation.isPending || updateUserMutation.isPending}\n              >\n                {(createUserMutation.isPending || updateUserMutation.isPending) ? (\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                ) : (\n                  <Plus className=\"h-4 w-4 mr-2\" />\n                )}\n                {isEditing ? \"Update User\" : \"Add User\"}\n              </Button>\n              {isEditing && (\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  className=\"ml-2\"\n                  onClick={() => {\n                    setFormData({});\n                    setPassword(\"\");\n                    setIsEditing(false);\n                  }}\n                  data-testid=\"button-cancel-user\"\n                >\n                  Cancel\n                </Button>\n              )}\n            </div>\n          </form>\n        </CardContent>\n      </Card>\n\n      {/* Users List */}\n      {isLoading ? (\n        <Card>\n          <CardContent className=\"p-6 text-center\">\n            <Loader2 className=\"h-6 w-6 animate-spin mx-auto\" />\n            <p className=\"mt-2\">Loading users...</p>\n          </CardContent>\n        </Card>\n      ) : error ? (\n        <Card>\n          <CardContent className=\"p-6 text-center\">\n            <p className=\"text-red-600\">Error loading users: {(error as Error).message}</p>\n          </CardContent>\n        </Card>\n      ) : (\n        <Card className=\"hover-elevate\">\n          <CardHeader>\n            <CardTitle>User Directory</CardTitle>\n            <CardDescription>Manage all user accounts and their access levels</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead>\n                  <tr className=\"border-b\">\n                    {columns.map((column) => (\n                      <th key={column.key} className=\"text-left p-2 font-medium\">\n                        {column.label}\n                      </th>\n                    ))}\n                  </tr>\n                </thead>\n                <tbody>\n                  {users.map((user: User) => (\n                    <tr key={user.id} className=\"border-b hover:bg-muted/50\">\n                      {columns.map((column) => (\n                        <td key={column.key} className=\"p-2\">\n                          {column.render ? column.render(user[column.key as keyof User], user) : (user[column.key as keyof User] || 'N/A')}\n                        </td>\n                      ))}\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n              \n              {users.length === 0 && (\n                <div className=\"text-center py-8 text-muted-foreground\">\n                  No users found.\n                </div>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n}","size_bytes":12813},"client/src/components/WithdrawalForm.tsx":{"content":"import { useState } from \"react\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { DollarSign, Clock, CheckCircle, XCircle } from \"lucide-react\";\n\ninterface WithdrawalRequest {\n  id: string;\n  amount: number;\n  reason: string;\n  status: \"pending\" | \"approved\" | \"rejected\";\n  requestDate: string;\n  requestNumber: string;\n}\n\nexport function WithdrawalForm() {\n  const [amount, setAmount] = useState(\"\");\n  const [reason, setReason] = useState(\"\");\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  //todo: remove mock functionality - replace with real withdrawal requests\n  const [requests, setRequests] = useState<WithdrawalRequest[]>([\n    {\n      id: \"1\",\n      amount: 25000,\n      reason: \"Medical emergency\",\n      status: \"approved\",\n      requestDate: \"2024-01-10\",\n      requestNumber: \"WR001234\"\n    },\n    {\n      id: \"2\", \n      amount: 15000,\n      reason: \"Education expenses\",\n      status: \"pending\",\n      requestDate: \"2024-01-15\",\n      requestNumber: \"WR001235\"\n    }\n  ]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsSubmitting(true);\n    \n    // Simulate API call\n    setTimeout(() => {\n      const newRequest: WithdrawalRequest = {\n        id: Date.now().toString(),\n        amount: parseFloat(amount),\n        reason,\n        status: \"pending\",\n        requestDate: new Date().toISOString().split('T')[0],\n        requestNumber: `WR${Date.now().toString().slice(-6)}`\n      };\n      \n      setRequests([newRequest, ...requests]);\n      setAmount(\"\");\n      setReason(\"\");\n      setIsSubmitting(false);\n      \n      console.log(\"Withdrawal request submitted:\", newRequest);\n    }, 1000);\n  };\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case \"approved\": return <CheckCircle className=\"h-4 w-4 text-chart-2\" />;\n      case \"rejected\": return <XCircle className=\"h-4 w-4 text-chart-3\" />;\n      default: return <Clock className=\"h-4 w-4 text-muted-foreground\" />;\n    }\n  };\n\n  const getStatusVariant = (status: string): \"default\" | \"secondary\" | \"destructive\" => {\n    switch (status) {\n      case \"approved\": return \"default\";\n      case \"rejected\": return \"destructive\";\n      default: return \"secondary\";\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Withdrawal Request Form */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <DollarSign className=\"h-5 w-5\" />\n            Request Withdrawal\n          </CardTitle>\n          <CardDescription>\n            Submit a withdrawal request from your investment portfolio\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"amount\">Amount (â‚¹)</Label>\n              <Input\n                id=\"amount\"\n                data-testid=\"input-withdrawal-amount\"\n                type=\"number\"\n                placeholder=\"Enter withdrawal amount\"\n                value={amount}\n                onChange={(e) => setAmount(e.target.value)}\n                min=\"1000\"\n                required\n              />\n              <p className=\"text-xs text-muted-foreground\">\n                Minimum withdrawal amount: â‚¹1,000\n              </p>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"reason\">Reason for Withdrawal</Label>\n              <Textarea\n                id=\"reason\"\n                data-testid=\"input-withdrawal-reason\"\n                placeholder=\"Please provide reason for this withdrawal request\"\n                value={reason}\n                onChange={(e) => setReason(e.target.value)}\n                required\n              />\n            </div>\n\n            <Button \n              type=\"submit\" \n              disabled={isSubmitting}\n              data-testid=\"button-submit-withdrawal\"\n            >\n              {isSubmitting ? \"Submitting...\" : \"Submit Request\"}\n            </Button>\n          </form>\n        </CardContent>\n      </Card>\n\n      {/* Previous Requests */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Your Withdrawal Requests</CardTitle>\n          <CardDescription>\n            Track the status of your withdrawal requests\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            {requests.length === 0 ? (\n              <p className=\"text-center text-muted-foreground py-8\">\n                No withdrawal requests found\n              </p>\n            ) : (\n              requests.map((request) => (\n                <div \n                  key={request.id} \n                  className=\"flex items-center justify-between p-4 border rounded-lg hover-elevate\"\n                  data-testid={`withdrawal-request-${request.id}`}\n                >\n                  <div className=\"space-y-1\">\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"font-medium\">â‚¹{request.amount.toLocaleString()}</span>\n                      <Badge variant={getStatusVariant(request.status)}>\n                        {getStatusIcon(request.status)}\n                        <span className=\"ml-1 capitalize\">{request.status}</span>\n                      </Badge>\n                    </div>\n                    <p className=\"text-sm text-muted-foreground\">{request.reason}</p>\n                    <div className=\"flex gap-4 text-xs text-muted-foreground\">\n                      <span>Request #: {request.requestNumber}</span>\n                      <span>Date: {request.requestDate}</span>\n                    </div>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","size_bytes":6127},"client/src/components/app-sidebar.tsx":{"content":"import { BarChart3, Building2, DollarSign, FileText, Home, Settings, TrendingUp, Users, UserCheck, LogOut } from \"lucide-react\";\nimport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarMenu,\n  SidebarMenuButton,\n  SidebarMenuItem,\n} from \"@/components/ui/sidebar\";\nimport { Button } from \"@/components/ui/button\";\nimport { Link } from \"wouter\";\n\n//todo: remove mock functionality - replace with real user data\nconst mockUser = {\n  name: \"John Doe\",\n  role: \"admin\" as const, // admin | leader | client\n  email: \"john@example.com\",\n};\n\n// Menu items based on user role\nconst getMenuItems = (role: string) => {\n  const commonItems = [\n    { title: \"Dashboard\", url: \"/dashboard\", icon: Home },\n  ];\n\n  if (role === \"admin\") {\n    return [\n      ...commonItems,\n      { title: \"Master Data\", icon: Settings, children: [\n        { title: \"Branches\", url: \"/branches\", icon: Building2 },\n        { title: \"Clients\", url: \"/clients\", icon: Users },\n      ]},\n      { title: \"Security\", icon: UserCheck, children: [\n        { title: \"Roles\", url: \"/roles\", icon: UserCheck },\n        { title: \"Users\", url: \"/users\", icon: Users },\n      ]},\n      { title: \"Transactions\", icon: DollarSign, children: [\n        { title: \"Import Data\", url: \"/import\", icon: FileText },\n        { title: \"Investments\", url: \"/investments\", icon: TrendingUp },\n        { title: \"Withdrawals\", url: \"/withdrawals\", icon: DollarSign },\n        { title: \"Payouts\", url: \"/payouts\", icon: BarChart3 },\n        { title: \"Closures\", url: \"/closures\", icon: FileText },\n      ]},\n      { title: \"Reports\", url: \"/reports\", icon: FileText },\n    ];\n  }\n\n  if (role === \"leader\") {\n    return [\n      ...commonItems,\n      { title: \"Reports\", url: \"/reports\", icon: FileText },\n    ];\n  }\n\n  if (role === \"client\") {\n    return [\n      ...commonItems,\n      { title: \"Withdraw Request\", url: \"/withdraw\", icon: DollarSign },\n      { title: \"Net Banking\", url: \"/payments\", icon: BarChart3 },\n      { title: \"Referrals\", url: \"/referrals\", icon: Users },\n      { title: \"Reports\", url: \"/reports\", icon: FileText },\n      { title: \"About Us\", url: \"/about\", icon: FileText },\n    ];\n  }\n\n  return commonItems;\n};\n\ninterface AppSidebarProps {\n  userRole: string;\n  onLogout: () => void;\n}\n\nexport function AppSidebar({ userRole, onLogout }: AppSidebarProps) {\n  const menuItems = getMenuItems(userRole);\n\n  return (\n    <Sidebar>\n      <SidebarHeader className=\"p-4\">\n        <div className=\"flex flex-col space-y-1\">\n          <h2 className=\"text-lg font-semibold\">Gandharva</h2>\n          <p className=\"text-sm text-muted-foreground\">Investment Platform</p>\n        </div>\n      </SidebarHeader>\n\n      <SidebarContent>\n        <SidebarGroup>\n          <SidebarGroupLabel>Navigation</SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {menuItems.map((item) => (\n                <SidebarMenuItem key={item.title}>\n                  {item.children ? (\n                    <div>\n                      <SidebarMenuButton className=\"font-medium\">\n                        <item.icon />\n                        <span>{item.title}</span>\n                      </SidebarMenuButton>\n                      <div className=\"ml-6 mt-1 space-y-1\">\n                        {item.children.map((child) => (\n                          <SidebarMenuButton key={child.title} asChild size=\"sm\">\n                            <Link href={child.url} data-testid={`link-${child.title.toLowerCase().replace(/\\\\s+/g, '-')}`}>\n                              <child.icon className=\"h-4 w-4\" />\n                              <span>{child.title}</span>\n                            </Link>\n                          </SidebarMenuButton>\n                        ))}\n                      </div>\n                    </div>\n                  ) : (\n                    <SidebarMenuButton asChild>\n                      <Link href={item.url} data-testid={`link-${item.title.toLowerCase().replace(/\\\\s+/g, '-')}`}>\n                        <item.icon />\n                        <span>{item.title}</span>\n                      </Link>\n                    </SidebarMenuButton>\n                  )}\n                </SidebarMenuItem>\n              ))}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n      </SidebarContent>\n\n      <SidebarFooter className=\"p-4\">\n        <div className=\"space-y-2\">\n          <div className=\"text-sm\">\n            <p className=\"font-medium\">{mockUser.name}</p>\n            <p className=\"text-muted-foreground capitalize\">{userRole}</p>\n          </div>\n          <Button \n            variant=\"outline\" \n            size=\"sm\" \n            className=\"w-full justify-start\"\n            data-testid=\"button-logout\"\n            onClick={onLogout}\n          >\n            <LogOut className=\"h-4 w-4 mr-2\" />\n            Logout\n          </Button>\n        </div>\n      </SidebarFooter>\n    </Sidebar>\n  );\n}","size_bytes":5012},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1383},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/pages/Dashboard.tsx":{"content":"import { DashboardStats } from \"@/components/DashboardStats\";\nimport { DashboardCharts } from \"@/components/TrendChart\";\n\ninterface DashboardProps {\n  userRole: \"admin\" | \"leader\" | \"client\";\n}\n\nexport default function Dashboard({ userRole }: DashboardProps) {\n  const getRoleTitle = (role: string) => {\n    switch (role) {\n      case \"admin\": return \"Administrator Dashboard\";\n      case \"leader\": return \"Leader Dashboard\";\n      case \"client\": return \"Client Dashboard\";\n      default: return \"Dashboard\";\n    }\n  };\n\n  const getRoleDescription = (role: string) => {\n    switch (role) {\n      case \"admin\": return \"Complete overview of platform operations and client management\";\n      case \"leader\": return \"Track your team performance and referral activities\";\n      case \"client\": return \"Monitor your investments, payouts, and portfolio growth\";\n      default: return \"\";\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold tracking-tight\">{getRoleTitle(userRole)}</h1>\n        <p className=\"text-muted-foreground\">{getRoleDescription(userRole)}</p>\n      </div>\n      \n      <DashboardStats userRole={userRole} />\n      <DashboardCharts userRole={userRole} />\n    </div>\n  );\n}","size_bytes":1242},"client/src/pages/ImportPage.tsx":{"content":"import { FileUpload } from \"@/components/FileUpload\";\n\nexport default function ImportPage() {\n  return <FileUpload />;\n}","size_bytes":120},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/components/examples/AppSidebar.tsx":{"content":"import { AppSidebar } from '../app-sidebar'\n\nexport default function AppSidebarExample() {\n  return <AppSidebar />\n}","size_bytes":116},"client/src/components/examples/DashboardStats.tsx":{"content":"import { DashboardStats } from '../DashboardStats'\n\nexport default function DashboardStatsExample() {\n  return (\n    <div className=\"p-6 space-y-8\">\n      <div>\n        <h3 className=\"text-lg font-semibold mb-4\">Admin Dashboard Stats</h3>\n        <DashboardStats userRole=\"admin\" />\n      </div>\n      \n      <div>\n        <h3 className=\"text-lg font-semibold mb-4\">Leader Dashboard Stats</h3>\n        <DashboardStats userRole=\"leader\" />\n      </div>\n      \n      <div>\n        <h3 className=\"text-lg font-semibold mb-4\">Client Dashboard Stats</h3>\n        <DashboardStats userRole=\"client\" />\n      </div>\n    </div>\n  )\n}","size_bytes":624},"client/src/components/examples/DataTable.tsx":{"content":"import { TransactionTable, ClientTable } from '../DataTable'\n\nexport default function DataTableExample() {\n  //todo: remove mock functionality\n  const mockTransactions = [\n    { date: \"2024-01-15\", clientName: \"John Doe\", type: \"investment\", amount: 50000, status: \"completed\" },\n    { date: \"2024-01-14\", clientName: \"Jane Smith\", type: \"payout\", amount: 5000, status: \"pending\" },\n    { date: \"2024-01-13\", clientName: \"Bob Wilson\", type: \"withdrawal\", amount: 25000, status: \"completed\" },\n    { date: \"2024-01-12\", clientName: \"Alice Johnson\", type: \"investment\", amount: 75000, status: \"completed\" },\n  ];\n\n  const mockClients = [\n    { name: \"John Doe\", email: \"john@example.com\", mobile: \"+91-9876543210\", branch: \"Mumbai\", totalInvestment: 150000, joinDate: \"2023-06-15\" },\n    { name: \"Jane Smith\", email: \"jane@example.com\", mobile: \"+91-9876543211\", branch: \"Delhi\", totalInvestment: 85000, joinDate: \"2023-08-22\" },\n    { name: \"Bob Wilson\", email: \"bob@example.com\", mobile: \"+91-9876543212\", branch: \"Bangalore\", totalInvestment: 120000, joinDate: \"2023-04-10\" },\n    { name: \"Alice Johnson\", email: \"alice@example.com\", mobile: \"+91-9876543213\", branch: \"Chennai\", totalInvestment: 95000, joinDate: \"2023-09-05\" },\n  ];\n\n  return (\n    <div className=\"p-6 space-y-8\">\n      <TransactionTable transactions={mockTransactions} />\n      <ClientTable clients={mockClients} />\n    </div>\n  )\n}","size_bytes":1402},"client/src/components/examples/LoginForm.tsx":{"content":"import { LoginForm } from '../LoginForm'\n\nexport default function LoginFormExample() {\n  return (\n    <LoginForm \n      onLogin={(email, password, role) => \n        console.log(`Login as ${role} with ${email}`)\n      } \n    />\n  )\n}","size_bytes":232},"client/src/components/examples/PaymentForm.tsx":{"content":"import { PaymentForm } from '../PaymentForm'\n\nexport default function PaymentFormExample() {\n  return (\n    <div className=\"p-6\">\n      <PaymentForm />\n    </div>\n  )\n}","size_bytes":168},"client/src/components/examples/TrendChart.tsx":{"content":"import { DashboardCharts } from '../TrendChart'\n\nexport default function TrendChartExample() {\n  return (\n    <div className=\"p-6 space-y-8\">\n      <div>\n        <h3 className=\"text-lg font-semibold mb-4\">Admin Dashboard Charts</h3>\n        <DashboardCharts userRole=\"admin\" />\n      </div>\n      \n      <div>\n        <h3 className=\"text-lg font-semibold mb-4\">Leader Dashboard Charts</h3>\n        <DashboardCharts userRole=\"leader\" />\n      </div>\n      \n      <div>\n        <h3 className=\"text-lg font-semibold mb-4\">Client Dashboard Charts</h3>\n        <DashboardCharts userRole=\"client\" />\n      </div>\n    </div>\n  )\n}","size_bytes":623},"client/src/components/examples/WithdrawalForm.tsx":{"content":"import { WithdrawalForm } from '../WithdrawalForm'\n\nexport default function WithdrawalFormExample() {\n  return (\n    <div className=\"p-6\">\n      <WithdrawalForm />\n    </div>\n  )\n}","size_bytes":180},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(`\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1592},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1202},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":2359},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n","size_bytes":1904},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":844},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5741},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":21846},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"client/src/pages/ReportsPage.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Calendar } from \"@/components/ui/calendar\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\nimport { \n  FileText, \n  Download, \n  CalendarIcon, \n  Filter, \n  Search, \n  Loader2,\n  TrendingUp,\n  Users,\n  DollarSign \n} from \"lucide-react\";\nimport { format } from \"date-fns\";\nimport { cn } from \"@/lib/utils\";\n\ninterface FilterParams {\n  dateRange?: {\n    from?: Date;\n    to?: Date;\n  };\n  clientId?: string;\n  type?: string;\n  status?: string;\n  searchTerm?: string;\n}\n\ninterface TransactionWithClient {\n  id: string;\n  type: string;\n  amount: number;\n  status: string;\n  description?: string;\n  processedAt?: Date;\n  createdAt: Date;\n  client?: {\n    id: string;\n    clientCode: string;\n    user?: {\n      firstName: string;\n      lastName: string;\n      email: string;\n    };\n  };\n}\n\nexport default function ReportsPage() {\n  const [filters, setFilters] = useState<FilterParams>({});\n  const [showDateRangePicker, setShowDateRangePicker] = useState(false);\n\n  // Fetch transactions with filters\n  const { data: transactions = [], isLoading, error } = useQuery({\n    queryKey: ['/api/transactions', filters],\n    queryFn: async () => {\n      const params = new URLSearchParams();\n      if (filters.clientId) params.append('clientId', filters.clientId);\n      if (filters.type) params.append('type', filters.type);\n      if (filters.status) params.append('status', filters.status);\n      if (filters.dateRange?.from) params.append('startDate', filters.dateRange.from.toISOString());\n      if (filters.dateRange?.to) params.append('endDate', filters.dateRange.to.toISOString());\n      \n      const response = await fetch(`/api/transactions?${params}`);\n      if (!response.ok) {\n        throw new Error('Failed to fetch transactions');\n      }\n      return response.json();\n    }\n  });\n\n  // Fetch clients for filter dropdown\n  const { data: clients = [] } = useQuery({\n    queryKey: ['/api/clients'],\n    queryFn: async () => {\n      const response = await fetch('/api/clients');\n      if (!response.ok) {\n        throw new Error('Failed to fetch clients');\n      }\n      return response.json();\n    }\n  });\n\n  // Apply client-side filters (search term)\n  const filteredTransactions = transactions.filter((transaction: TransactionWithClient) => {\n    if (!filters.searchTerm) return true;\n    \n    const searchLower = filters.searchTerm.toLowerCase();\n    const clientName = transaction.client?.user \n      ? `${transaction.client.user.firstName} ${transaction.client.user.lastName}`.toLowerCase()\n      : '';\n    \n    return (\n      transaction.type.toLowerCase().includes(searchLower) ||\n      transaction.status.toLowerCase().includes(searchLower) ||\n      transaction.description?.toLowerCase().includes(searchLower) ||\n      clientName.includes(searchLower) ||\n      transaction.amount.toString().includes(filters.searchTerm)\n    );\n  });\n\n  // Calculate summary statistics with proper number conversion\n  const stats = {\n    totalTransactions: filteredTransactions.length,\n    totalAmount: filteredTransactions.reduce((sum: number, t: TransactionWithClient) => sum + Number(t.amount), 0),\n    investmentAmount: filteredTransactions\n      .filter((t: TransactionWithClient) => t.type === 'investment')\n      .reduce((sum: number, t: TransactionWithClient) => sum + Number(t.amount), 0),\n    withdrawalAmount: filteredTransactions\n      .filter((t: TransactionWithClient) => t.type === 'withdrawal')\n      .reduce((sum: number, t: TransactionWithClient) => sum + Number(t.amount), 0),\n    payoutAmount: filteredTransactions\n      .filter((t: TransactionWithClient) => t.type === 'payout')\n      .reduce((sum: number, t: TransactionWithClient) => sum + Number(t.amount), 0),\n    closureAmount: filteredTransactions\n      .filter((t: TransactionWithClient) => t.type === 'closure')\n      .reduce((sum: number, t: TransactionWithClient) => sum + Number(t.amount), 0),\n    netInvestment: filteredTransactions.reduce((net: number, t: TransactionWithClient) => {\n      const amount = Number(t.amount);\n      if (t.type === 'investment') return net + amount;\n      if (t.type === 'withdrawal') return net - amount;\n      return net;\n    }, 0),\n    uniqueClients: new Set(filteredTransactions.map((t: TransactionWithClient) => t.client?.id)).size\n  };\n\n  const exportToCSV = () => {\n    const headers = ['Date', 'Client', 'Type', 'Amount', 'Status', 'Description'];\n    const csvData = filteredTransactions.map((transaction: TransactionWithClient) => [\n      format(new Date(transaction.processedAt || transaction.createdAt), 'yyyy-MM-dd'),\n      transaction.client?.user \n        ? `${transaction.client.user.firstName} ${transaction.client.user.lastName}`\n        : 'Unknown Client',\n      transaction.type,\n      transaction.amount,\n      transaction.status,\n      transaction.description || ''\n    ]);\n\n    const csvContent = [headers, ...csvData].map(row => \n      row.map((field: any) => `\"${field}\"`).join(',')\n    ).join('\\n');\n\n    const blob = new Blob([csvContent], { type: 'text/csv' });\n    const url = window.URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `transactions_report_${format(new Date(), 'yyyy-MM-dd')}.csv`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    window.URL.revokeObjectURL(url);\n  };\n\n  const clearFilters = () => {\n    setFilters({});\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold tracking-tight\">Transaction Reports</h1>\n        <p className=\"text-muted-foreground\">\n          Comprehensive transaction analysis with advanced filtering and export capabilities\n        </p>\n      </div>\n\n      {/* Summary Statistics */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Transactions</CardTitle>\n            <FileText className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{stats.totalTransactions}</div>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Amount</CardTitle>\n            <DollarSign className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">â‚¹{stats.totalAmount.toLocaleString()}</div>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Net Investment</CardTitle>\n            <TrendingUp className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className={`text-2xl font-bold ${stats.netInvestment >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n              â‚¹{stats.netInvestment.toLocaleString()}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              Investments: â‚¹{stats.investmentAmount.toLocaleString()} | Withdrawals: â‚¹{stats.withdrawalAmount.toLocaleString()}\n            </p>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Active Clients</CardTitle>\n            <Users className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{stats.uniqueClients}</div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Advanced Filters */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Filter className=\"h-5 w-5\" />\n            Advanced Filters\n          </CardTitle>\n          <CardDescription>\n            Filter transactions by date range, client, type, and status\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4\">\n            {/* Date Range Filter */}\n            <div className=\"space-y-2 md:col-span-2\">\n              <Label htmlFor=\"dateRange\">Date Range</Label>\n              <Popover open={showDateRangePicker} onOpenChange={setShowDateRangePicker}>\n                <PopoverTrigger asChild>\n                  <Button\n                    variant=\"outline\"\n                    className={cn(\n                      \"w-full justify-start text-left font-normal\",\n                      !filters.dateRange?.from && \"text-muted-foreground\"\n                    )}\n                    data-testid=\"button-date-range\"\n                  >\n                    <CalendarIcon className=\"mr-2 h-4 w-4\" />\n                    {filters.dateRange?.from ? (\n                      filters.dateRange.to ? (\n                        <>\n                          {format(filters.dateRange.from, \"MMM dd, yyyy\")} - {format(filters.dateRange.to, \"MMM dd, yyyy\")}\n                        </>\n                      ) : (\n                        format(filters.dateRange.from, \"MMM dd, yyyy\")\n                      )\n                    ) : (\n                      \"Select date range\"\n                    )}\n                  </Button>\n                </PopoverTrigger>\n                <PopoverContent className=\"w-auto p-0\" align=\"start\">\n                  <Calendar\n                    mode=\"range\"\n                    defaultMonth={filters.dateRange?.from}\n                    selected={filters.dateRange}\n                    onSelect={(range) => {\n                      setFilters(prev => ({ ...prev, dateRange: range }));\n                      if (range?.from && range?.to) {\n                        setShowDateRangePicker(false);\n                      }\n                    }}\n                    numberOfMonths={2}\n                    initialFocus\n                  />\n                </PopoverContent>\n              </Popover>\n            </div>\n\n            {/* Client Filter */}\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"clientFilter\">Client</Label>\n              <Select \n                value={filters.clientId || \"all\"} \n                onValueChange={(value) => setFilters(prev => ({ ...prev, clientId: value === \"all\" ? undefined : value }))}\n              >\n                <SelectTrigger data-testid=\"select-client-filter\">\n                  <SelectValue placeholder=\"All clients\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All clients</SelectItem>\n                  {clients.map((client: any) => (\n                    <SelectItem key={client.id} value={client.id}>\n                      {client.user ? `${client.user.firstName} ${client.user.lastName}` : client.clientCode}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            {/* Transaction Type Filter */}\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"typeFilter\">Type</Label>\n              <Select \n                value={filters.type || \"all\"} \n                onValueChange={(value) => setFilters(prev => ({ ...prev, type: value === \"all\" ? undefined : value }))}\n              >\n                <SelectTrigger data-testid=\"select-type-filter\">\n                  <SelectValue placeholder=\"All types\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All types</SelectItem>\n                  <SelectItem value=\"investment\">Investment</SelectItem>\n                  <SelectItem value=\"withdrawal\">Withdrawal</SelectItem>\n                  <SelectItem value=\"payout\">Payout</SelectItem>\n                  <SelectItem value=\"closure\">Closure</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            {/* Status Filter */}\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"statusFilter\">Status</Label>\n              <Select \n                value={filters.status || \"all\"} \n                onValueChange={(value) => setFilters(prev => ({ ...prev, status: value === \"all\" ? undefined : value }))}\n              >\n                <SelectTrigger data-testid=\"select-status-filter\">\n                  <SelectValue placeholder=\"All statuses\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All statuses</SelectItem>\n                  <SelectItem value=\"pending\">Pending</SelectItem>\n                  <SelectItem value=\"completed\">Completed</SelectItem>\n                  <SelectItem value=\"cancelled\">Cancelled</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            {/* Action Buttons */}\n            <div className=\"space-y-2\">\n              <Label>&nbsp;</Label>\n              <Button\n                variant=\"outline\"\n                onClick={clearFilters}\n                className=\"w-full\"\n                data-testid=\"button-clear-filters\"\n              >\n                Clear Filters\n              </Button>\n            </div>\n          </div>\n\n          {/* Search */}\n          <div className=\"mt-4\">\n            <div className=\"relative\">\n              <Search className=\"absolute left-2 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground\" />\n              <Input\n                placeholder=\"Search transactions by client, type, description, or amount...\"\n                value={filters.searchTerm || \"\"}\n                onChange={(e) => setFilters(prev => ({ ...prev, searchTerm: e.target.value }))}\n                className=\"pl-8\"\n                data-testid=\"input-search-transactions\"\n              />\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Transactions Table */}\n      <Card>\n        <CardHeader>\n          <div className=\"flex flex-col gap-2 md:flex-row md:items-center md:justify-between\">\n            <div>\n              <CardTitle>Transaction Reports</CardTitle>\n              <CardDescription>\n                {filteredTransactions.length} transactions found\n              </CardDescription>\n            </div>\n            <Button\n              variant=\"outline\"\n              onClick={exportToCSV}\n              disabled={filteredTransactions.length === 0}\n              data-testid=\"button-export-csv\"\n            >\n              <Download className=\"h-4 w-4 mr-2\" />\n              Export CSV\n            </Button>\n          </div>\n        </CardHeader>\n        <CardContent>\n          {isLoading ? (\n            <div className=\"text-center py-8\">\n              <Loader2 className=\"h-6 w-6 animate-spin mx-auto\" />\n              <p className=\"mt-2\">Loading transactions...</p>\n            </div>\n          ) : error ? (\n            <div className=\"text-center py-8 text-red-600\">\n              Error loading transactions: {(error as Error).message}\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead>\n                  <tr className=\"border-b\">\n                    <th className=\"text-left p-2 font-medium\">Date</th>\n                    <th className=\"text-left p-2 font-medium\">Client</th>\n                    <th className=\"text-left p-2 font-medium\">Type</th>\n                    <th className=\"text-left p-2 font-medium\">Amount</th>\n                    <th className=\"text-left p-2 font-medium\">Status</th>\n                    <th className=\"text-left p-2 font-medium\">Description</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {filteredTransactions.map((transaction: TransactionWithClient) => (\n                    <tr key={transaction.id} className=\"border-b hover:bg-muted/50\">\n                      <td className=\"p-2\">\n                        {format(new Date(transaction.processedAt || transaction.createdAt), 'MMM dd, yyyy')}\n                      </td>\n                      <td className=\"p-2\">\n                        {transaction.client?.user \n                          ? `${transaction.client.user.firstName} ${transaction.client.user.lastName}`\n                          : 'Unknown Client'\n                        }\n                      </td>\n                      <td className=\"p-2\">\n                        <Badge variant={\n                          transaction.type === 'investment' ? 'default' : \n                          transaction.type === 'payout' ? 'secondary' : 'outline'\n                        }>\n                          {transaction.type.charAt(0).toUpperCase() + transaction.type.slice(1)}\n                        </Badge>\n                      </td>\n                      <td className=\"p-2 font-medium\">\n                        â‚¹{transaction.amount.toLocaleString()}\n                      </td>\n                      <td className=\"p-2\">\n                        <Badge variant={\n                          transaction.status === 'completed' ? 'default' : \n                          transaction.status === 'pending' ? 'secondary' : 'destructive'\n                        }>\n                          {transaction.status.charAt(0).toUpperCase() + transaction.status.slice(1)}\n                        </Badge>\n                      </td>\n                      <td className=\"p-2 text-sm text-muted-foreground\">\n                        {transaction.description || 'N/A'}\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n              \n              {filteredTransactions.length === 0 && (\n                <div className=\"text-center py-8 text-muted-foreground\">\n                  No transactions found matching the current filters.\n                </div>\n              )}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","size_bytes":18730},"server/db.ts":{"content":"import { Pool, neonConfig } from '@neondatabase/serverless';\nimport { drizzle } from 'drizzle-orm/neon-serverless';\nimport ws from \"ws\";\nimport * as schema from \"@shared/schema\";\n\nneonConfig.webSocketConstructor = ws;\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nexport const pool = new Pool({ connectionString: process.env.DATABASE_URL });\nexport const db = drizzle({ client: pool, schema });\n","size_bytes":483},"client/src/components/AddClientModal.tsx":{"content":"import { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { Plus, Save, X, AlertTriangle, CheckCircle } from \"lucide-react\";\n\ninterface AddClientModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\n// Client creation schema (NO PASSWORD - handled server-side)\nconst clientCreationSchema = z.object({\n  // User data\n  firstName: z.string().min(1, 'First name is required'),\n  lastName: z.string().min(1, 'Last name is required'),\n  email: z.string().email('Invalid email address'),\n  mobile: z.string().optional(),\n  // Client data\n  clientCode: z.string().min(1, 'Client code is required'),\n  panNumber: z.string().optional(),\n  aadharNumber: z.string().optional(),\n  dateOfBirth: z.string().optional(),\n  address: z.string().optional(),\n  nomineeDetails: z.string().optional(),\n  bankDetails: z.string().optional(),\n  kycStatus: z.enum(['pending', 'verified', 'rejected']).default('pending')\n});\n\ntype ClientCreationForm = z.infer<typeof clientCreationSchema>;\n\nexport function AddClientModal({ isOpen, onClose }: AddClientModalProps) {\n  const queryClient = useQueryClient();\n  const { toast } = useToast();\n\n  const form = useForm<ClientCreationForm>({\n    resolver: zodResolver(clientCreationSchema),\n    defaultValues: {\n      firstName: '',\n      lastName: '',\n      email: '',\n      mobile: '',\n      clientCode: '',\n      panNumber: '',\n      aadharNumber: '',\n      dateOfBirth: '',\n      address: '',\n      nomineeDetails: '',\n      bankDetails: '',\n      kycStatus: 'pending'\n    }\n  });\n\n  const createClientMutation = useMutation({\n    mutationFn: async (data: ClientCreationForm) => {\n      // Use new secure endpoint that generates passwords server-side\n      const response = await apiRequest('POST', '/api/clients/create', data);\n      return await response.json();\n    },\n    onSuccess: (response) => {\n      queryClient.invalidateQueries({ queryKey: ['/api/clients'] });\n      \n      const successMessage = response.emailSent \n        ? \"Client created successfully! Welcome email sent with temporary password.\"\n        : \"Client created successfully! Please provide temporary password manually.\";\n      \n      toast({\n        title: \"Success\",\n        description: successMessage,\n        action: response.emailSent ? (\n          <CheckCircle className=\"h-4 w-4 text-green-600\" />\n        ) : (\n          <AlertTriangle className=\"h-4 w-4 text-orange-600\" />\n        )\n      });\n      \n      handleClose();\n    },\n    onError: (error: any) => {\n      const errorMessage = error.details \n        ? `Validation errors: ${error.details.map((d: any) => d.message).join(', ')}`\n        : error.message || \"Failed to create client\";\n        \n      toast({\n        title: \"Error\",\n        description: errorMessage,\n        variant: \"destructive\",\n      });\n    }\n  });\n\n  const handleSubmit = (data: ClientCreationForm) => {\n    createClientMutation.mutate(data);\n  };\n\n  const handleClose = () => {\n    form.reset();\n    onClose();\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={handleClose}>\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\" data-testid=\"modal-add-client\">\n        <DialogHeader>\n          <div className=\"flex items-center justify-between\">\n            <DialogTitle className=\"flex items-center gap-2\">\n              <Plus className=\"h-5 w-5\" />\n              Add New Client\n            </DialogTitle>\n          </div>\n        </DialogHeader>\n\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(handleSubmit)} className=\"space-y-6\">\n            {/* Personal Information */}\n            <div className=\"space-y-4\">\n              <h3 className=\"text-lg font-medium\">Personal Information</h3>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"firstName\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>First Name *</FormLabel>\n                      <FormControl>\n                        <Input\n                          {...field}\n                          data-testid=\"input-first-name\"\n                          placeholder=\"Enter first name\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                \n                <FormField\n                  control={form.control}\n                  name=\"lastName\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Last Name *</FormLabel>\n                      <FormControl>\n                        <Input\n                          {...field}\n                          data-testid=\"input-last-name\"\n                          placeholder=\"Enter last name\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                \n                <FormField\n                  control={form.control}\n                  name=\"email\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Email *</FormLabel>\n                      <FormControl>\n                        <Input\n                          {...field}\n                          type=\"email\"\n                          data-testid=\"input-email\"\n                          placeholder=\"Enter email address\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                \n                <FormField\n                  control={form.control}\n                  name=\"mobile\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Mobile</FormLabel>\n                      <FormControl>\n                        <Input\n                          {...field}\n                          data-testid=\"input-mobile\"\n                          placeholder=\"Enter mobile number\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                \n                <FormField\n                  control={form.control}\n                  name=\"dateOfBirth\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Date of Birth</FormLabel>\n                      <FormControl>\n                        <Input\n                          {...field}\n                          type=\"date\"\n                          data-testid=\"input-dob\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n              \n              <FormField\n                control={form.control}\n                name=\"address\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Address</FormLabel>\n                    <FormControl>\n                      <Textarea\n                        {...field}\n                        data-testid=\"input-address\"\n                        placeholder=\"Enter address\"\n                        rows={2}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            {/* Account Information */}\n            <div className=\"space-y-4\">\n              <h3 className=\"text-lg font-medium\">Account Information</h3>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"clientCode\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Client Code *</FormLabel>\n                      <FormControl>\n                        <Input\n                          {...field}\n                          data-testid=\"input-client-code\"\n                          placeholder=\"e.g., CLI001\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                \n                <FormField\n                  control={form.control}\n                  name=\"kycStatus\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>KYC Status</FormLabel>\n                      <Select onValueChange={field.onChange} defaultValue={field.value}>\n                        <FormControl>\n                          <SelectTrigger data-testid=\"select-kyc-status\">\n                            <SelectValue placeholder=\"Select KYC status\" />\n                          </SelectTrigger>\n                        </FormControl>\n                        <SelectContent>\n                          <SelectItem value=\"pending\">Pending</SelectItem>\n                          <SelectItem value=\"verified\">Verified</SelectItem>\n                          <SelectItem value=\"rejected\">Rejected</SelectItem>\n                        </SelectContent>\n                      </Select>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                \n                <FormField\n                  control={form.control}\n                  name=\"panNumber\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>PAN Number</FormLabel>\n                      <FormControl>\n                        <Input\n                          {...field}\n                          data-testid=\"input-pan\"\n                          placeholder=\"e.g., ABCDE1234F\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                \n                <FormField\n                  control={form.control}\n                  name=\"aadharNumber\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Aadhar Number</FormLabel>\n                      <FormControl>\n                        <Input\n                          {...field}\n                          data-testid=\"input-aadhar\"\n                          placeholder=\"e.g., 1234 5678 9012\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n              \n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"nomineeDetails\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Nominee Details</FormLabel>\n                      <FormControl>\n                        <Textarea\n                          {...field}\n                          data-testid=\"input-nominee\"\n                          placeholder=\"Enter nominee information\"\n                          rows={2}\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                \n                <FormField\n                  control={form.control}\n                  name=\"bankDetails\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Bank Details</FormLabel>\n                      <FormControl>\n                        <Textarea\n                          {...field}\n                          data-testid=\"input-bank\"\n                          placeholder=\"Enter bank information\"\n                          rows={2}\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n            </div>\n\n            {/* Security Notice */}\n            <div className=\"bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 rounded-lg p-4\">\n              <div className=\"flex items-start gap-3\">\n                <CheckCircle className=\"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5\" />\n                <div className=\"text-sm text-blue-800 dark:text-blue-200\">\n                  <p className=\"font-medium\">Secure Account Creation</p>\n                  <p>A secure temporary password will be generated automatically and sent via email. No passwords are stored in the browser for security.</p>\n                </div>\n              </div>\n            </div>\n\n            {/* Action Buttons */}\n            <div className=\"flex justify-end gap-2\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={handleClose}\n                disabled={createClientMutation.isPending}\n                data-testid=\"button-cancel\"\n              >\n                <X className=\"h-4 w-4 mr-2\" />\n                Cancel\n              </Button>\n              <Button\n                type=\"submit\"\n                disabled={createClientMutation.isPending}\n                data-testid=\"button-save-client\"\n              >\n                <Save className=\"h-4 w-4 mr-2\" />\n                {createClientMutation.isPending ? 'Creating...' : 'Create Client'}\n              </Button>\n            </div>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}","size_bytes":14566},"client/src/pages/InvestmentPage.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { useState, useMemo } from \"react\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { TrendingUp, DollarSign, Users, FileText, Eye } from \"lucide-react\";\nimport { format, isWithinInterval } from \"date-fns\";\nimport { TransactionFilters } from \"@/components/TransactionFilters\";\nimport { DateRange } from \"react-day-picker\";\n\ninterface Transaction {\n  id: string;\n  type: string;\n  amount: number;\n  status: string;\n  description?: string;\n  processedAt?: Date;\n  createdAt: Date;\n  client?: {\n    id: string;\n    clientCode: string;\n    user?: {\n      firstName: string;\n      lastName: string;\n      email: string;\n    };\n  };\n}\n\ninterface FilterState {\n  dateRange?: DateRange;\n  clientId?: string;\n  description?: string;\n  status?: string;\n}\n\nexport default function InvestmentPage() {\n  // Filter state\n  const [filters, setFilters] = useState<FilterState>({});\n\n  // Fetch investment transactions only\n  const { data: investments = [], isLoading, error } = useQuery({\n    queryKey: ['/api/transactions', { type: 'investment' }],\n    queryFn: async () => {\n      const response = await fetch('/api/transactions?type=investment');\n      if (!response.ok) {\n        throw new Error('Failed to fetch investment transactions');\n      }\n      return response.json();\n    }\n  });\n\n  // Fetch clients for filter dropdown\n  const { data: clients = [] } = useQuery({\n    queryKey: ['/api/clients'],\n    queryFn: async () => {\n      const response = await fetch('/api/clients');\n      if (!response.ok) {\n        throw new Error('Failed to fetch clients');\n      }\n      return response.json();\n    }\n  });\n\n  // Apply filters to investments\n  const filteredInvestments = useMemo(() => {\n    return investments.filter((investment: Transaction) => {\n      // Date range filter\n      if (filters.dateRange?.from || filters.dateRange?.to) {\n        const transactionDate = new Date(investment.processedAt || investment.createdAt);\n        if (filters.dateRange.from && filters.dateRange.to) {\n          if (!isWithinInterval(transactionDate, {\n            start: filters.dateRange.from,\n            end: filters.dateRange.to\n          })) {\n            return false;\n          }\n        } else if (filters.dateRange.from) {\n          if (transactionDate < filters.dateRange.from) return false;\n        } else if (filters.dateRange.to) {\n          if (transactionDate > filters.dateRange.to) return false;\n        }\n      }\n\n      // Client filter\n      if (filters.clientId && investment.client?.id !== filters.clientId) {\n        return false;\n      }\n\n      // Description filter\n      if (filters.description) {\n        const description = investment.description || '';\n        if (!description.toLowerCase().includes(filters.description.toLowerCase())) {\n          return false;\n        }\n      }\n\n      // Status filter\n      if (filters.status && investment.status !== filters.status) {\n        return false;\n      }\n\n      return true;\n    });\n  }, [investments, filters]);\n\n  // Calculate investment statistics from filtered data\n  const stats = {\n    totalInvestments: filteredInvestments.length,\n    totalAmount: filteredInvestments.reduce((sum: number, inv: Transaction) => sum + Number(inv.amount), 0),\n    completedInvestments: filteredInvestments.filter((inv: Transaction) => inv.status === 'completed').length,\n    pendingInvestments: filteredInvestments.filter((inv: Transaction) => inv.status === 'pending').length,\n    uniqueClients: new Set(filteredInvestments.map((inv: Transaction) => inv.client?.id)).size\n  };\n\n  const handleFiltersChange = (newFilters: FilterState) => {\n    setFilters(newFilters);\n  };\n\n  const handleResetFilters = () => {\n    setFilters({});\n  };\n\n  if (error) {\n    return (\n      <div className=\"space-y-6\">\n        <div>\n          <h1 className=\"text-3xl font-bold tracking-tight\">Investment Management</h1>\n          <p className=\"text-muted-foreground\">Monitor and manage all investment transactions</p>\n        </div>\n        <Card>\n          <CardContent className=\"p-6 text-center\">\n            <p className=\"text-red-600\">Error loading investments: {(error as Error).message}</p>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold tracking-tight\">Investment Management</h1>\n        <p className=\"text-muted-foreground\">\n          Monitor and manage all investment transactions\n        </p>\n      </div>\n\n      {/* Filters */}\n      <TransactionFilters\n        clients={clients}\n        filters={filters}\n        onFiltersChange={handleFiltersChange}\n        onReset={handleResetFilters}\n      />\n\n      {/* Investment Statistics */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Investments</CardTitle>\n            <FileText className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{stats.totalInvestments}</div>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Investment Amount</CardTitle>\n            <DollarSign className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">â‚¹{stats.totalAmount.toLocaleString()}</div>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Completed</CardTitle>\n            <TrendingUp className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{stats.completedInvestments}</div>\n            <p className=\"text-xs text-muted-foreground\">{stats.pendingInvestments} pending</p>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Active Investors</CardTitle>\n            <Users className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{stats.uniqueClients}</div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Investment Transactions Table */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Investment Transactions</CardTitle>\n          <CardDescription>\n            Showing {filteredInvestments.length} of {investments.length} investment transactions\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          {isLoading ? (\n            <div className=\"text-center py-8\">\n              <p>Loading investment transactions...</p>\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead>\n                  <tr className=\"border-b\">\n                    <th className=\"text-left p-2 font-medium\">Date</th>\n                    <th className=\"text-left p-2 font-medium\">Client</th>\n                    <th className=\"text-left p-2 font-medium\">Amount</th>\n                    <th className=\"text-left p-2 font-medium\">Status</th>\n                    <th className=\"text-left p-2 font-medium\">Description</th>\n                    <th className=\"text-left p-2 font-medium\">Actions</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {filteredInvestments.map((investment: Transaction) => (\n                    <tr key={investment.id} className=\"border-b hover:bg-muted/50\">\n                      <td className=\"p-2\">\n                        {format(new Date(investment.processedAt || investment.createdAt), 'MMM dd, yyyy')}\n                      </td>\n                      <td className=\"p-2\">\n                        {investment.client?.user \n                          ? `${investment.client.user.firstName} ${investment.client.user.lastName}`\n                          : investment.client?.clientCode || 'Unknown Client'\n                        }\n                      </td>\n                      <td className=\"p-2 font-medium\">\n                        â‚¹{Number(investment.amount).toLocaleString()}\n                      </td>\n                      <td className=\"p-2\">\n                        <Badge variant={\n                          investment.status === 'completed' ? 'default' : \n                          investment.status === 'pending' ? 'secondary' : 'destructive'\n                        }>\n                          {investment.status.charAt(0).toUpperCase() + investment.status.slice(1)}\n                        </Badge>\n                      </td>\n                      <td className=\"p-2 text-sm text-muted-foreground\">\n                        {investment.description || 'N/A'}\n                      </td>\n                      <td className=\"p-2\">\n                        <Button variant=\"ghost\" size=\"sm\" data-testid={`button-view-investment-${investment.id}`}>\n                          <Eye className=\"h-4 w-4\" />\n                        </Button>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n              \n              {filteredInvestments.length === 0 && !isLoading && (\n                <div className=\"text-center py-8 text-muted-foreground\">\n                  {investments.length === 0 \n                    ? \"No investment transactions found.\"\n                    : \"No investment transactions match the current filters.\"\n                  }\n                </div>\n              )}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","size_bytes":10273},"client/src/pages/WithdrawalPage.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { useState, useMemo } from \"react\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { TrendingDown, DollarSign, Users, FileText, Eye } from \"lucide-react\";\nimport { format, isWithinInterval } from \"date-fns\";\nimport { TransactionFilters } from \"@/components/TransactionFilters\";\nimport { DateRange } from \"react-day-picker\";\n\ninterface Transaction {\n  id: string;\n  type: string;\n  amount: number;\n  status: string;\n  description?: string;\n  processedAt?: Date;\n  createdAt: Date;\n  client?: {\n    id: string;\n    clientCode: string;\n    user?: {\n      firstName: string;\n      lastName: string;\n      email: string;\n    };\n  };\n}\n\ninterface FilterState {\n  dateRange?: DateRange;\n  clientId?: string;\n  description?: string;\n  status?: string;\n}\n\nexport default function WithdrawalPage() {\n  // Filter state\n  const [filters, setFilters] = useState<FilterState>({});\n  // Fetch withdrawal transactions only\n  const { data: withdrawals = [], isLoading, error } = useQuery({\n    queryKey: ['/api/transactions', { type: 'withdrawal' }],\n    queryFn: async () => {\n      const response = await fetch('/api/transactions?type=withdrawal');\n      if (!response.ok) {\n        throw new Error('Failed to fetch withdrawal transactions');\n      }\n      return response.json();\n    }\n  });\n\n  // Fetch clients for filter dropdown\n  const { data: clients = [] } = useQuery({\n    queryKey: ['/api/clients'],\n    queryFn: async () => {\n      const response = await fetch('/api/clients');\n      if (!response.ok) {\n        throw new Error('Failed to fetch clients');\n      }\n      return response.json();\n    }\n  });\n\n  // Apply filters to withdrawals\n  const filteredWithdrawals = useMemo(() => {\n    return withdrawals.filter((withdrawal: Transaction) => {\n      // Date range filter\n      if (filters.dateRange?.from || filters.dateRange?.to) {\n        const transactionDate = new Date(withdrawal.processedAt || withdrawal.createdAt);\n        if (filters.dateRange.from && filters.dateRange.to) {\n          if (!isWithinInterval(transactionDate, {\n            start: filters.dateRange.from,\n            end: filters.dateRange.to\n          })) {\n            return false;\n          }\n        } else if (filters.dateRange.from) {\n          if (transactionDate < filters.dateRange.from) return false;\n        } else if (filters.dateRange.to) {\n          if (transactionDate > filters.dateRange.to) return false;\n        }\n      }\n\n      // Client filter\n      if (filters.clientId && withdrawal.client?.id !== filters.clientId) {\n        return false;\n      }\n\n      // Description filter\n      if (filters.description) {\n        const description = withdrawal.description || '';\n        if (!description.toLowerCase().includes(filters.description.toLowerCase())) {\n          return false;\n        }\n      }\n\n      // Status filter\n      if (filters.status && withdrawal.status !== filters.status) {\n        return false;\n      }\n\n      return true;\n    });\n  }, [withdrawals, filters]);\n\n  // Calculate withdrawal statistics from filtered data\n  const stats = {\n    totalWithdrawals: filteredWithdrawals.length,\n    totalAmount: filteredWithdrawals.reduce((sum: number, w: Transaction) => sum + Number(w.amount), 0),\n    completedWithdrawals: filteredWithdrawals.filter((w: Transaction) => w.status === 'completed').length,\n    pendingWithdrawals: filteredWithdrawals.filter((w: Transaction) => w.status === 'pending').length,\n    uniqueClients: new Set(filteredWithdrawals.map((w: Transaction) => w.client?.id)).size\n  };\n\n  const handleFiltersChange = (newFilters: FilterState) => {\n    setFilters(newFilters);\n  };\n\n  const handleResetFilters = () => {\n    setFilters({});\n  };\n\n  if (error) {\n    return (\n      <div className=\"space-y-6\">\n        <div>\n          <h1 className=\"text-3xl font-bold tracking-tight\">Withdrawal Management</h1>\n          <p className=\"text-muted-foreground\">Monitor and manage all withdrawal transactions</p>\n        </div>\n        <Card>\n          <CardContent className=\"p-6 text-center\">\n            <p className=\"text-red-600\">Error loading withdrawals: {(error as Error).message}</p>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold tracking-tight\">Withdrawal Management</h1>\n        <p className=\"text-muted-foreground\">\n          Monitor and manage all withdrawal transactions\n        </p>\n      </div>\n\n      {/* Filters */}\n      <TransactionFilters\n        clients={clients}\n        filters={filters}\n        onFiltersChange={handleFiltersChange}\n        onReset={handleResetFilters}\n      />\n\n      {/* Withdrawal Statistics */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Withdrawals</CardTitle>\n            <FileText className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{stats.totalWithdrawals}</div>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Withdrawal Amount</CardTitle>\n            <DollarSign className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">â‚¹{stats.totalAmount.toLocaleString()}</div>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Completed</CardTitle>\n            <TrendingDown className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{stats.completedWithdrawals}</div>\n            <p className=\"text-xs text-muted-foreground\">{stats.pendingWithdrawals} pending</p>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Active Clients</CardTitle>\n            <Users className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{stats.uniqueClients}</div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Withdrawal Transactions Table */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Withdrawal Transactions</CardTitle>\n          <CardDescription>\n            Showing {filteredWithdrawals.length} of {withdrawals.length} withdrawal transactions\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          {isLoading ? (\n            <div className=\"text-center py-8\">\n              <p>Loading withdrawal transactions...</p>\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead>\n                  <tr className=\"border-b\">\n                    <th className=\"text-left p-2 font-medium\">Date</th>\n                    <th className=\"text-left p-2 font-medium\">Client</th>\n                    <th className=\"text-left p-2 font-medium\">Amount</th>\n                    <th className=\"text-left p-2 font-medium\">Status</th>\n                    <th className=\"text-left p-2 font-medium\">Description</th>\n                    <th className=\"text-left p-2 font-medium\">Actions</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {filteredWithdrawals.map((withdrawal: Transaction) => (\n                    <tr key={withdrawal.id} className=\"border-b hover:bg-muted/50\">\n                      <td className=\"p-2\">\n                        {format(new Date(withdrawal.processedAt || withdrawal.createdAt), 'MMM dd, yyyy')}\n                      </td>\n                      <td className=\"p-2\">\n                        {withdrawal.client?.user \n                          ? `${withdrawal.client.user.firstName} ${withdrawal.client.user.lastName}`\n                          : withdrawal.client?.clientCode || 'Unknown Client'\n                        }\n                      </td>\n                      <td className=\"p-2 font-medium\">\n                        â‚¹{Number(withdrawal.amount).toLocaleString()}\n                      </td>\n                      <td className=\"p-2\">\n                        <Badge variant={\n                          withdrawal.status === 'completed' ? 'default' : \n                          withdrawal.status === 'pending' ? 'secondary' : 'destructive'\n                        }>\n                          {withdrawal.status.charAt(0).toUpperCase() + withdrawal.status.slice(1)}\n                        </Badge>\n                      </td>\n                      <td className=\"p-2 text-sm text-muted-foreground\">\n                        {withdrawal.description || 'N/A'}\n                      </td>\n                      <td className=\"p-2\">\n                        <Button variant=\"ghost\" size=\"sm\" data-testid={`button-view-withdrawal-${withdrawal.id}`}>\n                          <Eye className=\"h-4 w-4\" />\n                        </Button>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n              \n              {filteredWithdrawals.length === 0 && !isLoading && (\n                <div className=\"text-center py-8 text-muted-foreground\">\n                  {withdrawals.length === 0 \n                    ? \"No withdrawal transactions found.\"\n                    : \"No withdrawal transactions match the current filters.\"\n                  }\n                </div>\n              )}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","size_bytes":10258},"server/emailService.ts":{"content":"// Based on SendGrid integration from blueprint:javascript_sendgrid\nimport { MailService } from '@sendgrid/mail';\n\n// Initialize SendGrid if API key is available\nlet mailService: MailService | null = null;\n\nif (process.env.SENDGRID_API_KEY) {\n  mailService = new MailService();\n  mailService.setApiKey(process.env.SENDGRID_API_KEY);\n} else {\n  console.warn('SENDGRID_API_KEY not configured - email notifications disabled');\n}\n\ninterface EmailParams {\n  to: string;\n  from: string;\n  subject: string;\n  text?: string;\n  html?: string;\n}\n\nexport async function sendEmail(params: EmailParams): Promise<boolean> {\n  if (!mailService) {\n    console.log('Email service not configured - skipping email to:', params.to);\n    return false;\n  }\n\n  try {\n    await mailService.send({\n      to: params.to,\n      from: params.from,\n      subject: params.subject,\n      text: params.text,\n      html: params.html,\n    });\n    return true;\n  } catch (error) {\n    console.error('SendGrid email error:', error);\n    return false;\n  }\n}\n\n// Generate secure random password\nexport function generateSecurePassword(): string {\n  const length = 12;\n  const charset = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*';\n  let password = '';\n  \n  for (let i = 0; i < length; i++) {\n    const randomIndex = Math.floor(Math.random() * charset.length);\n    password += charset[randomIndex];\n  }\n  \n  return password;\n}\n\n// Send welcome email with temporary password\nexport async function sendWelcomeEmail(userEmail: string, userName: string, temporaryPassword: string): Promise<boolean> {\n  const emailParams: EmailParams = {\n    to: userEmail,\n    from: 'noreply@company.com', // You should configure this with your actual domain\n    subject: 'Welcome - Your Account Has Been Created',\n    text: `Dear ${userName},\n\nYour account has been successfully created!\n\nLogin Details:\nEmail: ${userEmail}\nTemporary Password: ${temporaryPassword}\n\nPlease log in and change your password immediately for security.\n\nThank you!`,\n    html: `\n      <h2>Welcome ${userName}!</h2>\n      <p>Your account has been successfully created.</p>\n      \n      <h3>Login Details:</h3>\n      <ul>\n        <li><strong>Email:</strong> ${userEmail}</li>\n        <li><strong>Temporary Password:</strong> <code>${temporaryPassword}</code></li>\n      </ul>\n      \n      <p><strong>Important:</strong> Please log in and change your password immediately for security.</p>\n      \n      <p>Thank you!</p>\n    `\n  };\n\n  return await sendEmail(emailParams);\n}","size_bytes":2517},"client/src/pages/ClosurePage.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { useState, useMemo } from \"react\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { FileX, DollarSign, Users, FileText, Eye } from \"lucide-react\";\nimport { format, isWithinInterval } from \"date-fns\";\nimport { TransactionFilters } from \"@/components/TransactionFilters\";\nimport { DateRange } from \"react-day-picker\";\n\ninterface Transaction {\n  id: string;\n  type: string;\n  amount: number;\n  status: string;\n  description?: string;\n  processedAt?: Date;\n  createdAt: Date;\n  client?: {\n    id: string;\n    clientCode: string;\n    user?: {\n      firstName: string;\n      lastName: string;\n      email: string;\n    };\n  };\n}\n\ninterface FilterState {\n  dateRange?: DateRange;\n  clientId?: string;\n  description?: string;\n  status?: string;\n}\n\nexport default function ClosurePage() {\n  // Filter state\n  const [filters, setFilters] = useState<FilterState>({});\n  // Fetch closure transactions only\n  const { data: closures = [], isLoading, error } = useQuery({\n    queryKey: ['/api/transactions', { type: 'closure' }],\n    queryFn: async () => {\n      const response = await fetch('/api/transactions?type=closure');\n      if (!response.ok) {\n        throw new Error('Failed to fetch closure transactions');\n      }\n      return response.json();\n    }\n  });\n\n  // Fetch clients for filter dropdown\n  const { data: clients = [] } = useQuery({\n    queryKey: ['/api/clients'],\n    queryFn: async () => {\n      const response = await fetch('/api/clients');\n      if (!response.ok) {\n        throw new Error('Failed to fetch clients');\n      }\n      return response.json();\n    }\n  });\n\n  // Apply filters to closures\n  const filteredClosures = useMemo(() => {\n    return closures.filter((closure: Transaction) => {\n      // Date range filter\n      if (filters.dateRange?.from || filters.dateRange?.to) {\n        const transactionDate = new Date(closure.processedAt || closure.createdAt);\n        if (filters.dateRange.from && filters.dateRange.to) {\n          if (!isWithinInterval(transactionDate, {\n            start: filters.dateRange.from,\n            end: filters.dateRange.to\n          })) {\n            return false;\n          }\n        } else if (filters.dateRange.from) {\n          if (transactionDate < filters.dateRange.from) return false;\n        } else if (filters.dateRange.to) {\n          if (transactionDate > filters.dateRange.to) return false;\n        }\n      }\n\n      // Client filter\n      if (filters.clientId && closure.client?.id !== filters.clientId) {\n        return false;\n      }\n\n      // Description filter\n      if (filters.description) {\n        const description = closure.description || '';\n        if (!description.toLowerCase().includes(filters.description.toLowerCase())) {\n          return false;\n        }\n      }\n\n      // Status filter\n      if (filters.status && closure.status !== filters.status) {\n        return false;\n      }\n\n      return true;\n    });\n  }, [closures, filters]);\n\n  // Calculate closure statistics from filtered data\n  const stats = {\n    totalClosures: filteredClosures.length,\n    totalAmount: filteredClosures.reduce((sum: number, closure: Transaction) => sum + Number(closure.amount), 0),\n    completedClosures: filteredClosures.filter((closure: Transaction) => closure.status === 'completed').length,\n    pendingClosures: filteredClosures.filter((closure: Transaction) => closure.status === 'pending').length,\n    uniqueClients: new Set(filteredClosures.map((closure: Transaction) => closure.client?.id)).size\n  };\n\n  const handleFiltersChange = (newFilters: FilterState) => {\n    setFilters(newFilters);\n  };\n\n  const handleResetFilters = () => {\n    setFilters({});\n  };\n\n  if (error) {\n    return (\n      <div className=\"space-y-6\">\n        <div>\n          <h1 className=\"text-3xl font-bold tracking-tight\">Account Closure Management</h1>\n          <p className=\"text-muted-foreground\">Monitor and manage all account closure transactions</p>\n        </div>\n        <Card>\n          <CardContent className=\"p-6 text-center\">\n            <p className=\"text-red-600\">Error loading closures: {(error as Error).message}</p>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold tracking-tight\">Account Closure Management</h1>\n        <p className=\"text-muted-foreground\">\n          Monitor and manage all account closure transactions\n        </p>\n      </div>\n\n      {/* Filters */}\n      <TransactionFilters\n        clients={clients}\n        filters={filters}\n        onFiltersChange={handleFiltersChange}\n        onReset={handleResetFilters}\n      />\n\n      {/* Closure Statistics */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Closures</CardTitle>\n            <FileText className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{stats.totalClosures}</div>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Closure Value</CardTitle>\n            <DollarSign className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">â‚¹{stats.totalAmount.toLocaleString()}</div>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Completed</CardTitle>\n            <FileX className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{stats.completedClosures}</div>\n            <p className=\"text-xs text-muted-foreground\">{stats.pendingClosures} pending</p>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Active Clients</CardTitle>\n            <Users className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{stats.uniqueClients}</div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Closure Transactions Table */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Account Closure Transactions</CardTitle>\n          <CardDescription>\n            Showing {filteredClosures.length} of {closures.length} closure transactions\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          {isLoading ? (\n            <div className=\"text-center py-8\">\n              <p>Loading closure transactions...</p>\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead>\n                  <tr className=\"border-b\">\n                    <th className=\"text-left p-2 font-medium\">Date</th>\n                    <th className=\"text-left p-2 font-medium\">Client</th>\n                    <th className=\"text-left p-2 font-medium\">Closure Amount</th>\n                    <th className=\"text-left p-2 font-medium\">Status</th>\n                    <th className=\"text-left p-2 font-medium\">Description</th>\n                    <th className=\"text-left p-2 font-medium\">Actions</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {filteredClosures.map((closure: Transaction) => (\n                    <tr key={closure.id} className=\"border-b hover:bg-muted/50\">\n                      <td className=\"p-2\">\n                        {format(new Date(closure.processedAt || closure.createdAt), 'MMM dd, yyyy')}\n                      </td>\n                      <td className=\"p-2\">\n                        {closure.client?.user \n                          ? `${closure.client.user.firstName} ${closure.client.user.lastName}`\n                          : closure.client?.clientCode || 'Unknown Client'\n                        }\n                      </td>\n                      <td className=\"p-2 font-medium\">\n                        â‚¹{Number(closure.amount).toLocaleString()}\n                      </td>\n                      <td className=\"p-2\">\n                        <Badge variant={\n                          closure.status === 'completed' ? 'default' : \n                          closure.status === 'pending' ? 'secondary' : 'destructive'\n                        }>\n                          {closure.status.charAt(0).toUpperCase() + closure.status.slice(1)}\n                        </Badge>\n                      </td>\n                      <td className=\"p-2 text-sm text-muted-foreground\">\n                        {closure.description || 'N/A'}\n                      </td>\n                      <td className=\"p-2\">\n                        <Button variant=\"ghost\" size=\"sm\" data-testid={`button-view-closure-${closure.id}`}>\n                          <Eye className=\"h-4 w-4\" />\n                        </Button>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n              \n              {filteredClosures.length === 0 && !isLoading && (\n                <div className=\"text-center py-8 text-muted-foreground\">\n                  {closures.length === 0 \n                    ? \"No closure transactions found.\"\n                    : \"No closure transactions match the current filters.\"\n                  }\n                </div>\n              )}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","size_bytes":10150},"client/src/pages/PayoutPage.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { useState, useMemo } from \"react\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { TrendingDown, DollarSign, Users, FileText, Eye } from \"lucide-react\";\nimport { format, isWithinInterval } from \"date-fns\";\nimport { TransactionFilters } from \"@/components/TransactionFilters\";\nimport { DateRange } from \"react-day-picker\";\n\ninterface Transaction {\n  id: string;\n  type: string;\n  amount: number;\n  status: string;\n  description?: string;\n  processedAt?: Date;\n  createdAt: Date;\n  client?: {\n    id: string;\n    clientCode: string;\n    user?: {\n      firstName: string;\n      lastName: string;\n      email: string;\n    };\n  };\n}\n\ninterface FilterState {\n  dateRange?: DateRange;\n  clientId?: string;\n  description?: string;\n  status?: string;\n}\n\nexport default function PayoutPage() {\n  // Filter state\n  const [filters, setFilters] = useState<FilterState>({});\n  // Fetch payout transactions only\n  const { data: payouts = [], isLoading, error } = useQuery({\n    queryKey: ['/api/transactions', { type: 'payout' }],\n    queryFn: async () => {\n      const response = await fetch('/api/transactions?type=payout');\n      if (!response.ok) {\n        throw new Error('Failed to fetch payout transactions');\n      }\n      return response.json();\n    }\n  });\n\n  // Fetch clients for filter dropdown\n  const { data: clients = [] } = useQuery({\n    queryKey: ['/api/clients'],\n    queryFn: async () => {\n      const response = await fetch('/api/clients');\n      if (!response.ok) {\n        throw new Error('Failed to fetch clients');\n      }\n      return response.json();\n    }\n  });\n\n  // Apply filters to payouts\n  const filteredPayouts = useMemo(() => {\n    return payouts.filter((payout: Transaction) => {\n      // Date range filter\n      if (filters.dateRange?.from || filters.dateRange?.to) {\n        const transactionDate = new Date(payout.processedAt || payout.createdAt);\n        if (filters.dateRange.from && filters.dateRange.to) {\n          if (!isWithinInterval(transactionDate, {\n            start: filters.dateRange.from,\n            end: filters.dateRange.to\n          })) {\n            return false;\n          }\n        } else if (filters.dateRange.from) {\n          if (transactionDate < filters.dateRange.from) return false;\n        } else if (filters.dateRange.to) {\n          if (transactionDate > filters.dateRange.to) return false;\n        }\n      }\n\n      // Client filter\n      if (filters.clientId && payout.client?.id !== filters.clientId) {\n        return false;\n      }\n\n      // Description filter\n      if (filters.description) {\n        const description = payout.description || '';\n        if (!description.toLowerCase().includes(filters.description.toLowerCase())) {\n          return false;\n        }\n      }\n\n      // Status filter\n      if (filters.status && payout.status !== filters.status) {\n        return false;\n      }\n\n      return true;\n    });\n  }, [payouts, filters]);\n\n  // Calculate payout statistics from filtered data\n  const stats = {\n    totalPayouts: filteredPayouts.length,\n    totalAmount: filteredPayouts.reduce((sum: number, payout: Transaction) => sum + Number(payout.amount), 0),\n    completedPayouts: filteredPayouts.filter((payout: Transaction) => payout.status === 'completed').length,\n    pendingPayouts: filteredPayouts.filter((payout: Transaction) => payout.status === 'pending').length,\n    uniqueClients: new Set(filteredPayouts.map((payout: Transaction) => payout.client?.id)).size\n  };\n\n  const handleFiltersChange = (newFilters: FilterState) => {\n    setFilters(newFilters);\n  };\n\n  const handleResetFilters = () => {\n    setFilters({});\n  };\n\n  if (error) {\n    return (\n      <div className=\"space-y-6\">\n        <div>\n          <h1 className=\"text-3xl font-bold tracking-tight\">Payout Management</h1>\n          <p className=\"text-muted-foreground\">Monitor and manage all payout transactions</p>\n        </div>\n        <Card>\n          <CardContent className=\"p-6 text-center\">\n            <p className=\"text-red-600\">Error loading payouts: {(error as Error).message}</p>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold tracking-tight\">Payout Management</h1>\n        <p className=\"text-muted-foreground\">\n          Monitor and manage all payout transactions\n        </p>\n      </div>\n\n      {/* Filters */}\n      <TransactionFilters\n        clients={clients}\n        filters={filters}\n        onFiltersChange={handleFiltersChange}\n        onReset={handleResetFilters}\n      />\n\n      {/* Payout Statistics */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Payouts</CardTitle>\n            <FileText className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{stats.totalPayouts}</div>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Payout Amount</CardTitle>\n            <DollarSign className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">â‚¹{stats.totalAmount.toLocaleString()}</div>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Completed</CardTitle>\n            <TrendingDown className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{stats.completedPayouts}</div>\n            <p className=\"text-xs text-muted-foreground\">{stats.pendingPayouts} pending</p>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Active Clients</CardTitle>\n            <Users className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{stats.uniqueClients}</div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Payout Transactions Table */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Payout Transactions</CardTitle>\n          <CardDescription>\n            Showing {filteredPayouts.length} of {payouts.length} payout transactions\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          {isLoading ? (\n            <div className=\"text-center py-8\">\n              <p>Loading payout transactions...</p>\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead>\n                  <tr className=\"border-b\">\n                    <th className=\"text-left p-2 font-medium\">Date</th>\n                    <th className=\"text-left p-2 font-medium\">Client</th>\n                    <th className=\"text-left p-2 font-medium\">Amount</th>\n                    <th className=\"text-left p-2 font-medium\">Status</th>\n                    <th className=\"text-left p-2 font-medium\">Description</th>\n                    <th className=\"text-left p-2 font-medium\">Actions</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {filteredPayouts.map((payout: Transaction) => (\n                    <tr key={payout.id} className=\"border-b hover:bg-muted/50\">\n                      <td className=\"p-2\">\n                        {format(new Date(payout.processedAt || payout.createdAt), 'MMM dd, yyyy')}\n                      </td>\n                      <td className=\"p-2\">\n                        {payout.client?.user \n                          ? `${payout.client.user.firstName} ${payout.client.user.lastName}`\n                          : payout.client?.clientCode || 'Unknown Client'\n                        }\n                      </td>\n                      <td className=\"p-2 font-medium\">\n                        â‚¹{Number(payout.amount).toLocaleString()}\n                      </td>\n                      <td className=\"p-2\">\n                        <Badge variant={\n                          payout.status === 'completed' ? 'default' : \n                          payout.status === 'pending' ? 'secondary' : 'destructive'\n                        }>\n                          {payout.status.charAt(0).toUpperCase() + payout.status.slice(1)}\n                        </Badge>\n                      </td>\n                      <td className=\"p-2 text-sm text-muted-foreground\">\n                        {payout.description || 'N/A'}\n                      </td>\n                      <td className=\"p-2\">\n                        <Button variant=\"ghost\" size=\"sm\" data-testid={`button-view-payout-${payout.id}`}>\n                          <Eye className=\"h-4 w-4\" />\n                        </Button>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n              \n              {filteredPayouts.length === 0 && !isLoading && (\n                <div className=\"text-center py-8 text-muted-foreground\">\n                  {payouts.length === 0 \n                    ? \"No payout transactions found.\"\n                    : \"No payout transactions match the current filters.\"\n                  }\n                </div>\n              )}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","size_bytes":10046},"client/src/components/TransactionFilters.tsx":{"content":"import { useState } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\nimport { Calendar } from \"@/components/ui/calendar\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { CalendarIcon, Filter, X } from \"lucide-react\";\nimport { format } from \"date-fns\";\nimport { DateRange } from \"react-day-picker\";\n\ninterface Client {\n  id: string;\n  clientCode: string;\n  user?: {\n    firstName: string;\n    lastName: string;\n  };\n}\n\ninterface FilterState {\n  dateRange?: DateRange;\n  clientId?: string;\n  description?: string;\n  status?: string;\n}\n\ninterface TransactionFiltersProps {\n  clients?: Client[];\n  filters: FilterState;\n  onFiltersChange: (filters: FilterState) => void;\n  onReset: () => void;\n  hideClientFilter?: boolean; // Hide client filter for client users\n}\n\nexport function TransactionFilters({ clients = [], filters, onFiltersChange, onReset, hideClientFilter = false }: TransactionFiltersProps) {\n  const [isOpen, setIsOpen] = useState(false);\n\n  const handleDateRangeChange = (dateRange: DateRange | undefined) => {\n    onFiltersChange({ ...filters, dateRange });\n  };\n\n  const handleClientChange = (clientId: string) => {\n    onFiltersChange({ ...filters, clientId: clientId === \"all\" ? undefined : clientId });\n  };\n\n  const handleDescriptionChange = (description: string) => {\n    onFiltersChange({ ...filters, description: description.trim() || undefined });\n  };\n\n  const handleStatusChange = (status: string) => {\n    onFiltersChange({ ...filters, status: status === \"all\" ? undefined : status });\n  };\n\n  const getActiveFiltersCount = () => {\n    let count = 0;\n    if (filters.dateRange?.from || filters.dateRange?.to) count++;\n    if (filters.clientId && !hideClientFilter) count++;\n    if (filters.description) count++;\n    if (filters.status) count++;\n    return count;\n  };\n\n  const selectedClient = clients.find(c => c.id === filters.clientId);\n\n  return (\n    <Card>\n      <CardHeader>\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"flex items-center gap-2\">\n            <Filter className=\"h-4 w-4\" />\n            Filters\n            {getActiveFiltersCount() > 0 && (\n              <Badge variant=\"secondary\">{getActiveFiltersCount()}</Badge>\n            )}\n          </CardTitle>\n          <div className=\"flex items-center gap-2\">\n            {getActiveFiltersCount() > 0 && (\n              <Button variant=\"outline\" size=\"sm\" onClick={onReset} data-testid=\"button-reset-filters\">\n                <X className=\"h-4 w-4 mr-1\" />\n                Clear All\n              </Button>\n            )}\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => setIsOpen(!isOpen)}\n              data-testid=\"button-toggle-filters\"\n            >\n              {isOpen ? 'Hide' : 'Show'} Filters\n            </Button>\n          </div>\n        </div>\n      </CardHeader>\n      \n      {isOpen && (\n        <CardContent>\n          <div className={`grid grid-cols-1 md:grid-cols-2 ${hideClientFilter ? 'lg:grid-cols-3' : 'lg:grid-cols-4'} gap-4`}>\n            {/* Date Range Filter */}\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium\">Date Range</label>\n              <Popover>\n                <PopoverTrigger asChild>\n                  <Button\n                    variant=\"outline\"\n                    className=\"w-full justify-start text-left font-normal\"\n                    data-testid=\"button-date-range\"\n                  >\n                    <CalendarIcon className=\"mr-2 h-4 w-4\" />\n                    {filters.dateRange?.from ? (\n                      filters.dateRange.to ? (\n                        <>\n                          {format(filters.dateRange.from, \"LLL dd, y\")} -{\" \"}\n                          {format(filters.dateRange.to, \"LLL dd, y\")}\n                        </>\n                      ) : (\n                        format(filters.dateRange.from, \"LLL dd, y\")\n                      )\n                    ) : (\n                      <span>Pick a date range</span>\n                    )}\n                  </Button>\n                </PopoverTrigger>\n                <PopoverContent className=\"w-auto p-0\" align=\"start\">\n                  <Calendar\n                    initialFocus\n                    mode=\"range\"\n                    defaultMonth={filters.dateRange?.from}\n                    selected={filters.dateRange}\n                    onSelect={handleDateRangeChange}\n                    numberOfMonths={2}\n                  />\n                </PopoverContent>\n              </Popover>\n            </div>\n\n            {/* Client Filter - Hidden for client users */}\n            {!hideClientFilter && (\n              <div className=\"space-y-2\">\n                <label className=\"text-sm font-medium\">Client</label>\n                <Select\n                  value={filters.clientId || \"all\"}\n                  onValueChange={handleClientChange}\n                >\n                  <SelectTrigger data-testid=\"select-client\">\n                    <SelectValue placeholder=\"Select client\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">All Clients</SelectItem>\n                    {clients.map((client) => (\n                      <SelectItem key={client.id} value={client.id}>\n                        {client.user \n                          ? `${client.user.firstName} ${client.user.lastName} (${client.clientCode})`\n                          : client.clientCode\n                        }\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n            )}\n\n            {/* Description Filter */}\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium\">Description</label>\n              <Input\n                placeholder=\"Search description...\"\n                value={filters.description || \"\"}\n                onChange={(e) => handleDescriptionChange(e.target.value)}\n                data-testid=\"input-description\"\n              />\n            </div>\n\n            {/* Status Filter */}\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium\">Status</label>\n              <Select\n                value={filters.status || \"all\"}\n                onValueChange={handleStatusChange}\n              >\n                <SelectTrigger data-testid=\"select-status\">\n                  <SelectValue placeholder=\"Select status\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Statuses</SelectItem>\n                  <SelectItem value=\"completed\">Completed</SelectItem>\n                  <SelectItem value=\"pending\">Pending</SelectItem>\n                  <SelectItem value=\"failed\">Failed</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n\n          {/* Active Filters Display */}\n          {getActiveFiltersCount() > 0 && (\n            <div className=\"flex flex-wrap gap-2 mt-4 pt-4 border-t\">\n              {filters.dateRange?.from && (\n                <Badge variant=\"outline\" className=\"flex items-center gap-1\">\n                  Date: {format(filters.dateRange.from, \"MMM dd\")}\n                  {filters.dateRange.to && ` - ${format(filters.dateRange.to, \"MMM dd\")}`}\n                  <X \n                    className=\"h-3 w-3 ml-1 cursor-pointer\" \n                    onClick={() => handleDateRangeChange(undefined)}\n                  />\n                </Badge>\n              )}\n              {selectedClient && !hideClientFilter && (\n                <Badge variant=\"outline\" className=\"flex items-center gap-1\">\n                  Client: {selectedClient.user \n                    ? `${selectedClient.user.firstName} ${selectedClient.user.lastName}`\n                    : selectedClient.clientCode\n                  }\n                  <X \n                    className=\"h-3 w-3 ml-1 cursor-pointer\" \n                    onClick={() => handleClientChange(\"all\")}\n                  />\n                </Badge>\n              )}\n              {filters.description && (\n                <Badge variant=\"outline\" className=\"flex items-center gap-1\">\n                  Description: \"{filters.description}\"\n                  <X \n                    className=\"h-3 w-3 ml-1 cursor-pointer\" \n                    onClick={() => handleDescriptionChange(\"\")}\n                  />\n                </Badge>\n              )}\n              {filters.status && (\n                <Badge variant=\"outline\" className=\"flex items-center gap-1\">\n                  Status: {filters.status.charAt(0).toUpperCase() + filters.status.slice(1)}\n                  <X \n                    className=\"h-3 w-3 ml-1 cursor-pointer\" \n                    onClick={() => handleStatusChange(\"all\")}\n                  />\n                </Badge>\n              )}\n            </div>\n          )}\n        </CardContent>\n      )}\n    </Card>\n  );\n}","size_bytes":9366},"client/src/contexts/AuthContext.tsx":{"content":"import { createContext, useContext, useState, useEffect, ReactNode } from 'react';\n\ninterface User {\n  id: string;\n  email: string;\n  mobile: string;\n  role: 'admin' | 'leader' | 'client';\n  firstName: string;\n  lastName: string;\n  branchId: string;\n  isActive: boolean;\n  createdAt: string;\n}\n\ninterface Client {\n  id: string;\n  userId: string;\n  clientCode: string;\n  panNumber?: string;\n  aadharNumber?: string;\n  dateOfBirth?: string;\n  address?: string;\n  nomineeDetails?: string;\n  bankDetails?: string;\n  kycStatus: string;\n  totalInvestment: string;\n  currentValue: string;\n  createdAt: string;\n}\n\ninterface AuthContextType {\n  user: User | null;\n  client: Client | null;\n  isLoggedIn: boolean;\n  login: (email: string, password: string) => Promise<void>;\n  logout: () => void;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n\ninterface AuthProviderProps {\n  children: ReactNode;\n}\n\nexport const AuthProvider = ({ children }: AuthProviderProps) => {\n  const [user, setUser] = useState<User | null>(null);\n  const [client, setClient] = useState<Client | null>(null);\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n\n  const login = async (email: string, password: string) => {\n    try {\n      const response = await fetch('/api/auth/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ email, password }),\n      });\n      \n      if (response.ok) {\n        const data = await response.json();\n        console.log(\"Login successful:\", data);\n        setUser(data.user);\n        setIsLoggedIn(true);\n\n        // If user is a client, fetch their client details\n        if (data.user.role === 'client') {\n          try {\n            const clientResponse = await fetch(`/api/clients/user/${data.user.id}`);\n            if (clientResponse.ok) {\n              const clientData = await clientResponse.json();\n              setClient(clientData);\n            }\n          } catch (error) {\n            console.error(\"Failed to fetch client details:\", error);\n          }\n        }\n      } else {\n        const errorData = await response.json();\n        throw new Error(errorData.error || \"Login failed\");\n      }\n    } catch (error) {\n      console.error(\"Login error:\", error);\n      throw error;\n    }\n  };\n\n  const logout = () => {\n    setUser(null);\n    setClient(null);\n    setIsLoggedIn(false);\n  };\n\n  // Check for existing session on mount (optional - would require session storage)\n  useEffect(() => {\n    // Could implement session persistence here if needed\n  }, []);\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user,\n        client,\n        isLoggedIn,\n        login,\n        logout,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n};","size_bytes":3000},"client/src/pages/client/MyClosuresPage.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { useState, useMemo } from \"react\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { FileX, DollarSign, FileText, Eye } from \"lucide-react\";\nimport { format, isWithinInterval } from \"date-fns\";\nimport { TransactionFilters } from \"@/components/TransactionFilters\";\nimport { DateRange } from \"react-day-picker\";\n\ninterface Transaction {\n  id: string;\n  type: string;\n  amount: number;\n  status: string;\n  description?: string;\n  processedAt?: Date;\n  createdAt: Date;\n  client?: {\n    id: string;\n    clientCode: string;\n    user?: {\n      firstName: string;\n      lastName: string;\n      email: string;\n    };\n  };\n}\n\ninterface FilterState {\n  dateRange?: DateRange;\n  description?: string;\n  status?: string;\n}\n\ninterface MyClosuresPageProps {\n  clientId: string;\n}\n\nexport default function MyClosuresPage({ clientId }: MyClosuresPageProps) {\n  const [filters, setFilters] = useState<FilterState>({});\n\n  const { data: closures = [], isLoading, error } = useQuery({\n    queryKey: ['/api/clients', clientId, 'transactions', { type: 'closure' }],\n    queryFn: async () => {\n      const response = await fetch(`/api/clients/${clientId}/transactions?type=closure`);\n      if (!response.ok) {\n        throw new Error('Failed to fetch your closure transactions');\n      }\n      return response.json();\n    },\n    enabled: !!clientId,\n  });\n\n  const filteredClosures = useMemo(() => {\n    return closures.filter((closure: Transaction) => {\n      // Date range filter\n      if (filters.dateRange?.from || filters.dateRange?.to) {\n        const transactionDate = new Date(closure.processedAt || closure.createdAt);\n        if (filters.dateRange.from && filters.dateRange.to) {\n          if (!isWithinInterval(transactionDate, {\n            start: filters.dateRange.from,\n            end: filters.dateRange.to\n          })) {\n            return false;\n          }\n        } else if (filters.dateRange.from) {\n          if (transactionDate < filters.dateRange.from) return false;\n        } else if (filters.dateRange.to) {\n          if (transactionDate > filters.dateRange.to) return false;\n        }\n      }\n\n      if (filters.description) {\n        const description = closure.description || '';\n        if (!description.toLowerCase().includes(filters.description.toLowerCase())) {\n          return false;\n        }\n      }\n\n      if (filters.status && closure.status !== filters.status) {\n        return false;\n      }\n\n      return true;\n    });\n  }, [closures, filters]);\n\n  const stats = {\n    totalClosures: filteredClosures.length,\n    totalAmount: filteredClosures.reduce((sum: number, closure: Transaction) => sum + Number(closure.amount), 0),\n    completedClosures: filteredClosures.filter((closure: Transaction) => closure.status === 'completed').length,\n    pendingClosures: filteredClosures.filter((closure: Transaction) => closure.status === 'pending').length,\n  };\n\n  const handleFiltersChange = (newFilters: FilterState) => {\n    setFilters(newFilters);\n  };\n\n  const handleResetFilters = () => {\n    setFilters({});\n  };\n\n  if (error) {\n    return (\n      <div className=\"space-y-6\">\n        <div>\n          <h1 className=\"text-3xl font-bold tracking-tight\">My Account Closures</h1>\n          <p className=\"text-muted-foreground\">View and track your account closure history</p>\n        </div>\n        <Card>\n          <CardContent className=\"p-6 text-center\">\n            <p className=\"text-red-600\">Error loading your closures: {(error as Error).message}</p>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold tracking-tight\">My Account Closures</h1>\n        <p className=\"text-muted-foreground\">\n          View and track your account closure history with advanced filtering\n        </p>\n      </div>\n\n      <TransactionFilters\n        filters={filters}\n        onFiltersChange={handleFiltersChange}\n        onReset={handleResetFilters}\n        hideClientFilter={true}\n      />\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Closures</CardTitle>\n            <FileText className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"text-total-closures\">{stats.totalClosures}</div>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Closure Amount</CardTitle>\n            <DollarSign className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"text-total-amount\">â‚¹{stats.totalAmount.toLocaleString()}</div>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Completed</CardTitle>\n            <FileX className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"text-completed-closures\">{stats.completedClosures}</div>\n            <p className=\"text-xs text-muted-foreground\">{stats.pendingClosures} pending</p>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Closure Rate</CardTitle>\n            <FileX className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"text-closure-rate\">\n              {stats.totalClosures > 0 \n                ? Math.round((stats.completedClosures / stats.totalClosures) * 100)\n                : 0\n              }%\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Your Account Closure History</CardTitle>\n          <CardDescription>\n            Showing {filteredClosures.length} of {closures.length} closure transactions\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          {isLoading ? (\n            <div className=\"text-center py-8\">Loading your closures...</div>\n          ) : (\n            <div className=\"space-y-4\">\n              {filteredClosures.map((closure: Transaction) => (\n                <div key={closure.id} className=\"flex items-center justify-between p-4 border rounded-lg\" data-testid={`card-closure-${closure.id}`}>\n                  <div className=\"flex items-center space-x-4\">\n                    <div className=\"flex flex-col\">\n                      <div className=\"font-medium\" data-testid={`text-amount-${closure.id}`}>\n                        â‚¹{Number(closure.amount).toLocaleString()}\n                      </div>\n                      <div className=\"text-sm text-muted-foreground\" data-testid={`text-date-${closure.id}`}>\n                        {format(new Date(closure.processedAt || closure.createdAt), 'MMM dd, yyyy')}\n                      </div>\n                    </div>\n                    <div className=\"flex flex-col\">\n                      <div className=\"text-sm font-medium\" data-testid={`text-description-${closure.id}`}>\n                        {closure.description || 'Account Closure'}\n                      </div>\n                      <div className=\"text-sm text-muted-foreground\">\n                        ID: {closure.id.slice(0, 8)}...\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <Badge \n                      variant={closure.status === 'completed' ? 'default' : \n                               closure.status === 'pending' ? 'secondary' : 'destructive'}\n                      data-testid={`badge-status-${closure.id}`}\n                    >\n                      {closure.status.charAt(0).toUpperCase() + closure.status.slice(1)}\n                    </Badge>\n                    <Button variant=\"ghost\" size=\"sm\" data-testid={`button-view-${closure.id}`}>\n                      <Eye className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n                </div>\n              ))}\n              \n              {filteredClosures.length === 0 && !isLoading && (\n                <div className=\"text-center py-8 text-muted-foreground\">\n                  {closures.length === 0 \n                    ? \"You haven't closed any accounts yet.\"\n                    : \"No closures match the current filters.\"\n                  }\n                </div>\n              )}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","size_bytes":9281},"client/src/pages/client/MyInvestmentsPage.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { useState, useMemo } from \"react\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { TrendingUp, DollarSign, FileText, Eye } from \"lucide-react\";\nimport { format, isWithinInterval } from \"date-fns\";\nimport { TransactionFilters } from \"@/components/TransactionFilters\";\nimport { DateRange } from \"react-day-picker\";\n\ninterface Transaction {\n  id: string;\n  type: string;\n  amount: number;\n  status: string;\n  description?: string;\n  processedAt?: Date;\n  createdAt: Date;\n  client?: {\n    id: string;\n    clientCode: string;\n    user?: {\n      firstName: string;\n      lastName: string;\n      email: string;\n    };\n  };\n}\n\ninterface FilterState {\n  dateRange?: DateRange;\n  description?: string;\n  status?: string;\n}\n\ninterface MyInvestmentsPageProps {\n  clientId: string; // Client ID passed from parent or auth context\n}\n\nexport default function MyInvestmentsPage({ clientId }: MyInvestmentsPageProps) {\n  // Filter state (no clientId filter needed since we only show this client's data)\n  const [filters, setFilters] = useState<FilterState>({});\n\n  // Fetch this client's investment transactions only\n  const { data: investments = [], isLoading, error } = useQuery({\n    queryKey: ['/api/clients', clientId, 'transactions', { type: 'investment' }],\n    queryFn: async () => {\n      const response = await fetch(`/api/clients/${clientId}/transactions?type=investment`);\n      if (!response.ok) {\n        throw new Error('Failed to fetch your investment transactions');\n      }\n      return response.json();\n    },\n    enabled: !!clientId, // Only run query if clientId is available\n  });\n\n  // Apply filters to investments\n  const filteredInvestments = useMemo(() => {\n    return investments.filter((investment: Transaction) => {\n      // Date range filter\n      if (filters.dateRange?.from || filters.dateRange?.to) {\n        const transactionDate = new Date(investment.processedAt || investment.createdAt);\n        if (filters.dateRange.from && filters.dateRange.to) {\n          if (!isWithinInterval(transactionDate, {\n            start: filters.dateRange.from,\n            end: filters.dateRange.to\n          })) {\n            return false;\n          }\n        } else if (filters.dateRange.from) {\n          if (transactionDate < filters.dateRange.from) return false;\n        } else if (filters.dateRange.to) {\n          if (transactionDate > filters.dateRange.to) return false;\n        }\n      }\n\n      // Description filter\n      if (filters.description) {\n        const description = investment.description || '';\n        if (!description.toLowerCase().includes(filters.description.toLowerCase())) {\n          return false;\n        }\n      }\n\n      // Status filter\n      if (filters.status && investment.status !== filters.status) {\n        return false;\n      }\n\n      return true;\n    });\n  }, [investments, filters]);\n\n  // Calculate investment statistics from filtered data\n  const stats = {\n    totalInvestments: filteredInvestments.length,\n    totalAmount: filteredInvestments.reduce((sum: number, investment: Transaction) => sum + Number(investment.amount), 0),\n    completedInvestments: filteredInvestments.filter((investment: Transaction) => investment.status === 'completed').length,\n    pendingInvestments: filteredInvestments.filter((investment: Transaction) => investment.status === 'pending').length,\n  };\n\n  const handleFiltersChange = (newFilters: FilterState) => {\n    setFilters(newFilters);\n  };\n\n  const handleResetFilters = () => {\n    setFilters({});\n  };\n\n  if (error) {\n    return (\n      <div className=\"space-y-6\">\n        <div>\n          <h1 className=\"text-3xl font-bold tracking-tight\">My Investments</h1>\n          <p className=\"text-muted-foreground\">View and track your investment history</p>\n        </div>\n        <Card>\n          <CardContent className=\"p-6 text-center\">\n            <p className=\"text-red-600\">Error loading your investments: {(error as Error).message}</p>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold tracking-tight\">My Investments</h1>\n        <p className=\"text-muted-foreground\">\n          View and track your investment history with advanced filtering\n        </p>\n      </div>\n\n      {/* Filters - Client filter hidden */}\n      <TransactionFilters\n        filters={filters}\n        onFiltersChange={handleFiltersChange}\n        onReset={handleResetFilters}\n        hideClientFilter={true}\n      />\n\n      {/* Investment Statistics */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Investments</CardTitle>\n            <FileText className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"text-total-investments\">{stats.totalInvestments}</div>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Investment Amount</CardTitle>\n            <DollarSign className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"text-total-amount\">â‚¹{stats.totalAmount.toLocaleString()}</div>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Completed</CardTitle>\n            <TrendingUp className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"text-completed-investments\">{stats.completedInvestments}</div>\n            <p className=\"text-xs text-muted-foreground\">{stats.pendingInvestments} pending</p>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Success Rate</CardTitle>\n            <TrendingUp className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"text-success-rate\">\n              {stats.totalInvestments > 0 \n                ? Math.round((stats.completedInvestments / stats.totalInvestments) * 100)\n                : 0\n              }%\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Investment Transactions Table */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Your Investment History</CardTitle>\n          <CardDescription>\n            Showing {filteredInvestments.length} of {investments.length} investment transactions\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          {isLoading ? (\n            <div className=\"text-center py-8\">Loading your investments...</div>\n          ) : (\n            <div className=\"space-y-4\">\n              {filteredInvestments.map((investment: Transaction) => (\n                <div key={investment.id} className=\"flex items-center justify-between p-4 border rounded-lg\" data-testid={`card-investment-${investment.id}`}>\n                  <div className=\"flex items-center space-x-4\">\n                    <div className=\"flex flex-col\">\n                      <div className=\"font-medium\" data-testid={`text-amount-${investment.id}`}>\n                        â‚¹{Number(investment.amount).toLocaleString()}\n                      </div>\n                      <div className=\"text-sm text-muted-foreground\" data-testid={`text-date-${investment.id}`}>\n                        {format(new Date(investment.processedAt || investment.createdAt), 'MMM dd, yyyy')}\n                      </div>\n                    </div>\n                    <div className=\"flex flex-col\">\n                      <div className=\"text-sm font-medium\" data-testid={`text-description-${investment.id}`}>\n                        {investment.description || 'Investment Transaction'}\n                      </div>\n                      <div className=\"text-sm text-muted-foreground\">\n                        ID: {investment.id.slice(0, 8)}...\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <Badge \n                      variant={investment.status === 'completed' ? 'default' : \n                               investment.status === 'pending' ? 'secondary' : 'destructive'}\n                      data-testid={`badge-status-${investment.id}`}\n                    >\n                      {investment.status.charAt(0).toUpperCase() + investment.status.slice(1)}\n                    </Badge>\n                    <Button variant=\"ghost\" size=\"sm\" data-testid={`button-view-${investment.id}`}>\n                      <Eye className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n                </div>\n              ))}\n              \n              {filteredInvestments.length === 0 && !isLoading && (\n                <div className=\"text-center py-8 text-muted-foreground\">\n                  {investments.length === 0 \n                    ? \"You haven't made any investments yet.\"\n                    : \"No investments match the current filters.\"\n                  }\n                </div>\n              )}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","size_bytes":9969},"client/src/pages/client/MyPayoutsPage.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { useState, useMemo } from \"react\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { TrendingUp, DollarSign, FileText, Eye } from \"lucide-react\";\nimport { format, isWithinInterval } from \"date-fns\";\nimport { TransactionFilters } from \"@/components/TransactionFilters\";\nimport { DateRange } from \"react-day-picker\";\n\ninterface Transaction {\n  id: string;\n  type: string;\n  amount: number;\n  status: string;\n  description?: string;\n  processedAt?: Date;\n  createdAt: Date;\n  client?: {\n    id: string;\n    clientCode: string;\n    user?: {\n      firstName: string;\n      lastName: string;\n      email: string;\n    };\n  };\n}\n\ninterface FilterState {\n  dateRange?: DateRange;\n  description?: string;\n  status?: string;\n}\n\ninterface MyPayoutsPageProps {\n  clientId: string;\n}\n\nexport default function MyPayoutsPage({ clientId }: MyPayoutsPageProps) {\n  const [filters, setFilters] = useState<FilterState>({});\n\n  const { data: payouts = [], isLoading, error } = useQuery({\n    queryKey: ['/api/clients', clientId, 'transactions', { type: 'payout' }],\n    queryFn: async () => {\n      const response = await fetch(`/api/clients/${clientId}/transactions?type=payout`);\n      if (!response.ok) {\n        throw new Error('Failed to fetch your payout transactions');\n      }\n      return response.json();\n    },\n    enabled: !!clientId,\n  });\n\n  const filteredPayouts = useMemo(() => {\n    return payouts.filter((payout: Transaction) => {\n      // Date range filter\n      if (filters.dateRange?.from || filters.dateRange?.to) {\n        const transactionDate = new Date(payout.processedAt || payout.createdAt);\n        if (filters.dateRange.from && filters.dateRange.to) {\n          if (!isWithinInterval(transactionDate, {\n            start: filters.dateRange.from,\n            end: filters.dateRange.to\n          })) {\n            return false;\n          }\n        } else if (filters.dateRange.from) {\n          if (transactionDate < filters.dateRange.from) return false;\n        } else if (filters.dateRange.to) {\n          if (transactionDate > filters.dateRange.to) return false;\n        }\n      }\n\n      if (filters.description) {\n        const description = payout.description || '';\n        if (!description.toLowerCase().includes(filters.description.toLowerCase())) {\n          return false;\n        }\n      }\n\n      if (filters.status && payout.status !== filters.status) {\n        return false;\n      }\n\n      return true;\n    });\n  }, [payouts, filters]);\n\n  const stats = {\n    totalPayouts: filteredPayouts.length,\n    totalAmount: filteredPayouts.reduce((sum: number, payout: Transaction) => sum + Number(payout.amount), 0),\n    completedPayouts: filteredPayouts.filter((payout: Transaction) => payout.status === 'completed').length,\n    pendingPayouts: filteredPayouts.filter((payout: Transaction) => payout.status === 'pending').length,\n  };\n\n  const handleFiltersChange = (newFilters: FilterState) => {\n    setFilters(newFilters);\n  };\n\n  const handleResetFilters = () => {\n    setFilters({});\n  };\n\n  if (error) {\n    return (\n      <div className=\"space-y-6\">\n        <div>\n          <h1 className=\"text-3xl font-bold tracking-tight\">My Payouts</h1>\n          <p className=\"text-muted-foreground\">View and track your payout history</p>\n        </div>\n        <Card>\n          <CardContent className=\"p-6 text-center\">\n            <p className=\"text-red-600\">Error loading your payouts: {(error as Error).message}</p>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold tracking-tight\">My Payouts</h1>\n        <p className=\"text-muted-foreground\">\n          View and track your payout history with advanced filtering\n        </p>\n      </div>\n\n      <TransactionFilters\n        filters={filters}\n        onFiltersChange={handleFiltersChange}\n        onReset={handleResetFilters}\n        hideClientFilter={true}\n      />\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Payouts</CardTitle>\n            <FileText className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"text-total-payouts\">{stats.totalPayouts}</div>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Payout Amount</CardTitle>\n            <DollarSign className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"text-total-amount\">â‚¹{stats.totalAmount.toLocaleString()}</div>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Completed</CardTitle>\n            <TrendingUp className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"text-completed-payouts\">{stats.completedPayouts}</div>\n            <p className=\"text-xs text-muted-foreground\">{stats.pendingPayouts} pending</p>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Earnings Rate</CardTitle>\n            <TrendingUp className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"text-earnings-rate\">\n              {stats.totalPayouts > 0 \n                ? Math.round((stats.completedPayouts / stats.totalPayouts) * 100)\n                : 0\n              }%\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Your Payout History</CardTitle>\n          <CardDescription>\n            Showing {filteredPayouts.length} of {payouts.length} payout transactions\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          {isLoading ? (\n            <div className=\"text-center py-8\">Loading your payouts...</div>\n          ) : (\n            <div className=\"space-y-4\">\n              {filteredPayouts.map((payout: Transaction) => (\n                <div key={payout.id} className=\"flex items-center justify-between p-4 border rounded-lg\" data-testid={`card-payout-${payout.id}`}>\n                  <div className=\"flex items-center space-x-4\">\n                    <div className=\"flex flex-col\">\n                      <div className=\"font-medium\" data-testid={`text-amount-${payout.id}`}>\n                        â‚¹{Number(payout.amount).toLocaleString()}\n                      </div>\n                      <div className=\"text-sm text-muted-foreground\" data-testid={`text-date-${payout.id}`}>\n                        {format(new Date(payout.processedAt || payout.createdAt), 'MMM dd, yyyy')}\n                      </div>\n                    </div>\n                    <div className=\"flex flex-col\">\n                      <div className=\"text-sm font-medium\" data-testid={`text-description-${payout.id}`}>\n                        {payout.description || 'Payout Transaction'}\n                      </div>\n                      <div className=\"text-sm text-muted-foreground\">\n                        ID: {payout.id.slice(0, 8)}...\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <Badge \n                      variant={payout.status === 'completed' ? 'default' : \n                               payout.status === 'pending' ? 'secondary' : 'destructive'}\n                      data-testid={`badge-status-${payout.id}`}\n                    >\n                      {payout.status.charAt(0).toUpperCase() + payout.status.slice(1)}\n                    </Badge>\n                    <Button variant=\"ghost\" size=\"sm\" data-testid={`button-view-${payout.id}`}>\n                      <Eye className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n                </div>\n              ))}\n              \n              {filteredPayouts.length === 0 && !isLoading && (\n                <div className=\"text-center py-8 text-muted-foreground\">\n                  {payouts.length === 0 \n                    ? \"You haven't received any payouts yet.\"\n                    : \"No payouts match the current filters.\"\n                  }\n                </div>\n              )}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","size_bytes":9192},"client/src/pages/client/MyWithdrawalsPage.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { useState, useMemo } from \"react\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { TrendingDown, DollarSign, FileText, Eye } from \"lucide-react\";\nimport { format, isWithinInterval } from \"date-fns\";\nimport { TransactionFilters } from \"@/components/TransactionFilters\";\nimport { DateRange } from \"react-day-picker\";\n\ninterface Transaction {\n  id: string;\n  type: string;\n  amount: number;\n  status: string;\n  description?: string;\n  processedAt?: Date;\n  createdAt: Date;\n  client?: {\n    id: string;\n    clientCode: string;\n    user?: {\n      firstName: string;\n      lastName: string;\n      email: string;\n    };\n  };\n}\n\ninterface FilterState {\n  dateRange?: DateRange;\n  description?: string;\n  status?: string;\n}\n\ninterface MyWithdrawalsPageProps {\n  clientId: string; // Client ID passed from parent or auth context\n}\n\nexport default function MyWithdrawalsPage({ clientId }: MyWithdrawalsPageProps) {\n  // Filter state\n  const [filters, setFilters] = useState<FilterState>({});\n\n  // Fetch this client's withdrawal transactions only\n  const { data: withdrawals = [], isLoading, error } = useQuery({\n    queryKey: ['/api/clients', clientId, 'transactions', { type: 'withdrawal' }],\n    queryFn: async () => {\n      const response = await fetch(`/api/clients/${clientId}/transactions?type=withdrawal`);\n      if (!response.ok) {\n        throw new Error('Failed to fetch your withdrawal transactions');\n      }\n      return response.json();\n    },\n    enabled: !!clientId,\n  });\n\n  // Apply filters to withdrawals\n  const filteredWithdrawals = useMemo(() => {\n    return withdrawals.filter((withdrawal: Transaction) => {\n      // Date range filter\n      if (filters.dateRange?.from || filters.dateRange?.to) {\n        const transactionDate = new Date(withdrawal.processedAt || withdrawal.createdAt);\n        if (filters.dateRange.from && filters.dateRange.to) {\n          if (!isWithinInterval(transactionDate, {\n            start: filters.dateRange.from,\n            end: filters.dateRange.to\n          })) {\n            return false;\n          }\n        } else if (filters.dateRange.from) {\n          if (transactionDate < filters.dateRange.from) return false;\n        } else if (filters.dateRange.to) {\n          if (transactionDate > filters.dateRange.to) return false;\n        }\n      }\n\n      // Description filter\n      if (filters.description) {\n        const description = withdrawal.description || '';\n        if (!description.toLowerCase().includes(filters.description.toLowerCase())) {\n          return false;\n        }\n      }\n\n      // Status filter\n      if (filters.status && withdrawal.status !== filters.status) {\n        return false;\n      }\n\n      return true;\n    });\n  }, [withdrawals, filters]);\n\n  // Calculate withdrawal statistics from filtered data\n  const stats = {\n    totalWithdrawals: filteredWithdrawals.length,\n    totalAmount: filteredWithdrawals.reduce((sum: number, w: Transaction) => sum + Number(w.amount), 0),\n    completedWithdrawals: filteredWithdrawals.filter((w: Transaction) => w.status === 'completed').length,\n    pendingWithdrawals: filteredWithdrawals.filter((w: Transaction) => w.status === 'pending').length,\n  };\n\n  const handleFiltersChange = (newFilters: FilterState) => {\n    setFilters(newFilters);\n  };\n\n  const handleResetFilters = () => {\n    setFilters({});\n  };\n\n  if (error) {\n    return (\n      <div className=\"space-y-6\">\n        <div>\n          <h1 className=\"text-3xl font-bold tracking-tight\">My Withdrawals</h1>\n          <p className=\"text-muted-foreground\">View and track your withdrawal history</p>\n        </div>\n        <Card>\n          <CardContent className=\"p-6 text-center\">\n            <p className=\"text-red-600\">Error loading your withdrawals: {(error as Error).message}</p>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold tracking-tight\">My Withdrawals</h1>\n        <p className=\"text-muted-foreground\">\n          View and track your withdrawal history with advanced filtering\n        </p>\n      </div>\n\n      {/* Filters - Client filter hidden */}\n      <TransactionFilters\n        filters={filters}\n        onFiltersChange={handleFiltersChange}\n        onReset={handleResetFilters}\n        hideClientFilter={true}\n      />\n\n      {/* Withdrawal Statistics */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Withdrawals</CardTitle>\n            <FileText className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"text-total-withdrawals\">{stats.totalWithdrawals}</div>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Withdrawal Amount</CardTitle>\n            <DollarSign className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"text-total-amount\">â‚¹{stats.totalAmount.toLocaleString()}</div>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Completed</CardTitle>\n            <TrendingDown className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"text-completed-withdrawals\">{stats.completedWithdrawals}</div>\n            <p className=\"text-xs text-muted-foreground\">{stats.pendingWithdrawals} pending</p>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Processing Rate</CardTitle>\n            <TrendingDown className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\" data-testid=\"text-processing-rate\">\n              {stats.totalWithdrawals > 0 \n                ? Math.round((stats.completedWithdrawals / stats.totalWithdrawals) * 100)\n                : 0\n              }%\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Withdrawal Transactions Table */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Your Withdrawal History</CardTitle>\n          <CardDescription>\n            Showing {filteredWithdrawals.length} of {withdrawals.length} withdrawal transactions\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          {isLoading ? (\n            <div className=\"text-center py-8\">Loading your withdrawals...</div>\n          ) : (\n            <div className=\"space-y-4\">\n              {filteredWithdrawals.map((withdrawal: Transaction) => (\n                <div key={withdrawal.id} className=\"flex items-center justify-between p-4 border rounded-lg\" data-testid={`card-withdrawal-${withdrawal.id}`}>\n                  <div className=\"flex items-center space-x-4\">\n                    <div className=\"flex flex-col\">\n                      <div className=\"font-medium\" data-testid={`text-amount-${withdrawal.id}`}>\n                        â‚¹{Number(withdrawal.amount).toLocaleString()}\n                      </div>\n                      <div className=\"text-sm text-muted-foreground\" data-testid={`text-date-${withdrawal.id}`}>\n                        {format(new Date(withdrawal.processedAt || withdrawal.createdAt), 'MMM dd, yyyy')}\n                      </div>\n                    </div>\n                    <div className=\"flex flex-col\">\n                      <div className=\"text-sm font-medium\" data-testid={`text-description-${withdrawal.id}`}>\n                        {withdrawal.description || 'Withdrawal Transaction'}\n                      </div>\n                      <div className=\"text-sm text-muted-foreground\">\n                        ID: {withdrawal.id.slice(0, 8)}...\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <Badge \n                      variant={withdrawal.status === 'completed' ? 'default' : \n                               withdrawal.status === 'pending' ? 'secondary' : 'destructive'}\n                      data-testid={`badge-status-${withdrawal.id}`}\n                    >\n                      {withdrawal.status.charAt(0).toUpperCase() + withdrawal.status.slice(1)}\n                    </Badge>\n                    <Button variant=\"ghost\" size=\"sm\" data-testid={`button-view-${withdrawal.id}`}>\n                      <Eye className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n                </div>\n              ))}\n              \n              {filteredWithdrawals.length === 0 && !isLoading && (\n                <div className=\"text-center py-8 text-muted-foreground\">\n                  {withdrawals.length === 0 \n                    ? \"You haven't made any withdrawal requests yet.\"\n                    : \"No withdrawals match the current filters.\"\n                  }\n                </div>\n              )}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","size_bytes":9826}},"version":1}